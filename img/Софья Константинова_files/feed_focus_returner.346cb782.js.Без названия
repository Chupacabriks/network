(()=>{"use strict";var e,r,t,_={293120:(e,r,t)=>{var _=t(636576),n=t(338329),a=t(854598);window.vk?.stDomain&&(t.p=window.vk.stDomain+"/dist/");try{(0,n.tq)().setStartupHandler("FeedFocusReturner/init",a.feedFocusReturner)}catch(e){}requestIdleCallback((()=>{try{(0,_.statlogsValueEvent)("entries_requests",1,"feed_focus_returner","web")}catch{}}),{timeout:5e3});try{stManager?.done(partConfigEnabled("web_static_manager_done_with_hash")?"dist/web/feed_focus_returner.346cb782.js":"dist/web/feed_focus_returner.js")}catch(e){}},854598:(e,r,t)=>{t.d(r,{feedFocusReturner:()=>l});var _=t(342018),n=t(540462);const a=["layer_wrap","box_layer_wrap","wk_layer_wrap","mv_layer_wrap","ap_layer_wrap"],o=a.map((e=>`#${e}`)).join(","),i={attributes:!0,attributeFilter:["style"]},c={childList:!0,subtree:!0},u=e=>"style"===e.attributeName&&e.target instanceof HTMLElement&&"none"===e.target.style.display,s=()=>{const e=new URLSearchParams(window.location.search).get("w");if(e?.includes("wall"))return e?.replace("wall","post")?.split("/")?.[0]},l=({payload:{target:e}})=>{if(!e||!(0,n.partConfigEnabled)("feed_focus_returner"))return;let r;const t=new MutationObserver(((e,t)=>{for(const _ of e){if(!(_.target instanceof Element))continue;const e=_.target.getAttribute("id");if(!e)continue;if(!a.includes(e))continue;if(!u(_))continue;const n=[...document.querySelectorAll(o)].find((e=>"block"===e.style.display));if(n){t.disconnect(),t.observe(n,i);break}(document.activeElement instanceof HTMLElement||document.activeElement instanceof SVGElement)&&document.activeElement?.blur(),r?.focus(),t.disconnect()}})),l=e=>{requestAnimationFrame((()=>{if(!(e.target instanceof HTMLElement||e.target instanceof SVGElement))return;const _=document.activeElement?.closest(o);if(!_)return;s()||(r=e.target,t.observe(_,i))}))};e.addEventListener("focusout",l);const f=new MutationObserver((e=>{const _=s();if(_)for(const n of e){const e=Array.from(n.removedNodes).find((e=>e instanceof HTMLDivElement&&e.getAttribute("id")===_));if(!e)continue;const a=e.querySelector(".PostHeaderTitle__link, .PostHeaderSubtitle__link");r=a||e;const o=document.querySelector("#wk_layer_wrap");o&&t.observe(o,i);break}}));f.observe(e,c);(0,_.pushNavDestroy)((()=>{e.removeEventListener("focusout",l),t.disconnect(),f.disconnect()}))}}},n={};function __webpack_require__(e){var r=n[e];if(void 0!==r)return r.exports;var t=n[e]={exports:{}};return _[e].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.m=_,e=[],__webpack_require__.O=(r,t,_,n)=>{if(!t){var a=1/0;for(u=0;u<e.length;u++){for(var[t,_,n]=e[u],o=!0,i=0;i<t.length;i++)(!1&n||a>=n)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[i])))?t.splice(i--,1):(o=!1,n<a&&(a=n));if(o){e.splice(u--,1);var c=_();void 0!==c&&(r=c)}}return r}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[t,_,n]},__webpack_require__.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(r,{a:r}),r},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,_){if(1&_&&(e=this(e)),8&_)return e;if("object"==typeof e&&e){if(4&_&&e.__esModule)return e;if(16&_&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var a={};r=r||[null,t({}),t([]),t(t)];for(var o=2&_&&e;"object"==typeof o&&!~r.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((r=>a[r]=()=>e[r]));return a.default=()=>e,__webpack_require__.d(n,a),n},__webpack_require__.d=(e,r)=>{for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.e=()=>Promise.resolve(),__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",(()=>{var e={51345:0};__webpack_require__.O.j=r=>0===e[r];var r=(r,t)=>{var _,n,[a,o,i]=t,c=0;if(a.some((r=>0!==e[r]))){for(_ in o)__webpack_require__.o(o,_)&&(__webpack_require__.m[_]=o[_]);if(i)var u=i(__webpack_require__)}for(r&&r(t);c<a.length;c++)n=a[c],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return __webpack_require__.O(u)},t=self.webpackChunkvkweb=self.webpackChunkvkweb||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var a=__webpack_require__.O(void 0,[81765],(()=>__webpack_require__(293120)));a=__webpack_require__.O(a)})();