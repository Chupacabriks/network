(()=>{"use strict";var e,t,r,a,s,c,n={150585:(e,t,r)=>{function a(e,t){let r,a,s=!1;return function c(){if(s)return r=arguments,void(a=this);e.apply(this,arguments),s=!0,setTimeout((function(){s=!1,r&&(c.apply(a,r),r=a=null)}),t)}}r.d(t,{throttle:()=>a})},51921:(e,t,r)=>{r.d(t,{connectTrackTmrGroupsJoin:()=>i,groupsJoinAction:()=>u,trackTmrGroupsJoin:()=>n});var a=r(251703),s=r(957994),c=r(32489);const n=()=>(0,a.tmrSendTimespentEvent)(a.MY_TRACKER_COUNT_EVENT_IDS.COMMUNITY_SUBSCRIBE),o=(0,c.createEffect)({name:"fx/track_group_join",handler:n}),i=e=>(0,c.sample)({clock:e.done,target:o}),u=(e,t,r)=>(0,s.api)("groups.join",e,t,r).then((e=>(n(),e)))},869071:(e,t,r)=>{r.d(t,{connectTrackTmrGroupsJoin:()=>a.connectTrackTmrGroupsJoin,groupsJoinAction:()=>a.groupsJoinAction,trackTmrGroupsJoin:()=>a.trackTmrGroupsJoin});var a=r(51921)},828941:(e,t,r)=>{var a=r(32489),s=r(787587);s.$selectedIndex.reset(s.fireResetSelectionIndex),s.$itemsIndex.reset(s.fireResetItemsIndex),(0,a.sample)({clock:[s.fireUpSelectionIndex,s.fireDownSelectionIndex],fn:()=>!1,target:s.$isMouseActive}),(0,a.sample)({clock:s.fireSetSelectionIndexByItem,fn:()=>!0,target:s.$isMouseActive}),(0,a.sample)({clock:s.fireSetSelectionIndexByItem,source:s.$itemsIndex,fn:(e,t)=>e.findIndex((e=>e.id===t))||-1,target:s.$selectedIndex}),(0,a.sample)({clock:s.fireDownSelectionIndex,source:{itemsIndex:s.$itemsIndex,selectedIndex:s.$selectedIndex},fn:({itemsIndex:e,selectedIndex:t})=>e.length?(t+1)%e.length:-1,target:s.$selectedIndex}),(0,a.sample)({clock:s.fireUpSelectionIndex,source:{itemsIndex:s.$itemsIndex,selectedIndex:s.$selectedIndex},fn:({itemsIndex:e,selectedIndex:t})=>e.length?t-1<0?e.length-1:t-1:-1,target:s.$selectedIndex}),(0,a.sample)({clock:s.fireSetItemIndex,source:s.$itemsIndex,fn:(e,t)=>{if(null===t)return[];const r=[...e],a=r.findIndex((e=>e.id===t.id));return-1!==a&&(r[a]=t),r.push(t),r},target:s.$itemsIndex}),(0,a.sample)({clock:s.$selectedIndex,source:{selectedItemIndex:s.$selectedItemIndex,itemsIndex:s.$itemsIndex},filter:({selectedItemIndex:e,itemsIndex:t},r)=>(t[r]||0===t?.[r]?.id?t[r]:null)?.id!==e?.id,fn:({itemsIndex:e},t)=>e[t]||0===e?.[t]?.id?e[t]:null,target:s.$selectedItemIndex})},487523:(e,t,r)=>{r.d(t,{openProductWiki:()=>i});var a=r(538522),s=r(540462),c=r(6898),n=r(224376),o=r(458840);function i({ownerId:e,itemId:t,event:r,externalId:i,onLoaded:u,from:l,params:d,href:f,adParams:p,isService:h,refSource:_}){if(r?.preventDefault(),r?.stopPropagation(),r?.persist?.(),(0,s.partConfigEnabled)("web_market_item_page")){const e=document.createElement("a");if(e.setAttribute("target","_blank"),f){const t=new URL(f),r=(0,c.fromQueryString)(t.search.slice(1)),a=("groups"===window.cur.module||"public"===window.cur.module)&&!h;a&&(r[n.GROUP_HEADER_QUERY_PARAM]="1"),_&&(r.ref_source=_);const s=a?`${t.pathname}?${(0,c.toQueryString)(r)}`:f;e.setAttribute("href",s)}e.click()}else{const s=(0,a.joinRawId)({itemId:t,ownerId:e,externalId:i});(0,o.showWiki)({w:`product${s}/query`,from:l,...d},!1,r,{queue:1,onLoaded:u,adParams:p})}}},194723:(e,t,r)=>{var a=r(636576),s=r(474848),c=r(205338),n=r(384483),o=r(658023);window.vk?.stDomain&&(r.p=window.vk.stDomain+"/dist/"),(0,n.registerReactApplication)("TopSearch",(()=>{const e=(0,n.getReactRootEl)("TopSearch");e&&(0,c.createRoot)(e).render((0,s.jsx)(o.SearchTopRoot,{}))})),requestIdleCallback((()=>{try{(0,a.statlogsValueEvent)("entries_requests",1,"search_top","web")}catch{}}),{timeout:5e3});try{stManager?.done(partConfigEnabled("web_static_manager_done_with_hash")?"dist/web/search_top.9ca84849.js":"dist/web/search_top.js")}catch(e){}},675183:(e,t,r)=>{r.d(t,{SearchInput:()=>f});var a=r(474848),s=r(296540),c=r(264458),n=r(866467),o=r(670191),i=r(384574),u=r(8520),l=r(697157),d=r(788057);const f=(0,s.forwardRef)((function({onClick:e,onButtonSubmit:t,onFocus:r,onBlur:f,onInput:p,onKeyDown:h,onKeyUp:_,getRootRef:b,searchQuery:k="",tempQuery:g,placeholder:m,focusTrigger:w,isLegacyInput:S=!1,withPadding:v,...y},C){const E=(0,s.useRef)(null),R=(0,l.useExternRef)(C,E),[I,j]=(0,s.useState)(""),T=t=>{e?.(t)},x=()=>{t?.(I)},A=e=>{r?.(e)},q=e=>{f?.(e)},P=e=>{const t=e.currentTarget.value||"";j(t),p?.(e)},O=e=>{h?.(e)},M=e=>{_?.(e)},D=()=>{j(""),E?.current?.focus(),t?.("")};return(0,s.useEffect)((()=>{j(k)}),[k]),(0,s.useEffect)((()=>{g&&(j(g),setTimeout((()=>{E?.current?.setSelectionRange(g.length,g.length)}),0))}),[g]),(0,s.useEffect)((()=>{w&&E?.current?.focus()}),[w]),S?(0,a.jsxs)("div",{className:(0,u.classNames)(d.default.wrapper,v&&d.default.wrapperWithPadding),ref:b,children:[(0,a.jsxs)("div",{className:d.default.inputWrap,children:[(0,a.jsx)("input",{className:d.default.input,type:"search",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",autoComplete:"off",placeholder:m||n.getLang("global_search"),onClick:T,onFocus:A,onBlur:q,onInput:P,onKeyDown:O,ref:R,onKeyUp:M,value:I,id:y?.id??"search_query"}),I&&(0,a.jsx)("button",{className:d.default.clearButton,onClick:D,children:(0,a.jsx)(o.Icon24Cancel,{})})]}),(0,a.jsx)("button",{className:d.default.button,onClick:x,children:(0,a.jsx)(i.Icon16SearchOutline,{})})]}):(0,a.jsx)(c.Search,{placeholder:m||n.getLang("global_search"),onClick:T,onFocus:A,onBlur:q,onInput:P,onKeyDown:O,onKeyUp:M,getRootRef:b,getRef:R,value:I,...y})}))},566017:(e,t,r)=>{r.d(t,{SearchInput:()=>a.SearchInput});var a=r(675183)},658023:(e,t,r)=>{r.d(t,{SearchTopRoot:()=>o});var a=r(474848),s=r(370272),c=r(865708),n=r(753457);r(470671),r(874524);const o=()=>(0,a.jsx)(c.AppRootProvider,{sizeX:n.SizeType.REGULAR,sizeY:n.SizeType.COMPACT,viewWidth:n.ViewWidth.DESKTOP,children:(0,a.jsx)(s.App,{})})},122543:(e,t,r)=>{r.d(t,{getSearchTop:()=>c});var a=r(957994),s=r(626586);r(869071);function c(e,t){return(0,a.api)(s.CATALOG_API_METHODS.GET_SEARCH_TOP,e,void 0,t)}},334533:(e,t,r)=>{r.d(t,{App:()=>_});var a=r(474848),s=r(296540),c=r(293721),n=r(566017),o=r(243897),i=r(660497),u=r(972332),l=r(489569),d=r(511878),f=r(127609),p=r(626586),h=(r(828941),r(706227));const _=()=>{const e=(0,c.useStore)(i.$displayResults),t=(0,c.useStore)(i.$currentQuery),r=(0,s.useRef)(null),_=(0,s.useRef)(),b=(0,s.useCallback)((()=>{e||r.current?.focus()}),[r,e]),k=(0,s.useCallback)((e=>{(0,i.fireKeyDownEvent)({event:e,blur:()=>{r.current?.blur()},cancelEvent:()=>{(0,u.cancelEvent)(e.nativeEvent)},clearTimeout:()=>{clearTimeout(_.current)}})}),[r,_]),g=(0,s.useCallback)((e=>{const t=e.currentTarget.value||"";(0,i.fireSetCurrentQuery)(t),clearTimeout(_.current),_.current=setTimeout((()=>{(0,i.fireSearch)({q:t})}),250)}),[_]);return(0,s.useEffect)((()=>{const e=e=>{const t=e.target;t.closest('[data-search-top-target="true"]')||t.closest(`#${p.SEARCH_INPUT_ID}`)||t.closest(".vkuiSearch__icon")||!(0,l.isMainClick)(e)||(0,i.fireSetResultsDisplay)(!1)};return(0,d.topHeaderListener)(),document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),(0,s.useEffect)((()=>()=>clearTimeout(_.current)),[]),(0,s.useEffect)((()=>{const e=(0,f.subscribeModuleEvaluated)((()=>{(0,i.fireSetCatalog)(null),(0,i.fireAbortRequest)(),(0,i.fireSetCurrentQuery)(""),(0,i.fireSetResultsDisplay)(!1)}));return()=>{e()}}),[]),(0,a.jsxs)("div",{className:h.default.app,id:"ts_wrap",children:[(0,a.jsx)("div",{"data-search-top-target":"true",children:(0,a.jsx)(n.SearchInput,{noPadding:!0,onClick:b,onFocus:()=>{e||(0,i.fireSetResultsDisplay)(!0)},onInput:g,onKeyDown:k,ref:r,searchQuery:t,className:h.default.search,"data-testid":"search_top_input"})}),e&&(0,a.jsx)(o.SearchResults,{})]})}},370272:(e,t,r)=>{r.d(t,{App:()=>a.App});var a=r(334533)},438801:(e,t,r)=>{r.d(t,{Placeholder:()=>n});var a=r(474848),s=r(720836),c=r(866467);const n=()=>(0,a.jsx)(s.Placeholder,{children:c.getLang("search_search_top_has_no_results")})},92818:(e,t,r)=>{r.d(t,{Placeholder:()=>a.Placeholder});var a=r(438801)},154653:(e,t,r)=>{r.d(t,{SearchResults:()=>m});var a=r(474848),s=r(296540),c=r(744440),n=r(293721),o=r(174269),i=r(30259),u=r(559842),l=r(487523),d=r(660497),f=r(92818),p=r(314309),h=r(127609),_=r(568775),b=r(511878),k=r(432651),g=r(890254);const m=()=>{const e=(0,n.useStore)(d.$catalog),t=(0,n.useStore)(d.$extendedData),r=(0,n.useStore)(d.$pending),m=(0,n.useStore)(d.$currentQuery),w=(0,n.useStore)(d.$fetchError),S={pageId:"top_search",cacheId:window.location.href,catalogType:o.CatalogType.SEARCH},v={navGo:h.navGo,userId:window?.vk?.id,pageVerifiedTip:_.pageVerifiedTip,openChat:(e,t)=>{window?.reforgedME?.selectPeer?.(e,t)}};return(0,s.useEffect)((()=>{e||r||(0,d.fireSearch)({q:""})}),[]),w?(0,a.jsx)("div",{className:k.default.root,children:(0,a.jsx)(f.Placeholder,{})}):(0,a.jsx)("div",{className:k.default.root,"data-search-top-target":"true",children:(0,a.jsx)(c.CustomScrollView,{autoHideScrollbar:!0,className:k.default.scroll,children:r?(0,a.jsx)(u.Spinner,{}):(0,a.jsx)(o.CatalogSearchProvider,{currentQuery:m,search:e=>(0,d.fireSearch)(e),displayTopSearch:d.fireSetResultsDisplay,setCurrentQuery:(e="")=>(0,d.fireSetCurrentQuery)(e),showVideo:b.showVideo,marketRefSource:m?i.RefSource.SEARCH_GLOBAL:i.RefSource.SEARCH_RECOMMENDATIONS,openProductWiki:l.openProductWiki,onOpenUrlClick:(e,t)=>{"/search?c[section]=auto&c[q]="===e&&((0,g.searchProfilingService)().setProfilingMarkStart(g.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_TRANSITION),(0,g.searchProfilingService)().setProfilingMarkStart(g.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION)),window.stManager.add([window.jsc("web/search.js")]).then((()=>{(0,h.navGo)(t,null)}))},children:(0,a.jsx)(o.Catalog,{catalog:e,extendedData:t,nextFromSections:[],onCatalogUpdate:e=>{(0,d.fireSetCatalogCatalog)(e.updatedCatalog)},collectClick:p.searchStatsCollector.logEvent,collectView:p.searchViewStatCollector.logEvent,catalogVars:S,platformVars:v,blockLayoutResolver:o.modalLayoutResolver})})})})}},243897:(e,t,r)=>{r.d(t,{SearchResults:()=>a.SearchResults});var a=r(154653)},418469:(e,t,r)=>{r.d(t,{Spinner:()=>n});var a=r(474848),s=r(700272),c=r(136147);const n=()=>(0,a.jsx)("div",{className:c.default.spinner,children:(0,a.jsx)(s.Spinner,{size:"small"})})},559842:(e,t,r)=>{r.d(t,{Spinner:()=>a.Spinner});var a=r(418469)},626586:(e,t,r)=>{r.d(t,{CATALOG_API_METHODS:()=>a,SEARCH_INPUT_BLUR_TIMEOUT:()=>n,SEARCH_INPUT_ID:()=>s,SEARCH_TOP_MODAL_NON_CLOSING_ATTR:()=>c});const a={GET_SEARCH_TOP:"catalog.getSearchTop",GET_SECTION:"catalog.getSection",GET_STORIES:"stories.get",JOIN_GROUP:"groups.join",LEAVE_GROUP:"groups.leave",ADD_FRIEND:"friends.add",DELETE_FRIEND:"friends.delete",ADD_RECENT:"search.addRecents",CLEAR_RECENT:"search.clearRecents"},s="SearchTopInput",c="data-search-top-target",n=150},356693:(e,t,r)=>{r.d(t,{$currentQuery:()=>f,HandleKeyDownEffectFx:()=>b,appDomain:()=>d,fireClearApp:()=>_,fireKeyDownEvent:()=>h,fireSetCurrentQuery:()=>p});var a=r(32489),s=r(972332),c=r(198485),n=r(540462),o=r(660497),i=r(626586),u=r(127609),l=r(890254);const d=(0,a.createDomain)("SEARCH_TOP/APP"),f=d.createStore("",{name:"currentQuery"}),p=d.createEvent("fire/SetCurrentQuery"),h=d.createEvent("fire/KeyDownEvent"),_=d.createEvent("fire/ClearApp"),b=d.createEffect({name:"HandleKeyDownEffectFx",handler:({event:e,selectedItemIndex:t,cancelEvent:r,currentQuery:a,blur:d,displayResults:f,clearTimeout:h})=>{switch(e.keyCode){case s.KEY.DOWN:r(),(0,c.fireDownSelectionIndex)();break;case s.KEY.UP:r(),(0,c.fireUpSelectionIndex)();break;case s.KEY.ENTER:r(),h();let f="/search?c[section]=auto&c[q]=";return(0,n.partConfigEnabled)("search_search_global_refactor_enabled")&&(f=(0,n.partConfigEnabled)("search_all_catalog_enabled")?"/search?q=":"/search?c[q]="),e.ctrlKey||e.metaKey?t?.callback?void t.callback(void 0,!0):void window.open(`${f}${encodeURIComponent(a)}`):t?.callback?(t.callback(),(0,o.fireSetCatalog)(null),void(0,o.fireAbortRequest)()):(p(""),(0,o.fireSetResultsDisplay)(!1),(0,o.fireSetCatalog)(null),(0,o.fireAbortRequest)(),setTimeout((()=>{d()}),i.SEARCH_INPUT_BLUR_TIMEOUT),(0,l.searchProfilingService)().setProfilingMarkStart(l.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_TRANSITION),(0,l.searchProfilingService)().setProfilingMarkStart(l.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION),void window.stManager.add([window.jsc("web/search.js")]).then((()=>{(0,u.navGo)(f+encodeURIComponent(a),null)})));case s.KEY.TAB:return h(),p(""),void(0,o.fireSetResultsDisplay)(!1)}f||(0,o.fireSetResultsDisplay)(!0)}})},593667:(e,t,r)=>{var a=r(32489),s=r(660497),c=r(198485);s.appDomain.onCreateStore((e=>{e.reset(s.fireClearApp)})),(0,a.sample)({clock:s.fireSetCurrentQuery,target:s.$currentQuery}),(0,a.sample)({clock:s.fireSendRequest,target:[c.fireResetSelectionIndex,c.fireResetItemsIndex]}),(0,a.sample)({clock:s.fireSetResultsDisplay,target:[c.fireResetSelectionIndex]}),(0,a.sample)({clock:s.fireSendRequest,fn:()=>null,target:s.fireSetCatalog}),(0,a.sample)({clock:s.SearchTopEffectFx.doneData,fn:({request:e})=>e,target:s.fireSetCatalog}),(0,a.sample)({clock:s.fireSetCatalog,fn:e=>e?.catalog||null,target:s.$catalog}),(0,a.sample)({clock:s.fireSetCatalog,fn:e=>{if(!e)return null;const t={...e};return delete t.catalog,t||null},target:s.$extendedData}),(0,a.sample)({clock:s.fireKeyDownEvent,source:{selectedItemIndex:c.$selectedItemIndex,currentQuery:s.$currentQuery,displayResults:s.$displayResults},fn:(e,t)=>({...t,...e}),target:s.HandleKeyDownEffectFx})},872985:(e,t,r)=>{r.d(t,{$catalog:()=>n,$extendedData:()=>o,fireSetCatalog:()=>s,fireSetCatalogCatalog:()=>c});const a=r(356693).appDomain.createDomain("SEARCH_TOP/CATALOG"),s=a.createEvent("fire/SetCatalog"),c=a.createEvent("fire/SetCatalog"),n=a.createStore(null,{name:"catalog"}),o=a.createStore(null,{name:"extendedData"})},55815:(e,t,r)=>{var a=r(32489),s=r(660497);(0,a.sample)({clock:s.fireSetCatalogCatalog,target:s.$catalog})},660497:(e,t,r)=>{r.d(t,{$catalog:()=>n.$catalog,$currentQuery:()=>a.$currentQuery,$displayResults:()=>s.$displayResults,$extendedData:()=>n.$extendedData,$fetchError:()=>c.$fetchError,$pending:()=>c.$pending,$requestsQueue:()=>c.$requestsQueue,AbortEffectFx:()=>c.AbortEffectFx,CancelStackFilterFx:()=>s.CancelStackFilterFx,CancelStackPushFx:()=>s.CancelStackPushFx,HandleKeyDownEffectFx:()=>a.HandleKeyDownEffectFx,SearchTopEffectFx:()=>c.SearchTopEffectFx,appDomain:()=>a.appDomain,fireAbortRequest:()=>c.fireAbortRequest,fireCancelStackPush:()=>s.fireCancelStackPush,fireClearApp:()=>a.fireClearApp,fireCreateRequest:()=>c.fireCreateRequest,fireKeyDownEvent:()=>a.fireKeyDownEvent,fireRemoveRequestFromQueue:()=>c.fireRemoveRequestFromQueue,fireSearch:()=>c.fireSearch,fireSendRequest:()=>c.fireSendRequest,fireSetCatalog:()=>n.fireSetCatalog,fireSetCatalogCatalog:()=>n.fireSetCatalogCatalog,fireSetCurrentQuery:()=>a.fireSetCurrentQuery,fireSetRequestToQueue:()=>c.fireSetRequestToQueue,fireSetResultsDisplay:()=>s.fireSetResultsDisplay,fireSetUpRequest:()=>c.fireSetUpRequest});var a=r(356693),s=r(780779),c=r(323522),n=r(872985)},470671:(e,t,r)=>{r(593667),r(673221),r(270746),r(55815)},323522:(e,t,r)=>{r.d(t,{$fetchError:()=>_,$pending:()=>p,$requestsQueue:()=>h,AbortEffectFx:()=>b,SearchTopEffectFx:()=>k,fireAbortRequest:()=>f,fireCreateRequest:()=>o,fireRemoveRequestFromQueue:()=>l,fireSearch:()=>n,fireSendRequest:()=>d,fireSetRequestToQueue:()=>u,fireSetUpRequest:()=>i});var a=r(356693),s=r(122543);const c=a.appDomain.createDomain("SEARCH_TOP/SEARCH"),n=c.createEvent("fire/Search"),o=c.createEvent("fire/CreateRequest"),i=c.createEvent("fire/SetUpRequest"),u=c.createEvent("fire/SetRequestToQueue"),l=c.createEvent("fire/RemoveRequestToQueue"),d=c.createEvent("fire/SendRequest"),f=c.createEvent("fire/AbortRequest"),p=c.createStore(!1,{name:"pending"}),h=c.createStore([],{name:"requestsQueue"}),_=c.createStore(!1,{name:"fetchError"}),b=c.createEffect({name:"get/AbortEffectFx",handler:async e=>{e.forEach((e=>{e.fetchOptions?.controller?.abort?.()}))}}),k=c.createEffect({name:"get/SearchTopEffectFx",handler:async e=>{const t=e.fetchOptions?.controller?.signal;return{request:await(0,s.getSearchTop)(e.data,{signal:t}),requestData:e}}})},270746:(e,t,r)=>{var a=r(32489),s=r(660497),c=r(511878);(0,a.sample)({clock:s.fireSearch,fn:e=>({id:(0,c.createCacheId)(e),data:e}),target:s.fireCreateRequest}),(0,a.sample)({clock:s.fireAbortRequest,source:s.$requestsQueue,target:s.AbortEffectFx}),(0,a.sample)({clock:s.fireCreateRequest,source:s.$requestsQueue,fn:(e,t)=>{e.forEach((e=>{e.fetchOptions?.controller?.abort?.()}));return{...t,fetchOptions:{controller:new AbortController}}},target:s.fireSetUpRequest}),(0,a.sample)({clock:s.fireSetUpRequest,target:[s.fireSendRequest,s.fireSetRequestToQueue]}),(0,a.sample)({clock:s.fireSetRequestToQueue,source:s.$requestsQueue,fn:(e,t)=>[...e,t],target:s.$requestsQueue}),(0,a.sample)({clock:s.fireSendRequest,target:s.SearchTopEffectFx}),(0,a.sample)({clock:s.SearchTopEffectFx.pending,target:s.$pending}),(0,a.sample)({clock:s.SearchTopEffectFx.finally,fn:({params:e})=>e,target:s.fireRemoveRequestFromQueue}),(0,a.sample)({clock:s.SearchTopEffectFx.pending,fn:()=>!1,target:s.$fetchError}),(0,a.sample)({clock:s.SearchTopEffectFx.failData,source:s.$pending,filter:e=>!e,fn:()=>!0,target:s.$fetchError})},780779:(e,t,r)=>{r.d(t,{$displayResults:()=>o,CancelStackFilterFx:()=>l,CancelStackPushFx:()=>d,fireCancelStackPush:()=>u,fireSetResultsDisplay:()=>i});var a=r(356693),s=r(633009),c=r(626586);const n=a.appDomain.createDomain("SEARCH_TOP/MODAL"),o=n.createStore(!1,{name:"displayResults"}),i=n.createEvent("fire/SetResultsDisplay"),u=n.createEvent("fire/CancelStackPush"),l=n.createEffect({name:"remove/CancelStackFilter",handler:()=>{(0,s.cancelStackFilter)("top_search",!0)}}),d=n.createEffect({name:"remove/CancelStackFilter",handler:()=>{(0,s.cancelStackPush)("top_search",((e=!0)=>{if(e){const e=document.querySelector(`#${c.SEARCH_INPUT_ID}`);i(!1),e?.blur()}else u()}),!0)}})},673221:(e,t,r)=>{var a=r(32489),s=r(660497);(0,a.sample)({clock:s.fireSetResultsDisplay,source:s.$displayResults,filter:(e,t)=>e!==t,fn:(e,t)=>t,target:s.$displayResults}),(0,a.sample)({clock:s.$displayResults,filter:e=>e,target:s.CancelStackPushFx}),(0,a.sample)({clock:s.$displayResults,filter:e=>!e,target:s.CancelStackFilterFx}),(0,a.sample)({clock:s.fireCancelStackPush,target:s.CancelStackPushFx})},511878:(e,t,r)=>{r.d(t,{createCacheId:()=>l,showVideo:()=>d,topHeaderListener:()=>u});var a=r(972332),s=r(754866),c=r(419733),n=r(626586),o=r(174269),i=r(450927);const u=()=>{(0,a.addEvent)(document,"mousedown",(e=>{const t=e.target,r=!((0,a.checkKeyboardEvent)(e)||(0,s.domClosest)("top_audio_layer_place",t)||(0,s.domClosest)("_ap_layer__close",t)||(0,s.domClosest)("layer_wrap",t)||(0,s.domClosest)("PortalNavigation",t)||(0,s.domClosest)("PortalNavigationDropdown",t)||(0,s.domClosest)("ObsceneTextAlertBox",t)||(0,s.domClosest)("top_notify_layer_place",t)||t?.closest('[data-search-top-target="true"]')),o=!t?.closest(`#${n.SEARCH_INPUT_ID}`);r&&(0,c.topHeaderClose)((()=>!1),o)}))},l=e=>((e,t="",r)=>{const a=Object.entries(e).filter((([,e])=>!!e||0===e)).map((([e,t])=>r?`${r}[${encodeURIComponent(e)}]=${encodeURIComponent(t)}`:`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&");return a?`${t}${a}`:""})(Object.keys(e).sort(((e,t)=>e.localeCompare(t))).reduce(((t,r)=>({...t,[r]:e[r]})),{})),d=({event:e,id:t,video:r})=>{const a=()=>!!window.Video.checkClickEvent(e)||(e.preventDefault(),window.cur.cancelClick?void(window.cur.cancelClick=!1):window.cur.chooseVideoMedia?window.cur.chooseVideoMedia(e.target,t):void window.Video.show(e,t,{autoplay:1,queue:0,playFrom:r.viewed_duration?(0,o.getPlayFromByDuration)(r.viewed_duration):"",addParams:{track_code:r.track_code}},e.target));window.Video?a():(0,i.getVideoModule)().then(a)}},890254:(e,t,r)=>{r.d(t,{PROFILING_COMPONENTS:()=>n,searchProfilingService:()=>i});var a=r(558137),s=r(101272),c=r(32489);const n={SEARCH_TOP_TO_SEARCH_ALL_TRANSITION:"search_top_to_search_all_transition",SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION:"search_top_to_search_all_old_transition"},o=()=>1e3*Number(new Date),i=(0,a.makeSharedState)("global/search/searchProfilingService",(()=>{const e=(0,c.createDomain)("SearchProfilingService"),t=e.createEvent(),r=e.createEvent(),a=e.createEvent(),n=e.createEvent(),i=e.createStore({}),u=e.createEffect((({component:e,startTime:t,service:r,entrypoint:a="",abGroup:c="",isAnonymous:n=!1})=>{const i=o()-t;return e&&t&&r?((0,s.saveStatlogEvents)({name:"search_response_profiling",value:i,keys:[e,c,r,a,String(Number(n))]}),e):""}));return i.reset(n),(0,c.sample)({clock:t,source:i,fn:(e,t)=>({...e,[t]:o()}),target:i}),(0,c.sample)({clock:a,source:i,filter:(e,t)=>Boolean(e[t.component]),fn:(e,t)=>({...t,startTime:e[t.component]}),target:u}),(0,c.sample)({clock:[u.doneData,r],source:i,fn:(e,t)=>{const r={...e};return r[t]&&delete r[t],r},target:i}),{setProfilingMarkStart:t,setProfilingMarkEnd:a,removeProfilingMark:r,reset:n}}),{version:1})},896412:(e,t,r)=>{function a(e){e.preventDefault(),e.stopPropagation()}r.d(t,{cancelEvent:()=>a})},962005:(e,t,r)=>{r.d(t,{GroupsApi:()=>n});var a=r(331635),s=r(641569),c=r(132028);class n extends s.ApiNamespace{get namespace(){return"groups"}constructor(...e){super(...e),this.getById=this.makeMethod("getById",!0),this.getSettings=this.makeMethod("getSettings"),this.getMembers=this.makeMethod("getMembers"),this.getEditSettings=this.makeMethod("getEditSettings"),this.join=this.makeMethod("join"),this.leave=this.makeMethod("leave"),this.changeSubscriptionsVisibility=this.makeMethod("changeSubscriptionsVisibility"),this.get=this.makeMethod("get"),this.edit=this.makeMethod("edit"),this.getWebCatalogMenu=this.makeMethod("getWebCatalogMenu",!0),this.removeRecents=this.makeMethod("removeRecents"),this.getRecommendedTipsList=this.makeMethod("getRecommendedTipsList"),this.getSuggestions=this.makeMethod("getSuggestions"),this.getGroupSettingsMenu=this.makeMethod("getGroupSettingsMenu"),this.getCategories=this.makeMethod("getCategories"),this.addAddress=this.makeMethod("addAddress"),this.create=this.makeMethod("create"),this.editAddress=this.makeMethod("editAddress"),this.invite=this.makeMethod("invite"),this.removeUser=this.makeMethod("removeUser"),this.setOnboardingState=this.makeMethod("setOnboardingState"),this.validateCreation=this.makeMethod("validateCreation"),this.getMonetizationRules=this.makeMethod("getMonetizationRules"),this.registerAdblogger=this.makeMethod("registerAdblogger"),this.sendGptRequest=this.makeMethod("sendGptRequest"),this.getGptResult=this.makeMethod("getGptResult"),this.addChat=this.makeMethod("addChat"),this.getAddresses=this.makeMethod("getAddresses"),this.getGroupSettings=this.makeMethod("getGroupSettings"),this.getBidOrganizationList=this.makeMethod("getBidOrganizationList"),this.setBidLink=this.makeMethod("setBidLink"),this.getBusinessProfile=this.makeMethod("getBusinessProfile"),this.setGroupSettings=this.makeMethod("setGroupSettings")}}n=(0,a.__decorate)([c.scope.global()],n)},50790:(e,t,r)=>{r.d(t,{useIsMounted:()=>s});var a=r(296540);const s=()=>{const e=(0,a.useRef)(!1);return(0,a.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,a.useCallback)((()=>e.current),[])}},755812:(e,t,r)=>{r.d(t,{createGroupsEditFx:()=>o,createGroupsGetByIdFx:()=>s,createGroupsGetMembersFx:()=>d,createGroupsInviteFx:()=>u,createGroupsIsMemberFx:()=>i,createGroupsJoinFx:()=>c,createGroupsLeaveFx:()=>n,createGroupsRecallInvitationFx:()=>l});var a=r(412554);const s=e=>(0,a.createApiEffect)("groups.getById",e),c=e=>(0,a.createApiEffect)("groups.join",e),n=e=>(0,a.createApiEffect)("groups.leave",e),o=e=>(0,a.createApiEffect)("groups.edit",e),i=e=>(0,a.createApiEffect)("groups.isMember",e),u=e=>(0,a.createApiEffect)("groups.invite",e),l=e=>(0,a.createApiEffect)("groups.recallInvitation",e),d=e=>(0,a.createApiEffect)("groups.getMembers",e)},788057:(e,t,r)=>{r.d(t,{default:()=>a});const a={wrapper:"SearchInput__wrapper--HYEN8",wrapperWithPadding:"SearchInput__wrapperWithPadding--wBaMS",inputWrap:"SearchInput__inputWrap--Xetu6",input:"SearchInput__input--Lrwi7",clearButton:"SearchInput__clearButton--xU2nU",button:"SearchInput__button--fmsy5"}},874524:(e,t,r)=>{r.d(t,{default:()=>a});const a={app:"TopSearchRoot__app--nn41J",search:"TopSearchRoot__search--oyazg"}},706227:(e,t,r)=>{r.d(t,{default:()=>a});const a={app:"App__app--0d6ar",search:"App__search--Z5Pc9"}},432651:(e,t,r)=>{r.d(t,{default:()=>a});const a={root:"SearchResults__root--4ml3U",scroll:"SearchResults__scroll--G3w2I"}},136147:(e,t,r)=>{r.d(t,{default:()=>a});const a={spinner:"Spinner__spinner--WyHso"}}},o={};function __webpack_require__(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return n[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=n,e=[],__webpack_require__.O=(t,r,a,s)=>{if(!r){var c=1/0;for(u=0;u<e.length;u++){for(var[r,a,s]=e[u],n=!0,o=0;o<r.length;o++)(!1&s||c>=s)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](r[o])))?r.splice(o--,1):(n=!1,s<c&&(c=s));if(n){e.splice(u--,1);var i=a();void 0!==i&&(t=i)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,a,s]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var s=Object.create(null);__webpack_require__.r(s);var c={};t=t||[null,r({}),r([]),r(r)];for(var n=2&a&&e;"object"==typeof n&&!~t.indexOf(n);n=r(n))Object.getOwnPropertyNames(n).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,__webpack_require__.d(s,c),s},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>35782===e?"web/chunks/590c3317.async.106b7299.js":43316===e?"web/chunks/61b3672d.async.3c7c8265.js":80145===e?"web/chunks/2ab756d7.async.177061c7.js":58462===e?"web/chunks/6602413a.async.06896233.js":68938===e?"web/chunks/b1c5eabd.async.89e26e2c.js":20219===e?"web/chunks/4d85fe22.async.5a18fad8.js":8125===e?"web/chunks/90b4a8f8.async.4515aa60.js":51203===e?"web/chunks/miniAppsActionHandlers.f540b673.js":24639===e?"web/chunks/plugins_maps_mmrgl_script_chunk.76448c32.js":30685===e?"web/chunks/plugins_maps_mmrgl_style_chunk.440302d3.js":45458===e?"web/chunks/hls.10eb0a14.js":29884===e?"web/chunks/da84b8d2.async.56b02787.js":55736===e?"web/chunks/9416dc71.async.b1779d8d.js":56380===e?"web/chunks/8e574cd3.async.47d73056.js":37393===e?"web/chunks/0b869b3d.async.b2ee248b.js":65419===e?"web/chunks/8adfffcd.async.85830e77.js":46040===e?"web/chunks/34a9f527.async.ce6a98ff.js":44952===e?"web/chunks/56143671.async.42de387c.js":98271===e?"web/chunks/audio_web_globalPlayerImpl.d8da1ff7.js":30072===e?"web/chunks/showCaptchaPopup.590e73c2.js":19072===e?"web/chunks/left_menu_store.08375fe4.js":42255===e?"web/chunks/wikiModalExampleInitiator.6980f142.js":62203===e?"web/chunks/54a580c2.async.7d013393.js":56965===e?"web/chunks/stories_web_lib.236c4553.js":21953===e?"web/chunks/3a900eb4.async.0de5d7c4.js":42943===e?"web/chunks/video_web_lib.4c8dc45e.js":53927===e?"web/chunks/questions_boxes_web.1cc14edd.js":63148===e?"web/chunks/4db16ae6.async.d2267bdc.js":74336===e?"web/chunks/show_audio_playlist.4a974249.js":96158===e?"web/chunks/495c0275.async.74e6d07d.js":89626===e?"web/chunks/4e4648ce.async.9d56bc0b.js":75220===e?"web/chunks/616039fb.async.f6f5bae3.js":31661===e?"web/chunks/bf526a95.async.97084565.js":17895===e?"web/chunks/money_transfer_box.ad266d45.js":50905===e?"web/chunks/money_transfer.44e8c3f9.js":6827===e?"web/chunks/podcasts_web.45451b44.js":99500===e?"web/chunks/8141264e.async.ec898b72.js":81187===e?"web/chunks/8eeec1d5.async.55951ccb.js":2166===e?"web/chunks/showDonutSubscriptionModal.fe8042fe.js":7790===e?"web/chunks/20ebbd8f.async.8f88ed17.js":96859===e?"web/chunks/f76e7452.async.4587a1da.js":32758===e?"web/chunks/1fe42263.async.de7416ed.js":19129===e?"web/chunks/5f042a86.async.d1502b05.js":84835===e?"web/chunks/unauth_action_box.29fc715f.js":6086===e?"web/chunks/MiniAppsLifecycle.12e22545.js":59886===e?"web/chunks/StoryPublisherV2.d85eddd0.js":29311===e?"web/chunks/feed-client-nav-skeleton.6d469fc5.js":56091===e?"web/chunks/feed-client-nav-async-right-block.3c3bff7f.js":88651===e?"web/chunks/bookmarkClipPost.44b535ee.js":1715===e?"web/chunks/AudioLongtapModal.32ad1109.js":75121===e?"web/chunks/75b8349d.async.0bd4a145.js":26101===e?"web/chunks/030d00cf.async.38a880a1.js":75908===e?"web/chunks/6016368a.async.8570ffab.js":33641===e?"web/chunks/audio_modals_MusicTrackList.c138a0eb.js":51713===e?"web/chunks/voice_message_player.cd9ac644.js":9925===e?"web/chunks/speech.b26566c3.js":13654===e?"web/chunks/6821e80a.async.11ec412e.js":79934===e?"web/chunks/e4ca2309.async.673d139f.js":51943===e?"web/chunks/VideoUpload.60ca6db9.js":73214===e?"web/chunks/SilentModeForms.d3ccbf4d.js":71208===e?"web/chunks/6aa524d2.async.7378fdbe.js":2153===e?"web/chunks/8c58bd68.async.56c498d4.js":43451===e?"web/chunks/MiniAppService_MiniApp.7ee10eb6.js":12334===e?"web/chunks/stories-perf-metrics.b8260e38.js":31095===e?"web/chunks/PodcastEpisodeModal.ef9f8cc3.js":35577===e?"web/chunks/CommunityPage_SimilarGroups.74873640.js":17148===e?"web/chunks/CommunityPage_DonutBanner.7cf4aa45.js":74633===e?"web/chunks/CommunityPage_GoalsOnboarding.74e50200.js":85386===e?"web/chunks/donut_modals.6dec8344.js":43162===e?"web/chunks/framer-motion-entrypoint.9763fedf.js":42135===e?"web/chunks/7af1c156.async.33d28229.js":77808===e?"web/chunks/fa888068.async.6b2cc28b.js":69096===e?"web/chunks/fb38e3a3.async.935e9e75.js":10504===e?"web/chunks/StoriesCreatorVKApp.4ef90c60.js":54833===e?"web/chunks/performance-stats.18a136f6.js":9635===e?"web/chunks/9635.f04f4968.js":6261===e?"web/chunks/73e333ce.async.03ce20e8.js":98758===e?"web/chunks/46086065.async.6bfa82c3.js":71881===e?"web/chunks/cd65e2f9.async.7557dd55.js":99454===e?"web/chunks/34fe94d6.async.e77b64f8.js":30821===e?"web/chunks/story_blocks_next.380c5cb5.js":32643===e?"web/chunks/story_blocks.f29a263b.js":99370===e?"web/chunks/VideoEditorModal.788b8bd9.js":95805===e?"web/chunks/PublishClipToVideoModal.d2ba5083.js":99473===e?"web/chunks/3b5cde2d.async.d79d8e7b.js":73509===e?"web/chunks/sharedVideoUploadState.088336bc.js":91906===e?"web/chunks/VideoUploadModal.a63825d3.js":74205===e?"web/chunks/VideoExternalUploadModal.74967ae2.js":64676===e?"web/chunks/85a52a67.async.de3e61f8.js":36637===e?"web/chunks/ClipUploadModal.90ed8a4e.js":18493===e?"web/chunks/AddClipToVideoBlock.18d07b93.js":40953===e?"web/chunks/AddClipToVideoModal.c679b8b2.js":60274===e?"web/chunks/ClipPlayerModule.3cc6cb92.js":16848===e?"chunks/"+e+".a28d05cd.js":77955===e?"chunks/"+e+".ec1e24e1.js":75477===e?"chunks/"+e+".35e91db5.js":30420===e?"chunks/"+e+".edc96122.js":"web/chunks/videoplayer-interactive.5f2096ae.js",__webpack_require__.miniCssF=e=>51203===e?"web/chunks/3c37af5a.css":30685===e?"web/chunks/34230933.css":{98271:1,74336:1,17895:1,50905:1,6827:1}[e]?"web/chunks/722c5109.css":30072===e?"web/chunks/7040c834.css":2166===e?"web/chunks/388b24b1.css":59886===e?"web/chunks/962b64d7.css":1715===e?"web/chunks/b5fdd079.css":51943===e?"web/chunks/c0f840a7.css":73214===e?"web/chunks/4e008d9c.css":43451===e?"web/chunks/f2caa61f.css":35577===e?"web/chunks/d4bf59ea.css":17148===e?"web/chunks/61832f08.css":85386===e?"web/chunks/b80fe0f8.css":10504===e?"web/chunks/f0489d21.css":30821===e?"web/chunks/d2608c6d.css":32643===e?"web/chunks/076c8fc1.css":99370===e?"web/chunks/81bb4148.css":95805===e?"web/chunks/257e4f7b.css":73509===e?"web/chunks/49e4b942.css":{91906:1,74205:1}[e]?"web/chunks/c0ad2cfd.css":36637===e?"web/chunks/0569ccda.css":18493===e?"web/chunks/798f0393.css":40953===e?"web/chunks/0592332f.css":60274===e?"web/chunks/0e5005d9.css":void 0,__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},__webpack_require__.l=(e,t,r,s)=>{if(a[e])a[e].push(t);else{var c,n;if(void 0!==r)for(var o=document.getElementsByTagName("script"),i=0;i<o.length;i++){var u=o[i];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")=="vk:"+r){c=u;break}}c||(n=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,__webpack_require__.nc&&c.setAttribute("nonce",__webpack_require__.nc),c.setAttribute("data-webpack","vk:"+r),c.src=e),a[e]=[t];var l=(t,r)=>{c.onerror=c.onload=null,clearTimeout(d);var s=a[e];if(delete a[e],c.parentNode&&c.parentNode.removeChild(c),s&&s.forEach((e=>e(r))),t)return t(r)},d=setTimeout(l.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=l.bind(null,c.onerror),c.onload=l.bind(null,c.onload),n&&document.head.appendChild(c)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",s=e=>new Promise(((t,r)=>{var a=__webpack_require__.miniCssF(e),s=__webpack_require__.p+a;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var s=(n=r[a]).getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(s===e||s===t))return n}var c=document.getElementsByTagName("style");for(a=0;a<c.length;a++){var n;if((s=(n=c[a]).getAttribute("data-href"))===e||s===t)return n}})(a,s))return t();((e,t,r,a)=>{var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.onerror=s.onload=c=>{if(s.onerror=s.onload=null,"load"===c.type)r();else{var n=c&&("load"===c.type?"missing":c.type),o=c&&c.target&&c.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.type=n,i.request=o,s.parentNode.removeChild(s),a(i)}},s.href=t,document.head.appendChild(s)})(e,s,t,r)})),c={7122:0},__webpack_require__.f.miniCss=(e,t)=>{c[e]?t.push(c[e]):0!==c[e]&&{1715:1,2166:1,6827:1,10504:1,17148:1,17895:1,18493:1,30072:1,30685:1,30821:1,32643:1,35577:1,36637:1,40953:1,43451:1,50905:1,51203:1,51943:1,59886:1,60274:1,73214:1,73509:1,74205:1,74336:1,85386:1,91906:1,95805:1,98271:1,99370:1}[e]&&t.push(c[e]=s(e).then((()=>{c[e]=0}),(t=>{throw delete c[e],t})))},(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={7122:0};__webpack_require__.f.j=(t,r)=>{var a=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else if(73509!=t){var s=new Promise(((r,s)=>a=e[t]=[r,s]));r.push(a[2]=s);var c=__webpack_require__.p+__webpack_require__.u(t),n=new Error;__webpack_require__.l(c,(r=>{if(__webpack_require__.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=r&&("load"===r.type?"missing":r.type),c=r&&r.target&&r.target.src;n.message="Loading chunk "+t+" failed.\n("+s+": "+c+")",n.name="ChunkLoadError",n.type=s,n.request=c,a[1](n)}}),"chunk-"+t,t)}else e[t]=0},__webpack_require__.O.j=t=>0===e[t];var t=(t,r)=>{var a,s,[c,n,o]=r,i=0;if(c.some((t=>0!==e[t]))){for(a in n)__webpack_require__.o(n,a)&&(__webpack_require__.m[a]=n[a]);if(o)var u=o(__webpack_require__)}for(t&&t(r);i<c.length;i++)s=c[i],__webpack_require__.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return __webpack_require__.O(u)},r=self.webpackChunkvkweb=self.webpackChunkvkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=__webpack_require__.O(void 0,[91498,89631,50560,85172,762,21529,79210,63616,81765,23592,53877],(()=>__webpack_require__(194723)));i=__webpack_require__.O(i)})();