(()=>{var e,t,n,s,o,i,a={962444:e=>{e.exports={reactions_preview_item:'<div class="ReactionsPreviewItem ReactionsPreviewItem--stackOverlay %class%" style="background-image: url(\'%image_url%\');" aria-label="%title%"></div>'}},948179:(e,t,n)=>{"use strict";n.d(t,{AdsEvents:()=>g});var s=n(957994),o=n(740342),i=n(754866),a=n(120517),r=n(392358),c=n(936241),u=n(983567),l=n(909436),d=n(374339);let p=[];const h=(0,o.debounce)((()=>{if(0===p.length)return;const e=p.splice(0,p.length);(0,s.api)("adsint.registerAdEvents",{events:JSON.stringify(e)}).catch((t=>{for(;e.length;)p.unshift(e.pop())}))}),1e3);const g={register:(e,t)=>{(e=>["like","unlike","share","music_pause","music_play","music_track_to_profile","music_playlist_to_profile","music_track_share","music_playlist_share","music_track_share_to_story","music_playlist_share_to_story","music_play_30s"].includes(e))(e)&&(e=>!!e)(t)&&(p.push({event_type:e,ad_data:t}),h())},handleShareEvent:(e,t,n)=>{const s=e&&(0,d.getAdAttribute)(e,"ad");if(!s||!t)return null;let o="share";0===t.indexOf("audio")&&(window.Wall&&Wall.triggerAdStat(e,"audio_click"),0===t.indexOf("audio_playlist")?o=2==n?"music_playlist_share_to_story":"music_playlist_share":0===t.indexOf("audio")&&(o=2==n?"music_track_share_to_story":"music_track_share")),g.register(o,s)}};(0,a.onDomReady)((()=>{const e="adsEvents",t=(0,u.getAudioPlayer)();if(!t||t.subscribers&&t.subscribers.filter((t=>t.context===e)).length>0)return;const n={[r.AudioPlayerEventType.PLAY]:"music_play",[r.AudioPlayerEventType.PAUSE]:"music_pause",[r.AudioPlayerEventType.MUSIC_AUDIOS_ADD]:"music_track_to_profile",[r.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD]:"music_playlist_to_profile",[r.AudioPlayerEventType.PROGRESS]:"music_play_30s"},s=e=>{if(n[e]){const s=l.AudioUtils.audioTupleToAudioObject(t.getCurrentAudio());let o=s?document.querySelector("._audio_row_"+s.fullId+"."+l.AudioUtils.AUDIO_CURRENT_CLS):null;o||(o=function(e){const t="[data-attach-type='"+(e.album?c.ATTACH_TYPE.PLAYLIST:c.ATTACH_TYPE.AUDIO)+"']",n=e.album?"[data-owner-id='"+e.album[0]+"'][data-playlist-id='"+e.album[1]+"']":"[data-full-id='"+e.fullId+"']";return document.querySelector(".js-SecondaryAttachment"+t+n)}(s));const a=(0,i.domClosest)("post",o);let r=a&&(0,d.getAdAttribute)(a,"ad");r||(r=(e=>{if(!e)return null;const t=0===e.indexOf("feed:")?e.replace("feed:","post"):null,n=t&&document.getElementById(t);return n&&(0,d.getAdAttribute)(n,"ad")})(t._getPlayingContext())),r&&(window.Wall&&Wall.triggerAdStat(a,"audio_click"),g.register(n[e],r))}};let o=!1;t.on(e,r.AudioPlayerEventType.PLAY,(()=>s(r.AudioPlayerEventType.PLAY))),t.on(e,r.AudioPlayerEventType.PAUSE,(()=>s(r.AudioPlayerEventType.PAUSE))),t.on(e,r.AudioPlayerEventType.MUSIC_AUDIOS_ADD,(()=>s(r.AudioPlayerEventType.MUSIC_AUDIOS_ADD))),t.on(e,r.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD,(()=>s(r.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD))),t.on(e,r.AudioPlayerEventType.PROGRESS,(()=>{const e=t.getListenedTime();void 0!==e&&(e<30?o=!1:o||e>=30&&(o=!0,s(r.AudioPlayerEventType.PROGRESS)))}))}))},936241:(e,t,n)=>{"use strict";var s,o;n.d(t,{ATTACH_TYPE:()=>o,AttachPlayerEvents:()=>s}),function(e){e.PLAY="attach-player-event-play"}(s||(s={})),function(e){e.PLAYLIST="secondary-attach-playlist",e.AUDIO="secondary-attach-audio"}(o||(o={}))},869727:(e,t,n)=>{"use strict";n.d(t,{useEventListenerOnRef:()=>o});var s=n(296540);const o=(e,t,n)=>{(0,s.useLayoutEffect)((()=>{const{current:s}=e;if(s)return s.addEventListener(t,n,{passive:!0}),()=>{s.removeEventListener(t,n)}}),[e.current])}},818847:(e,t,n)=>{"use strict";n.d(t,{useOnClickOutside:()=>o});var s=n(296540);const o=(e,t,n=!0)=>{(0,s.useEffect)((()=>{if(!n)return;const s=n=>{!e.current||n.target instanceof Node&&e.current.contains(n.target)||t(n)};return document.addEventListener("mousedown",s,{passive:!0}),document.addEventListener("touchstart",s,{passive:!0}),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s)}}),[e,t,n])}},461506:(e,t,n)=>{"use strict";n.d(t,{preservePositionBetween:()=>i});var s=n(581197),o=n(8520);function i(e,{scrollByImpl:t=window.scrollBy}={}){let n=e;return{start:(0,o.once)((function(e){e&&(n=e);const i=(0,s.getElementOffset)(n);return(0,o.once)((function(e){if(e&&(n=e),n.isConnected){const e=(0,s.getElementOffset)(n);t(0,e.top-i.top)}}))}))}}},554731:(e,t,n)=>{"use strict";n.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>s,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>l,REACTION_ID_DEFAULT:()=>i,REACTION_ID_MAX:()=>a,REACTION_ID_MIN:()=>r,REACTION_ID_UNSET:()=>c,REACTION_SET_ITEMS_MIN_COUNT:()=>u,SHOW_TOOLTIP_TIMEOUT:()=>o});const s=600,o=140,i=0,a=7,r=0,c=void 0,u=2,l=i},16675:(e,t,n)=>{"use strict";n.d(t,{makePendingRequestState:()=>s});const s=(e={})=>{const t=Object.create(null);return{cancel:e=>{const n=t[e];n?.abort(),delete t[e]},register:(n,s)=>{const o=t[n],i=(e=>void 0!==t[e]?.throttleTimerId)(n);if(o){if(i)return!1;console.warn(`Reactions pending request for key '${n}' wasn't unregistered, but has to be overwritten.\nPending request should be cancelled through .cancel() explicitly before .register()`),o.abort()}let a;t[n]={abort:s},void 0!==e?.throttleMs&&(a=((e,n)=>{const s=t[e];if(!s)return;s.throttleTimerId&&window.clearTimeout(s.throttleTimerId);const o=window.setTimeout((()=>{const n=t[e];n&&(n.throttleTimerId=void 0)}),n);return s.throttleTimerId=o,o})(n,e.throttleMs));return()=>{t[n]?.abort===s&&delete t[n],window.clearTimeout(a)}}}}},668275:(e,t,n)=>{"use strict";n.d(t,{isDebugEnabled:()=>i});var s=n(469004);let o;const i=()=>(void 0!==o||(o=!!s.ls.get("reactions.debug_enabled")),o)},888065:(e,t,n)=>{"use strict";n.d(t,{reactionCountsBrandUnwrap:()=>o,reactionCountsBrandWrap:()=>i});var s=n(672330);const o=e=>(0,s.unwrap)(e),i=e=>(0,s.wrap)(e)},295673:(e,t,n)=>{"use strict";n.d(t,{reactionLogError:()=>i});var s=n(298077);const o="reactions";function i({error:e,reportError:t=!1}){t&&(0,s.logError)(e,{environment:o}),console.error(e)}},369296:(e,t,n)=>{"use strict";n.d(t,{areCountersEqual:()=>E,calcCounters:()=>w,calcCountersSum:()=>C,calcCountersWeightedSum:()=>k,counterForReactionId:()=>y,getDefaultReaction:()=>u,getDefaultReactionTitle:()=>l,getReaction:()=>c,hasReactionsForCounts:()=>R,isReactionIdSet:()=>h,isReactionIdUnset:()=>g,isUnknownObject:()=>r,isValidReactionId:()=>_,parseReactionId:()=>m,parseReactionIdOrUnset:()=>f,parseReactionMenuConfig:()=>v,prepareReactionMenuSet:()=>p,validateReactionSetPayloaditems:()=>b});var s=n(554731),o=n(888065),i=n(8520);const a=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e),r=e=>null!==e&&"object"==typeof e,c=(e,t)=>e.itemsById[t],u=e=>c(e,s.REACTION_ID_DEFAULT),l=e=>u(e)?.title,d=(e,t)=>0===e.length?"":((e,t,n=!0)=>e.reduce(((e,s)=>{const o=t(s),i=t(e);return i===o?n?e:s:i<o?e:s})))(e,(e=>(t.width-e.width)**2+(t.height-e.height)**2),!1).url,p=(e,t,n)=>{const s=t.map((({asset:e,color_sets:t,id:s,score:o,title:i})=>({animationURL:e.animation_url||void 0,backgroundColor:t?.background,id:s,imageMenuURL:d(e.images,n.imageMenuSize),imagePreviewURL:"imagePreviewSize"in n?d(e.images,n.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in n?d(e.images,n.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in n?d(e.images,n.imageStoryPreviewSize):void 0,score:o,title:i,titleColor:t?.foreground}))),o={};return s.forEach((e=>{o[e.id]=e})),{id:e,items:s,itemsById:o}},h=e=>e!==s.REACTION_ID_UNSET,g=e=>e===s.REACTION_ID_UNSET,_=e=>a(e)&&e>=s.REACTION_ID_MIN&&e<=s.REACTION_ID_MAX,m=e=>{const t=parseInt(e,10);return _(t)?{isValid:!0,value:t}:{isValid:!1}},f=e=>{const t=m(e);return t.isValid?t.value:s.REACTION_ID_UNSET},b=(e,t)=>{if(e.length<s.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error(`Invalid reactions items count in set '${t}': ${e.length}`)}},v=e=>{if(!r(e))return;const t={},{animationShowStaticAfterEnd:n,menuShowDelay:o,openedDefaultReactionId:i,reportJsErrors:a}=e;return"number"!=typeof o&&void 0!==o||(t.menuShowDelay=o),"boolean"==typeof n&&(t.animationShowStaticAfterEnd=n),"boolean"==typeof a&&(t.reportJsErrors=a),"number"==typeof i||null===i?null===i?t.openedDefaultReactionId=void 0:_(i)&&(t.openedDefaultReactionId=i):t.openedDefaultReactionId=s.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t},w=(e,t)=>{const n=(0,o.reactionCountsBrandWrap)({});return Object.entries((0,o.reactionCountsBrandUnwrap)(e)).forEach((([e,s])=>{const o=e,i=t?.itemsById?.[o]?.score??1;n[o]=i*(s||0)})),n},C=e=>Object.values((0,o.reactionCountsBrandUnwrap)(e)).reduce(((e,t)=>e+(t||0)),0),k=e=>C((0,o.reactionCountsBrandWrap)(e)),R=e=>C(e)>0,y=(e,t)=>e[t]??void 0,E=(e,t)=>e&&t?(0,i.isEqual)(e,t):e===t},672330:(e,t,n)=>{"use strict";n.d(t,{unwrap:()=>s,wrap:()=>o});const s=e=>e,o=e=>e},719358:(e,t,n)=>{"use strict";n.d(t,{getUserFullName:()=>s});const s=e=>{const{first_name:t,last_name:n}=e;return`${t} ${n}`}},897004:(e,t,n)=>{"use strict";n.d(t,{isBadgesEnabled:()=>o,isBadgesRenderingEnabled:()=>i});var s=n(540462);const o=()=>(0,s.partConfigEnabled)("badges"),i=()=>(0,s.partConfigEnabled)("badges_rendering")},164713:(e,t,n)=>{"use strict";var s=n(636576),o=n(807442);window.vk?.stDomain&&(n.p=window.vk.stDomain+"/dist/"),window.Reactions=o.ReactionsEntryGlobal,(0,o.init)(),requestIdleCallback((()=>{try{(0,s.statlogsValueEvent)("entries_requests",1,"reactions","web")}catch{}}),{timeout:5e3});try{stManager?.done(partConfigEnabled("web_static_manager_done_with_hash")?"dist/web/reactions.e930fc09.js":"dist/web/reactions.js")}catch(e){}},753304:(e,t,n)=>{"use strict";n.d(t,{stripPercentVars:()=>s});const s=e=>e.replace(/%[-\w]+%/g,"")},839941:(e,t,n)=>{"use strict";n.d(t,{BadgesEntrypointSkeleton:()=>a});var s=n(474848),o=n(157643),i=n(315777);const a=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Separator,{}),(0,s.jsx)(o.Skeleton,{circle:!0,width:36,height:36})]})},315777:(e,t,n)=>{"use strict";n.d(t,{Separator:()=>i});var s=n(474848),o=n(56792);const i=()=>(0,s.jsx)("div",{className:o.default.separatorWrapper,children:(0,s.jsx)("div",{className:o.default.separator})})},36204:(e,t,n)=>{"use strict";n.d(t,{LazyBadgesEntryPoint:()=>c});var s=n(474848),o=n(296540),i=n(725669),a=n(839941);const r=(0,i.asyncComponent)((()=>Promise.all([n.e(35782),n.e(97189)]).then(n.bind(n,483092))),(({BadgesEntrypoint:e})=>e)),c=e=>(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(a.BadgesEntrypointSkeleton,{}),children:(0,s.jsx)(r,{...e})})},978265:(e,t,n)=>{"use strict";n.d(t,{ATTR_USER_REACTION_ID:()=>s});const s="data-reaction-user-reaction-id"},536418:(e,t,n)=>{"use strict";n.d(t,{getLastOwnReactionChangeTime:()=>y,setDataCurrentId:()=>E,updateReactionButtonContainerForCounts:()=>C,updateReactionButtonCounts:()=>R,updateReactionButtonForCurrentReaction:()=>k});var s=n(535130),o=n(898848),i=(n(581197),n(866467)),a=n(668275),r=n(369296),c=n(754866),u=n(939646),l=n(978265),d=n(525474),p=n(797596),h=n(66663);const g="data-reaction-last-own-change-time",_="PostButtonReactions__icon--animationActive";const m="post_button";s.LottieManager.observer.ignoreGroup(m);const f=e=>{const t=e.__reactionIconAnimation?.player;t&&(t.destroy(),delete e.__reactionIconAnimation)},b=async(e,t,n,o)=>{if(!(e!==n.__reactionIconAnimation?.animationURL)&&e||(f(n),t.innerHTML="",n.classList.remove(_)),o&&e)try{const o=await s.LottieManager.loadAnimation({group:m,animationUrl:e,containers:[t],loop:!1,autoplay:!0});if(!o)return;o.addEventListener("firstFrame",(()=>{n.classList.add(_)})),o.addEventListener("loopComplete",(()=>{(function(){const e=(0,h.getReactionConfig)();return!0===e?.animationShowStaticAfterEnd})()&&(n.classList.remove(_),f(n))})),n.__reactionIconAnimation={player:o,animationURL:e}}catch{}},v=(e,t)=>{const n=e.querySelector('[data-section-ref="reactions-button-icon"]');if(!n)return;const{currentOption:s,isUserAction:o}=t;if(s.isReactionSet){const e=s.current,t=e?.imageMenuURL;n.style.backgroundImage=`url('${t}')`,n.setAttribute("aria-label",e?.title)}else{const e=s.default;n.style.backgroundImage="",e?.title&&n.setAttribute("aria-label",e?.title)}n.classList.toggle("PostButtonReactions__icon--custom",s.isReactionSet);{const e=s.isReactionSet?s.current.animationURL:void 0,t=(e=>{let t=e.querySelector(".PostButtonReactions__iconAnimation");return t||(t=(0,c.se)('<div class="PostButtonReactions__iconAnimation" data-section-ref="reactions-button-icon-animation"></div>'),e.appendChild(t),t)})(n);b(e,t,n,o)}},w=(e,t,n)=>{e.classList.toggle("PostButtonReactions--icon-active",t),e.classList.toggle("PostButtonReactions--active",t)},C=(e,t)=>{const n=!t||!(0,r.hasReactionsForCounts)(t);e.classList.toggle("PostBottomAction--empty",n)},k=(e,t,n,s)=>{const o=!(0,r.isReactionIdUnset)(t),c=((e,t)=>{let n,s=(0,r.getDefaultReaction)(e);if((0,r.isReactionIdUnset)(t)){if(s)return{isReactionSet:!1,default:s}}else{if(n=e.itemsById[t],n)return{isReactionSet:!0,current:n};console.error(new Error(`Missing reaction meta for ${t} in set '${e.id}'`))}return{_error:!0}})(n,t);"_error"in c||(v(e,{currentOption:c,isUserAction:s}),((e,t)=>{const{currentOption:n}=t,s=n.isReactionSet?n.current.titleColor:void 0,o=n.isReactionSet?n.current.backgroundColor:void 0,i={...s?{"--reaction-button-title-color-light":s.light,"--reaction-button-title-color-dark":s.dark}:{"--reaction-button-title-color-light":null,"--reaction-button-title-color-dark":null},...o?{"--reaction-button-background-color-light":o.light,"--reaction-button-background-color-dark":o.dark}:{"--reaction-button-background-color-light":null,"--reaction-button-background-color-dark":null}};Object.entries(i).forEach((([t,n])=>{e.style.setProperty(t,n)}))})(e,{currentOption:c}),((e,t)=>{const{currentOption:n}=t;let s="";s=n.isReactionSet?(0,i.langReplace)(i.getLang("reactions_button_unset_reaction_title")||"",{reaction_name:n.current.title||""}):(0,i.langReplace)(i.getLang("reactions_button_set_reaction_with_name")||"",{reaction_name:n.default.title||""})||i.getLang("reactions_button_title")||"",e.setAttribute("aria-label",s||"")})(e,{currentOption:c}),(0,d.isCounterEnabledForBtn)(e)||((e,t)=>{const n=e.querySelector('[data-section-ref="reactions-button-title"]');if(!n)return;const{currentOption:s}=t,o=s.isReactionSet?s.current.title:s.default.title;o?n.innerText=o:(0,a.isDebugEnabled)()&&console.log("reactions: setReactionNameTitle: missing title",s)})(e,{currentOption:c})),w(e,o),s&&function(e,t){e.setAttribute(g,String(t))}(e,Date.now())},R=(e,t,n,s,o)=>{const c=(0,d.getCounterForTitle)(e,t,s,o);if((0,d.isCounterEnabled)(c)&&(((e,t)=>{const n=e.querySelector('[data-section-ref="reactions-button-title"]');if(!n)return;const{counterForTitle:s}=t;if((0,d.isCounterAvailable)(s)){const e=s.buttonText;(0,u.animateCount)(n,e,{allowZero:s.allowZeroAnimation,str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0})}else(0,a.isDebugEnabled)()&&console.log("reactions: setReactionTitle: missing title",s)})(e,{counterForTitle:c}),s)){((e,t)=>{const n=(0,p.getClosestLikeBtnContainerElem)(e)?.querySelector('[data-section-ref="reactions-button-screen-reader-counter"]');if(!n)return;const s=(0,i.langNumeric)(t,i.getLang("reactions_n_reacted","raw")||"%s");n.innerText=s})(e,(0,r.calcCountersSum)(s))}},y=e=>{const t=e.getAttribute(g);if(t&&(0,o.isNumeric)(t))try{return new Date(Number.parseInt(t)).getTime()||void 0}catch(e){return void console.error(e)}};const E=(e,t)=>{e.setAttribute(l.ATTR_USER_REACTION_ID,(0,r.isReactionIdUnset)(t)?"":String(t))}},686426:(e,t,n)=>{"use strict";n.d(t,{ReactionImage:()=>r});var s=n(474848),o=n(296540),i=n(8520),a=n(812153);const r=(0,o.forwardRef)((({animationURL:e,isPlaying:t,image:n,loadAnimationParams:o},r)=>{const{lottieRendered:c,lottieContainerRef:u}=(0,a.useLottie)({group:"reaction_image",animationUrl:e,...o},{play:t}),l=c&&t;return(0,s.jsx)("div",{className:"ReactionImage",style:{backgroundImage:!l&&n?`url(${n})`:void 0},ref:r,children:(0,s.jsx)("div",{className:(0,i.classNames)("ReactionImage__animationContainer",{"ReactionImage__animationContainer--hidden":!l}),ref:u})})}))},196790:(e,t,n)=>{"use strict";n.d(t,{PreloadImages:()=>i});var s=n(574959),o=n(296540);const i=(0,o.memo)((function({imageURLs:e}){return(0,o.useEffect)((()=>{Promise.all(e.map((e=>(0,s.preloadImage)(e)))).catch((()=>{}))}),[e]),null}))},399933:(e,t,n)=>{"use strict";n.d(t,{ReactedUsersStack:()=>r,stackConfigForVisibleCount:()=>c,userPhotoStub:()=>a});var s=n(474848),o=n(8520),i=n(593159);const a={kind:"stub"};function r({photos:e,size:t,totalCount:n,visibleCount:a}){const r=n??e.length;let c=Math.min(e.length,a);r===c+1&&e.length>=c+1&&(c+=1);let u=Math.max(0,r-c),l=u>0;const d=e.slice(0,c),p=(0,i.formatCount)(u);return(0,s.jsx)("div",{className:(0,o.classNames)("ReactedUsersStack",`ReactedUsersStack--size-${t}`,{"ReactedUsersStack--others":l}),children:(0,s.jsxs)("div",{className:"ReactedUsersStack__photos",role:"presentation",children:[d.map(((e,t)=>function(e){return"profile"===e.kind}(e)?(0,s.jsx)("div",{className:"ReactedUsersStack__photo",role:"img",style:{backgroundImage:`url(${e.imageURL})`},title:e.title},t):function(e){return"stub"===e.kind}(e)?(0,s.jsx)("div",{role:"img",className:"ReactedUsersStack__photo ReactedUsersStack__photo--stub"},t):null)),l&&(0,s.jsx)("div",{className:"ReactedUsersStack__photo ReactedUsersStack__photo--others","aria-hidden":"true",dangerouslySetInnerHTML:{__html:`+${p}`}})]})})}function c(e){const t=e+1;return{maxStackItems:t,visibleCount:e,stubItemsForPhotos:e=>Math.min(e,t)}}},580262:(e,t,n)=>{"use strict";n.d(t,{Reaction:()=>u});var s=n(474848),o=n(972332),i=n(8520),a=n(288726),r=n(878786),c=n(686426);const u=({animationURL:e,image:t,isOpenedDefault:n,onMouseEnter:u,onReactionClick:l,reactionId:d,reactionTitle:p})=>{const h=(0,r.useReactedUsersConfig)(d),g=()=>{l?.(d)};return(0,s.jsxs)("div",{className:(0,i.classNames)("Reaction",{"Reaction--openedDefault":n&&h.shouldShowReactedUsers}),onClick:e=>{g(),e.stopPropagation()},onKeyDown:e=>{[o.KEY.RETURN,o.KEY.SPACE].includes(e.keyCode)&&(g(),e.stopPropagation())},onMouseEnter:u,tabIndex:0,role:"button","aria-label":p||void 0,children:[(0,s.jsx)("div",{className:"Reaction__hoverArea"}),(0,s.jsx)("div",{className:"Reaction__title",children:(0,s.jsx)(a.ReactionTitle,{reactedUsersConfigResult:h,reactionId:d,title:p})}),(0,s.jsx)("div",{className:"Reaction__image",children:(0,s.jsx)(c.ReactionImage,{isPlaying:!0,image:t,animationURL:e})})]})}},373502:(e,t,n)=>{"use strict";n.d(t,{ReactionMenuTitleVariants:()=>i,TITLE_VARIANT_DEFAULT:()=>o,TitleVariantWithLikedUsers:()=>s});const s="WithLikedUsers",o=s,i=[s,"TitleOnly"]},288726:(e,t,n)=>{"use strict";n.d(t,{ReactionTitle:()=>r});var s=n(474848),o=n(296540),i=n(8520),a=n(359454);const r=({reactedUsersConfigResult:e,reactionId:t,title:n})=>{const r=(0,o.useRef)(null),{reactedUsersConfig:c,shouldShowReactedUsers:u}=e;return(0,s.jsxs)("div",{className:(0,i.classNames)("ReactionTitle",{"ReactionTitle--withUsers":u}),ref:r,children:[(0,s.jsx)("div",{className:"ReactionTitle__name",children:n}),(0,s.jsx)("div",{className:(0,i.classNames)({"ReactionTitle__reactedUsers--visible":u}),children:(0,s.jsx)(a.ReactionsMenuReactedUsersPreview,{parentClickContainerRef:r,reactedUsersConfig:c,reactionId:t})})]})}},528434:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenu:()=>f});var s=n(474848),o=n(296540),i=n(8520),a=n(972332),r=n(580262),c=n(361849),u=n(173277),l=n(284667),d=n(897004),p=n(36204),h=n(286751),g=n(220428),_=n(866317),m=n(540462);const f=(0,o.forwardRef)((function({close:e,currentReactionId:t,onReactionChoose:n,placement:f=c.PopoverVerticalPlacement.TOP,reactionsOptions:b,onMouseEnter:v,onMouseLeave:w,badgesProps:C,onCountersLineClick:k,reactionsElemPayloadCounts:R},y){const E=(0,u.useReactionMenuConfig)(),S=f===c.PopoverVerticalPlacement.TOP?E?.openedDefaultReactionId:void 0,[I,P]=(0,o.useState)(S),{reactedUsers:A}=(0,_.useReactionsMenuContext)(),j=(0,o.useCallback)((t=>{t.keyCode===a.KEY.ESC&&e?.()}),[]),L=(0,o.useCallback)((()=>{P(void 0)}),[]);if((0,m.partConfigEnabled)("feed_web_reactions_menu_vkui")){const t=b.items.map((e=>({id:e.id,title:e.title,asset:{animation_url:e.animationURL,images:[{url:e.imageMenuURL,width:0,height:0}]},score:e.score}))),o=R?Object.values(R).reduce(((e,t)=>e+t),0):0;let i=[],a=!1;"loading"===A.resource.kind&&(a=!0);const r=A.value?.byReactionId;r&&(i=Object.values(r).reduce(((e,t)=>t.users?e.concat(t.users):e),[]));const c=new Set;i=i.filter((e=>!c.has(e.ownerId)&&(c.add(e.ownerId),!0))),i.sort(((e,t)=>e.ownerId>t.ownerId?1:e.ownerId<t.ownerId?-1:0));const u=i.length>0?i.map((e=>e.ownerImageURL)):null;return(0,s.jsx)(g.DIRootWebProvider,{children:(0,s.jsx)(h.ReactionsMenu,{reactions:t,onReactionClick:n,isLoadingCountersLineData:a,likedUsersCount:o,reactedUsersPhotos:u,triggerClose:e,onCountersLineClick:k,onKeyDown:j,onMouseEnter:v,onMouseLeave:w})})}return(0,s.jsx)("div",{className:(0,i.classNames)("ReactionsMenu ReactionsMenu--extraHoverArea",{"ReactionsMenu--extraHoverAreaToTop":f===c.PopoverVerticalPlacement.TOP,"ReactionsMenu--extraHoverAreaToBottom":f===c.PopoverVerticalPlacement.BOTTOM}),onKeyDown:j,onMouseEnter:v,onMouseLeave:w,ref:y,children:(0,s.jsxs)("div",{className:"ReactionsMenu__inner",children:[b.items.map((e=>(0,s.jsx)(r.Reaction,{animationURL:e.animationURL,image:e.imageMenuURL,isOpenedDefault:e.id===I,isSelected:e.id===t,onMouseEnter:L,onReactionClick:n,reactionId:e.id,reactionTitle:e.title},e.id))),(0,d.isBadgesEnabled)()&&(0,l.verifyPayloadForBadges)(C)&&(0,s.jsx)(p.LazyBadgesEntryPoint,{onClick:e,badgesProps:C})]})})}))},866317:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuContextProvider:()=>c,useReactionsMenuContext:()=>r});var s=n(474848),o=n(296540),i=n(632232);const a=(0,o.createContext)({currentReactionId:void 0,likeObjectId:void 0,reactedUsers:i.REMOTE_RESOURCE_STATE_CONTEXT_STUB,reactedUsersCounts:void 0,titleVariant:void 0,triggerClose:()=>{}}),r=()=>(0,o.useContext)(a),c=({value:e,children:t})=>{const n=(0,i.useRemoteResource)();return(0,s.jsx)(a.Provider,{value:{...e,reactedUsers:n},children:t})}},359454:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuReactedUsersPreview:()=>d});var s=n(474848),o=n(296540),i=n(101965),a=n(399933),r=n(866317),c=n(869727),u=n(878786);const l="s";function d({parentClickContainerRef:e,reactionId:t,reactedUsersConfig:n}){const{likeObjectId:d,triggerClose:p}=(0,r.useReactionsMenuContext)(),h=(0,o.useCallback)((function(e){if(e.stopPropagation(),!d)throw new Error("ReactionTitle: unable to open reacted modal, missing object id");n?.hasSomeReactions&&(p(),(0,i.showReactedModal)(t,d))}),[]);return(0,c.useEventListenerOnRef)(e,"click",h),(0,s.jsx)("div",{className:"ReactionsMenuReactedUsersPreview",children:n&&n.userPhotos?(0,s.jsx)(a.ReactedUsersStack,{visibleCount:u.visibleCount,totalCount:n.totalPhotosCount,photos:n.userPhotos,size:l}):null})}},123066:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuStateContainer:()=>i});var s=n(474848),o=n(866317);const i=({children:e,contextValue:t})=>(0,s.jsx)(o.ReactionsMenuContextProvider,{value:t,children:e})},885048:(e,t,n)=>{"use strict";n.d(t,{getUsersForReactionId:()=>o,isTitleVariantWithUsers:()=>i});var s=n(373502);function o(e,t){const n=e.byReactionId?.[t];if(void 0!==n)return n}function i(e){return e===s.TitleVariantWithLikedUsers}},878786:(e,t,n)=>{"use strict";n.d(t,{useReactedUsersConfig:()=>d,visibleCount:()=>l});var s=n(866317),o=n(399933),i=n(778354),a=n(373502),r=n(885048),c=n(369296);const{stubItemsForPhotos:u,visibleCount:l}=(0,o.stackConfigForVisibleCount)(3);function d(e){const{currentReactionId:t,reactedUsers:{valueMaybeStale:n}}=(0,s.useReactionsMenuContext)(),l=function(e){const{titleVariant:t=a.TITLE_VARIANT_DEFAULT,reactedUsers:{valueMaybeStale:n},reactedUsersCounts:o}=(0,s.useReactionsMenuContext)();if(!(0,r.isTitleVariantWithUsers)(t))return;return function(e,t,n){const s=t?(0,r.getUsersForReactionId)(t,e):void 0;if(s)return{kind:"reacted_users",reactedUsersForReaction:s};const o=n?(0,c.counterForReactionId)(n,e):void 0;if(o&&o>0)return{kind:"count_only_stub",counter:o};return}(e,n,o)}(e);let d,h;if(l&&"reacted_users"===l.kind&&l.reactedUsersForReaction.users){let{reactedUsersForReaction:{users:s=[],totalCount:o}}=l;const a=(0,i.withCurrentUser)(s,o,e,t,n?.currentUser);o=a.totalCount,s=a.users,h=o??s.length,d=s.map(p)}else if(l&&function(e){return"count_only_stub"===e.kind}(l)){let s=l.counter;const a=(0,i.withCurrentUser)([],s,e,t,n?.currentUser);s=a.totalCount;const r=a.users;s&&(h=s,d=[...r.map(p),...Array.from({length:u(s)},(()=>o.userPhotoStub))])}else{const s=(0,i.withCurrentUserAddedOnly)(e,t,n?.currentUser);h=s.totalCount,d=s.users.map(p)}h=h??d?.length??0;const g=Boolean(h&&h>0);return g?{shouldShowReactedUsers:!0,reactedUsersConfig:{hasSomeReactions:g,totalPhotosCount:h,userPhotos:d}}:{shouldShowReactedUsers:!1,reactedUsersConfig:void 0}}function p(e){return{kind:"profile",imageURL:e.ownerImageURL,title:e.ownerName}}},778354:(e,t,n)=>{"use strict";n.d(t,{useReactedUsersPreview:()=>d,withCurrentUser:()=>g,withCurrentUserAddedOnly:()=>_});var s=n(369296),o=n(536382),i=n(927350),a=n(885048),r=n(866317),c=n(931040),u=n(296540),l=n(476428);function d({attemptRefetch:e}){const{likeObjectId:t,titleVariant:n,reactedUsers:s}=(0,r.useReactionsMenuContext)(),{counts:l}=(0,c.useReactionsGlobalStateForObject)(t,{payloadIsSuitable:p}),[d,g]=(0,u.useState)(!1);(0,u.useEffect)((()=>{l&&g(!0)}),[l]),(0,u.useEffect)((()=>{if(!t||!(0,a.isTitleVariantWithUsers)(n))return;e&&("initial"===s.resource.kind||"loading"!==s.resource.kind&&d)&&async function(){if(!t)return;d&&g(!1),s.setLoading(!0);const e=(0,o.requestGetReacted)(t);try{const t=function(e){const{reactedMenuStats:t}=e;if(!t)return;let n;const{byReactionId:s}=t;if(s){n={};for(const[e,t]of Object.entries(s))n[e]={totalCount:t.totalCount??void 0,users:t.users?.map((e=>h(e)))??void 0}}const o=t.currentUser?h(t.currentUser):t.currentUser;return{byReactionId:n,currentUser:o}}(await e.promise);if(!t){const e=new Error("useReactedUsersTooltip: failed to transform response");return(0,i.isDebugEnabled)()&&console.error(e),void s.setFailed(e)}s.setLoaded(t)}catch(e){s.setFailed(e)}}()}),[n,t,d,e])}function p(e){return"counts_only"===e.kind||!0===e.isQueueUpdate}function h(e){return{...e,ownerName:e.ownerName?(0,l.stringWithHTMLEntitiesDecode)(e.ownerName):void 0}}function g(e,t,n,o,i){const a=t??0,r=window.vk.id;if((0,s.isReactionIdSet)(o)&&o===n&&i){const t=function(e,t,n,s,o){if(!o)return;const{ownerImageURL:i,ownerName:a}=o;if(!i)return;if(n.find((t=>t.ownerId===e)))return;return{currentUser:{ownerId:e,ownerImageURL:i,ownerName:a},totalCount:s+1}}(r,0,e,a,i);if(t?.currentUser){const n={ownerId:t.currentUser.ownerId,ownerImageURL:t.currentUser.ownerImageURL,ownerName:t.currentUser.ownerName};return{totalCount:t.totalCount,users:[n].concat(e||[])}}}else if((0,s.isReactionIdUnset)(o)||o!==n){const t=function(e,t,n,s){const o=n&&n.filter((t=>t.ownerId!==e)),i=o&&n&&o.length<n.length;if(i)return{totalCount:i?s-1:s,users:o}}(r,0,e,a);if(t)return{totalCount:t.totalCount,users:t.users}}return{totalCount:a,users:e}}function _(e,t,n){return g([],0,e,t,n)}},30172:(e,t,n)=>{"use strict";n.d(t,{useReactionMenuSet:()=>i});var s=n(296540),o=n(66663);const i=e=>(0,s.useMemo)((()=>(0,o.getReactionSet)(e)),[e])},931040:(e,t,n)=>{"use strict";n.d(t,{useReactionsGlobalStateForObject:()=>c,useReactionsGlobalUpdateEventsForObject:()=>u});var s=n(296540),o=n(369296),i=n(903401),a=n(890332),r=n(574959);function c(e,{payloadIsSuitable:t}={}){const[n,i]=(0,s.useState)(void 0),a=(0,r.usePreviousRef)(n);return u(e,(0,s.useCallback)((function(e){t&&!t(e)||e.counts&&!(0,o.areCountersEqual)(e.counts,a.current??void 0)&&i(e.counts)}),[e])),{counts:n}}function u(e,t){!function({onAnyPostCountsAnyUpdate:e}){(0,s.useEffect)((()=>(0,i.registerNonGlobalNonUniqueListener)(i.WallDataEvents.post_reactions_counts_update,e)),[e])}({onAnyPostCountsAnyUpdate:(0,s.useCallback)((function(n){(0,a.likePostObjectId)(n.postFullId)===e&&t(n)}),[e])})}},632232:(e,t,n)=>{"use strict";n.d(t,{REMOTE_RESOURCE_STATE_CONTEXT_STUB:()=>i,useRemoteResource:()=>c});var s=n(296540);const o={kind:"initial"},i={valueMaybeStale:void 0,value:void 0,reset:()=>{},setFailed:()=>{},setLoaded:()=>{},setLoading:()=>{},resource:o};function a(e){if("value"in e&&void 0!==e.value)return e.value}function r(e){const t=a(e);return void 0!==t?t:"staleValue"in e&&void 0!==e.staleValue?e.staleValue:void 0}function c(){const[e,t]=(0,s.useState)(o);return{valueMaybeStale:r(e),value:a(e),resource:e,setFailed:(0,s.useCallback)(((e,n=!1)=>{t((t=>({kind:"failed",error:e,staleValue:n?r(t):void 0})))}),[]),setLoaded:(0,s.useCallback)((e=>{t({kind:"loaded",value:e})}),[]),setLoading:(0,s.useCallback)(((e=!1)=>{t((t=>({kind:"loading",staleValue:e?r(t):void 0})))}),[]),reset:(0,s.useCallback)((()=>{t((()=>o))}),[])}}},341234:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuButton:()=>m});var s=n(474848),o=n(296540),i=n(927350),a=n(173277),r=n(544801),c=n(196790),u=n(446106),l=n(528434),d=n(30172),p=n(896596),h=n(797596),g=n(123066),_=n(284667);const m=({objectId:e,onReactionChoose:t,reactionButtonContainerElem:n,reactionHiddenButtonContainerElem:m,reactionIdInitial:f,reactionSetId:b,reactionsCounts:v,styleVariant:w,triggerMouseenterOnInitial:C,titleVariant:k,onCountersLineClick:R})=>{const{isAllowedReenter:y,tooltipVisibility:E,triggerClose:S}=(0,r.useTooltipVisibility)(),[I,P]=(0,o.useState)(f);(0,o.useEffect)((()=>{const t=[(0,u.addReactionChooseListener)(e,(()=>{S()})),(0,u.addDataUpdateListener)(e,(e=>{P(e.currentReactionId)}))];return()=>{t.forEach((e=>{e()}))}}),[]);const A=(0,d.useReactionMenuSet)(b),j=(0,a.useReactionMenuConfig)(),L=(0,o.useMemo)((()=>A?.items.map((e=>e.imageMenuURL))??[]),[A?.id]);(0,o.useEffect)((()=>{A&&void 0!==I&&!A.items?.find((e=>e.id===I))&&console.warn(`Current reaction ID ${I} is not found in set '${b}'`)}),[A]);if(!A)return console.warn(`ReactionsMenuButton init error, unavailable reaction set: ${b}`),null;const T={close:S,currentReactionId:I,onReactionChoose:e=>{(S(),e!==I)&&t(e)},reactionsOptions:A,badgesProps:(0,_.reactionsElemPayloadForBadges)(n),onCountersLineClick:R,reactionsElemPayloadCounts:(0,_.reactionsElemPayload)(n)?.counts},M={currentReactionId:I,likeObjectId:e,reactedUsersCounts:v,titleVariant:k,triggerClose:S};return(0,s.jsxs)(g.ReactionsMenuStateContainer,{contextValue:M,children:[(0,s.jsx)(p.ReactionsMenuTooltip,{delayShow:j?.menuShowDelay,getAttachElem:e=>{if(!e)return;const t=(0,h.getClosestLikeBtnContainerElem)(e);return t||(0,i.isDebugEnabled)()&&console.warn("ReactionsMenuButton missing attach target:",e),t},isAllowedReenter:y,popup:l.ReactionsMenu,popupProps:T,reactionButtonContainer:n,reactionHiddenButtonContainer:m,styleVariant:w,triggerMouseenterOnInitial:C,visibility:E}),(0,s.jsx)(c.PreloadImages,{imageURLs:L})]})}},896596:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuTooltip:()=>h});var s=n(474848),o=n(296540),i=n(554731),a=n(778354),r=n(574959),c=n(816689),u=n(256594),l=n(544801),d=n(496414);const p=["--post-padding-lr"],h=({getAttachElem:e,initialIsOpen:t=!1,isAllowedReenter:n,reactionButtonContainer:h,reactionHiddenButtonContainer:g,popup:_,popupProps:m,delayHide:f=i.HIDE_TOOLTIP_TIMEOUT,delayShow:b=i.SHOW_TOOLTIP_TIMEOUT,onOpenStateChange:v,onPopperVisibilityChange:w,styleVariant:C,triggerMouseenterOnInitial:k=!0,visibility:R=l.TooltipVisibility.uncontrolled})=>{const y=void 0!==e,[E,S]=(0,o.useState)(t),I=R!==l.TooltipVisibility.uncontrolled,P=(0,r.usePrevious)(R),A=(0,o.useRef)(null),j=(0,o.useRef)(null),L=(0,o.useRef)(null);(0,a.useReactedUsersPreview)({attemptRefetch:E});const{style:T}=(0,d.useCSSVarsPropagation)({elementWithPropsRef:j,properties:p}),M=(0,o.useMemo)((()=>{if(e)return e(L.current??void 0)}),[e,L.current]),x=(0,o.useCallback)(((e,t)=>{!t&&I||S(e)}),[I]);(0,o.useEffect)((()=>{v?.(E,L.current)}),[E]),(0,o.useEffect)((()=>{E&&n&&(n.current=l.IS_ALLOWED_REENTER_DEFAULT)}),[E]);const O=(0,u.useTooltipTrigger)({afterHide:x,afterShow:x,cancelCloseOnContentHover:n,delayHide:f,delayShow:b,ignoreMouseTriggers:I,popperPopupRef:A,reactionButtonContainer:h,reactionHiddenButtonContainer:g,triggerMouseenterOnInitial:k});return(0,o.useEffect)((()=>{if(I){const e=R===l.TooltipVisibility.opened;return e||O.cancelDelayedOpening(),void S(e)}E&&P===l.TooltipVisibility.opened&&S(!1)}),[R,I]),(0,s.jsx)(c.TransitionPopper,{attachTarget:M,isOpen:E,content:_,contentProps:{...m,...O.contentProps},onPopoverVisibilityChange:w,popoverContentStyle:T,popoverPopupRef:A,ref:y?L:j,styleVariant:C,children:(0,s.jsx)("div",{className:"ReactionsMenuButtonPopperReference"})})}},816689:(e,t,n)=>{"use strict";n.d(t,{TransitionPopper:()=>h});var s=n(474848),o=n(296540),i=n(753457),a=n(625528),r=n(8520),c=n(573510),u=n(361849),l=n(886856),d=n(540462);const p={appear:150,enter:150,exit:150},h=(0,o.forwardRef)((function({attachTarget:e,isOpen:t=!1,content:n,contentProps:h,onPopoverVisibilityChange:g,popoverContentStyle:_,popoverPopupRef:m,styleVariant:f,children:b,...v},w){const{isVisible:C,onEnter:k,onHidden:R}=(e=>{const[t,n]=(0,o.useState)(!!e);return{isVisible:!!e||t,onEnter:(0,o.useCallback)((()=>{n(!0)}),[]),onHidden:(0,o.useCallback)((()=>{n(!1)}),[])}})(t),y=(0,o.useRef)(null),E=(0,l.useCombinedRefs)(w,y),S=(0,u.usePopoverTopAutoPlacement)(E?.current??void 0,146,C),I=(()=>{const e=(0,o.useRef)(!0);return(0,o.useEffect)((()=>{e.current=!1}),[]),e.current})();(0,o.useEffect)((()=>{I||g?.(C)}),[C]);const P=(0,r.classNames)("ReactionsMenuPopper _ReactionsMenuPopperRoot",{"ReactionsMenuPopper--alignType-post":"post"===f,"ReactionsMenuPopper--popperBottom":S===u.PopoverVerticalPlacement.BOTTOM,"ReactionsMenuPopper--popperTop":S===u.PopoverVerticalPlacement.TOP,"ReactionsMenuPopper--vkuiRedesignEnabled":(0,d.partConfigEnabled)("feed_web_reactions_menu_vkui")}),A=(0,s.jsx)(n,{...h,placement:S}),j=(0,s.jsx)(c.default,{appear:!0,in:t,classNames:"ReactionsMenuPopperTransition",onEnter:k,onExited:R,timeout:p,children:(0,s.jsx)("div",{className:P,ref:m,style:_,children:A})});return(0,d.partConfigEnabled)("feed_web_reactions_menu_vkui")?(0,s.jsx)(i.Tooltip,{...v,shown:C,text:j,placement:S,maxWidth:null,enableInteractive:!0,children:(0,o.cloneElement)(b,{ref:E})}):(0,s.jsx)(a.Popover,{...v,restoreFocus:!1,shown:C,content:j,placement:S,children:(0,o.cloneElement)(b,{ref:E})})}))},163233:(e,t,n)=>{"use strict";n.d(t,{ButtonStyleVariant:()=>s});const s={Post:"post",Reply:"reply"}},496414:(e,t,n)=>{"use strict";n.d(t,{useCSSVarsPropagation:()=>o});var s=n(296540);const o=({elementWithPropsRef:e,properties:t})=>(0,s.useMemo)((()=>{const n=e.current;if(!n)return{style:{}};const s=window.getComputedStyle(n),o={};return t.forEach((e=>{const t=s.getPropertyValue(e);t&&(o[e]=t)})),{style:o}}),[e.current,t])},361849:(e,t,n)=>{"use strict";n.d(t,{PopoverVerticalPlacement:()=>s,usePopoverTopAutoPlacement:()=>a});var s,o=n(296540),i=n(734429);!function(e){e.BOTTOM="bottom-start",e.TOP="top-start"}(s||(s={}));const a=(e,t,n)=>(0,o.useMemo)((()=>((e,t)=>{const n="top-start";if(!e)return n;const s=(0,i.default)(e),o=window.pageYOffset||document.documentElement.scrollTop;return s.top-o<t?"bottom-start":n})(e,t)),[e,t,n])},173277:(e,t,n)=>{"use strict";n.d(t,{useReactionMenuConfig:()=>i});var s=n(296540),o=n(66663);const i=()=>(0,s.useMemo)((()=>(0,o.getReactionConfig)()),[])},256594:(e,t,n)=>{"use strict";n.d(t,{useTooltipTrigger:()=>i});var s=n(818847),o=n(296540);const i=({afterHide:e,afterShow:t,cancelCloseOnContentHover:n,delayHide:i=0,delayShow:a=0,ignoreMouseTriggers:r=!1,reactionButtonContainer:c,reactionHiddenButtonContainer:u,popperPopupRef:l,triggerMouseenterOnInitial:d})=>{const p=(0,o.useRef)(null),h=(0,o.useRef)(void 0),g=(0,o.useRef)(void 0),_=(0,o.useCallback)((()=>{window.clearTimeout(h.current??void 0)}),[]),m=(0,o.useCallback)((()=>{_(),t?.(!1)}),[t]),f=(0,o.useCallback)((()=>{_(),t?.(!0)}),[t]);(0,s.useOnClickOutside)(l,m),(0,o.useEffect)((()=>()=>{window.clearTimeout(h.current),window.clearTimeout(g.current)}),[]);const b=(0,o.useCallback)((t=>window.setTimeout((()=>{e?.(!1)}),t??0)),[e]),v=()=>{var e;(window.clearTimeout(g.current??void 0),r)||(h.current=(e=a,window.setTimeout((()=>{f()}),e??0)))},w=e=>{if(window.clearTimeout(h.current??void 0),r)return;e.relatedTarget instanceof HTMLElement&&p?.current?.contains(e.relatedTarget)||(g.current=b(i))};(0,o.useEffect)((()=>{d&&v()}),[]),(0,o.useEffect)((()=>(c?.addEventListener("mouseenter",v,{passive:!0}),c?.addEventListener("mouseleave",w,{passive:!0}),u?.addEventListener("click",v,{passive:!0}),()=>{c?.removeEventListener("mouseenter",v),c?.removeEventListener("mouseleave",w),u?.removeEventListener("click",v)})),[c]);return{cancelDelayedOpening:_,contentProps:{ref:p,onMouseEnter:(0,o.useCallback)((()=>{window.clearTimeout(g.current??void 0),n?.current&&f()}),[r,f]),onMouseLeave:(0,o.useCallback)((e=>{r||c&&e.target instanceof HTMLElement&&c.contains(e.target)||(g.current=b(i))}),[b,i,r,c])}}}},544801:(e,t,n)=>{"use strict";n.d(t,{IS_ALLOWED_REENTER_DEFAULT:()=>i,TooltipVisibility:()=>s,useTooltipVisibility:()=>a});var s,o=n(296540);!function(e){e.closed="closed",e.opened="opened",e.uncontrolled="uncontrolled"}(s||(s={}));const i=!0,a=()=>{const[e,t]=(0,o.useState)("uncontrolled"),n=(0,o.useRef)(i),s=(0,o.useCallback)((s=>{"closed"!==e&&(void 0!==s&&(n.current=s),t("closed"),window.setTimeout((()=>{t("uncontrolled")})))}),[]);return{isAllowedReenter:n,tooltipVisibility:e,setTooltipVisibility:t,triggerClose:s}}},280720:(e,t,n)=>{"use strict";n.d(t,{renderPreviewItems:()=>l});var s=n(8520),o=n(369296),i=n(754866),a=n(962444),r=n.n(a),c=n(163233),u=n(66663);const l=(e,t,n,a,l)=>{const d=((e,t,n=!1)=>{let s=[];for(const t of Object.keys(e)){const n=(0,o.parseReactionId)(t);n.isValid&&e[n.value]>0&&s.push(n.value)}return s=s.sort(((t,n)=>(e[n]||0)-(e[t]||0))).slice(0,t),n&&s.reverse(),s})(t,3),p=e.querySelector(".ReactionsPreview__items"),h=(0,u.getReactionSet)(n),g=0===(0,o.calcCountersSum)(t),_=r().reactions_preview_item;p&&h&&"string"==typeof _?(p.innerHTML=d.map((e=>{const t=h.itemsById[e];if(!t)return"";const n=(0,s.classNames)({"ReactionsPreviewItem--lite ReactionsPreviewItem--stackOverlayLite":l===c.ButtonStyleVariant.Reply,"ReactionsPreviewItem--post ReactionsPreviewItem--stackOverlayPost":l===c.ButtonStyleVariant.Post});return(0,i.rs)(_,{image_url:t.imagePreviewURL,title:t.title,class:n})})).join(""),e.classList.toggle("ReactionsPreview--empty",g),e.classList.toggle("ReactionsPreview--active",void 0!==a)):console.warn("Unable to render reaction previews",{itemsContainer:p,previewItemTemplate:_,reactionSet:h})}},693579:(e,t,n)=>{"use strict";n.d(t,{reactionsButtonMount:()=>m});var s=n(474848),o=n(440961),i=n(101965),a=n(927350),r=n(284667),c=n(373502),u=n(341234),l=n(446106),d=n(163233),p=n(797596),h=n(342018),g=n(458840);const _=d.ButtonStyleVariant.Post,m=(e,t={})=>{if("__isMounted"in e)return;const n=(0,p.getLikeBtn)(e),d=(0,p.getHiddenLikeBtn)(e),m=(0,p.getMenuMount)(e);if(!n||!m)return void((0,a.isDebugEnabled)()&&console.error("Init reactions button failed",m,n));const f=(0,r.reactionsElemPayload)(n);if(!f?.objectRaw)return void((0,a.isDebugEnabled)()&&console.error("Init reactions button failed",f));const{counts:b,csrfHash:v,objectRaw:w,reactionSetId:C,styleVariant:k=_,userReactionId:R}=f,y=f.titleVariant??c.TITLE_VARIANT_DEFAULT;null===v&&console.warn("Missing reactions csrf hash"),(0,a.isDebugEnabled)()&&console.log("Init reactions button",w,C);o.render((0,s.jsx)(u.ReactionsMenuButton,{objectId:w,onReactionChoose:e=>{const t=(0,r.reactionsElemPayload)(n);null!==v&&t&&((0,l.emitReactionChoose)(w),(0,i.reactionButtonSetReaction)(e,t.userReactionId,w,v,n))},reactionButtonContainerElem:n,reactionHiddenButtonContainerElem:d,reactionIdInitial:R,reactionSetId:C,reactionsCounts:b,styleVariant:k,titleVariant:y,triggerMouseenterOnInitial:!!t.isMouseenterEvent,onCountersLineClick:()=>{(0,g.showWiki)({w:`likes/${w}`},!1,!1,{queue:1})}}),m),(0,h.pushNavDestroy)((function(){m&&(o.unmountComponentAtNode(m),delete e.__isMounted)})),e.__isMounted=!0}},101965:(e,t,n)=>{"use strict";n.d(t,{reactionButtonSetReaction:()=>f,showReactedModal:()=>b});var s=n(458840),o=n(888065),i=n(865556),a=n(857461),r=n(42858),c=n(349835),u=n(536382),l=n(927350),d=n(284667),p=n(574959),h=n(948179),g=n(153663),_=n(374339);const m=(e,{counts:t,isFromWkLayer:n,isPrimaryLikeButtonClick:s,isUserAction:o=!1,objectRaw:i,previewVisibility:a,reactionId:c,suggestSubscribe:u})=>{(0,r.triggerReactionsUpdate)(i,t,{id:c},{isFromWkLayer:n,isPrimaryLikeButtonClick:s,isUserAction:o,previewVisibility:a,suggestSubscribe:u})},f=(e,t,n,s,i,r)=>{if((0,l.isDebugEnabled)()&&console.log(`Change reaction for object ${n}: ${e}`),!(0,p.isValidEnvironment)())return;const f=(0,d.reactionsElemPayload)(i),b=f?.counts,v=((e,t,n)=>{const s={...e};return void 0!==t&&(s[t]=(s[t]||0)+1),void 0!==n&&(s[n]=Math.max(0,(s[n]||0)-1)),s})(f?.counts||(0,o.reactionCountsBrandWrap)({}),e,t),w=r?.isPrimaryLikeButtonClick,C=(0,c.isWkLayerWallPostOpen)(),k=(0,a.previewVisibilityIntentForVariant)(f?.previewVariant),R=(0,g.getTrackCodeFromPost)(i);m(0,{counts:v,isFromWkLayer:C,isPrimaryLikeButtonClick:w,isUserAction:!0,objectRaw:n,previewVisibility:k,reactionId:e}),(0,u.requestPostReactionSet)(e,n,s,{trackCode:R}).promise.then((t=>{const s=(0,u.validateLikesChangeResponse)(t),o=s?.userReaction;s&&void 0!==o&&m(0,{counts:s.counts,isFromWkLayer:C,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:k,reactionId:o.id,suggestSubscribe:s.suggestSubscribe});let i=n.replace("wall","post"),a=document.getElementById(i);if(a){let t=(0,_.getAdAttribute)(a,"ad");if(t){let n=void 0===e?"unlike":"like";h.AdsEvents.register(n,t)}}}),(e=>{e?.isAborted||m(0,{counts:b,isFromWkLayer:C,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:k,reactionId:t})}))};function b(e,t){!function(e){(0,s.showWiki)({w:e},!1,void 0,{queue:1})}(`${i.WK_SECTION_PREFIX_REACTIONS}_${e}/${t}`)}},536382:(e,t,n)=>{"use strict";n.d(t,{requestGetReacted:()=>s.requestGetReacted,requestPostReactionSet:()=>o.requestPostReactionSet,validateLikesChangeResponse:()=>o.validateLikesChangeResponse});var s=n(932088),o=n(417363)},932088:(e,t,n)=>{"use strict";n.d(t,{requestGetReacted:()=>i});var s=n(369296),o=n(761520);const i=e=>{const t={act:"reactions_get_reacted",object:e};return{promise:new Promise(((e,n)=>{o.ajax.post("/like.php",t,{onDone:t=>{const o=function(e){let t;if(!(0,s.isUnknownObject)(e))return t;const{reactedMenuStats:n}=e;n&&(t||(t={}),t={...t,reactedMenuStats:n});return t}(t);if(!o){const e=new Error("requestGetReacted: Invalid response");return console.error(e,t),void n(e)}e(o)},onFail:e=>(n({err:e}),!1)})}))}}},476428:(e,t,n)=>{"use strict";n.d(t,{stringWithHTMLEntitiesDecode:()=>i});var s=n(672330),o=n(8520);const i=e=>(0,o.decodeHTMLEntities)((0,s.unwrap)(e));s.unwrap},417363:(e,t,n)=>{"use strict";n.d(t,{requestPostReactionSet:()=>p,validateLikesChangeResponse:()=>h});var s=n(16675),o=n(369296),i=n(761520),a=n(433409),r=n(246429),c=n(865556),u=n(711615),l=n(870465);const d=(0,s.makePendingRequestState)(),p=(e,t,n,s)=>{(s?.abortPendingRequests??!0)&&d.cancel(t);const o={act:"a_set_reaction",object:t,reaction_id:e,hash:n,wall:2,from:window.Likes?._getReference(t),track_code:s?.trackCode,event_subtype:(0,l.getFeedEventSubtype)()},c=new a.AjaxCancellationToken,p=new Promise(((e,t)=>{const n=i.ajax.post("like.php",o,{cancellationToken:c,onDone:n=>{if(n?.unauth_action_box)return u.UnauthActionBox.show(n.unauth_action_box),void t();n?.done_box&&(0,r.showDoneBox)("",{},n.done_box),e(n)},onFail:e=>{const s=(e=>{return"object"==typeof(t=e)&&null!==t&&"readyState"in t&&0===e.readyState;var t})(n);return t({err:e,isAborted:s}),!!s}})})),h=()=>{c.cancel()},g=d.register(t,h);return p.catch((()=>{})).finally((()=>{g&&g()})),{abort:h,promise:p}},h=e=>{if(void 0===e?.reactions_my)return void console.warn("Invalid reaction change response format",e);const t=e?.[c.REACTIONS_COUNTS_RESPONSE_FIELD]??void 0,n=e.reactions_my,s=e.suggest_subscribe;let i;return null===n?i={id:void 0}:(0,o.isValidReactionId)(n)&&(i={id:n}),{counts:t,userReaction:i,suggestSubscribe:s}}},927350:(e,t,n)=>{"use strict";n.d(t,{ENABLED_IN_POST_REPLY:()=>o,isDebugEnabled:()=>s.isDebugEnabled});var s=n(668275);const o=!1},525474:(e,t,n)=>{"use strict";n.d(t,{getCounterForTitle:()=>a,isCounterAvailable:()=>c,isCounterEnabled:()=>r,isCounterEnabledForBtn:()=>i});var s=n(369296),o=n(866467);const i=e=>!!e.getAttribute("data-reaction-button-text-is-counter");function a(e,t,n,a){if(!i(e))return{kind:"disabled"};if(!n)return{kind:"error"};const r=0!==(a?(0,s.calcCountersSum)(a):0);if(!(0,s.hasReactionsForCounts)(n))return{kind:"enabled",allowZeroAnimation:r,buttonText:""};const c=(0,s.calcCounters)(n,t),u=(0,s.calcCountersWeightedSum)(c);return{kind:"enabled",allowZeroAnimation:r,buttonText:(0,o.langNumeric)(u,"%s",!0)}}function r(e){return!!e&&"disabled"!==e.kind}function c(e){return"enabled"===e.kind}},446106:(e,t,n)=>{"use strict";n.d(t,{addDataUpdateListener:()=>r,addReactionChooseListener:()=>u,emitDataUpdate:()=>c,emitReactionChoose:()=>l});var s=n(558137),o=n(825127);const i=(0,s.makeSharedState)("reactions-menu-events",(()=>({emitter:new o.default})),{version:0}),a=()=>i().emitter,r=(e,t)=>{const n=a(),s=`${e}:data_update`,o={[s]:t};return n.addListeners(o),()=>{n.removeListeners(o)}},c=(e,t)=>{a().emit(`${e}:data_update`,t)},u=(e,t)=>{const n=a(),s=`${e}:reaction_choose`,o={[s]:t};return n.addListeners(o),()=>{n.removeListeners(o)}},l=e=>{a().emit(`${e}:reaction_choose`)}},284667:(e,t,n)=>{"use strict";n.d(t,{getPreviewVariantForLikeBtn:()=>g,reactionsElemPayload:()=>_,reactionsElemPayloadForBadges:()=>m,shouldReactionsPreviewBeVisible:()=>b,updateReactionsButtonForCounts:()=>C,updateReactionsPreview:()=>w,verifyPayloadForBadges:()=>f});var s=n(261910),o=n(369296),i=n(939646),a=n(866467),r=n(66663),c=n(797596),u=n(574959),l=n(857461),d=n(280720),p=n(978265);const h=e=>{const t=e.getAttribute("data-reaction-counts");if(null===t)return{};const n=t?(0,s.parseJSON)(t):void 0;return"object"==typeof n&&null!==n?n:void 0},g=e=>{const t=e.getAttribute("data-reaction-preview-variant");if(t)return(0,l.parsePreviewVariant)(t)},_=e=>{const t=e.getAttribute("data-reaction-target-object"),n=e.getAttribute("data-reaction-hash"),s=e.getAttribute("data-reaction-set-id");if(null===s)return;const i=e.getAttribute(p.ATTR_USER_REACTION_ID),a=i?(0,o.parseReactionIdOrUnset)(i):void 0,r=e.getAttribute("data-reaction-style-variant"),c=r&&(0,u.isValidButtonStyleVariant)(r)?r:void 0,l=e.getAttribute("data-reaction-menu-title-variant"),d=l&&(0,u.isValidButtonTitleVariant)(l)?l:void 0,_=g(e);return{counts:h(e),csrfHash:n,objectRaw:t,reactionSetId:s,styleVariant:c,titleVariant:d,userReactionId:a,previewVariant:_}},m=e=>({ref:e.getAttribute("data-badges-ref"),donutMiniappUrl:e.getAttribute("data-donut-miniapp-url"),showOnboarding:e.getAttribute("data-badges-show-onboarding")}),f=e=>{const{donutMiniappUrl:t}=e;return Boolean(t)},b=e=>(0,o.hasReactionsForCounts)(e),v=(e,{counts:t,countsPrevious:n,objectRaw:s,reactionId:u,reactionSetId:l,styleVariant:p})=>{const h=(0,r.getReactionSet)(l),g=(0,o.calcCounters)(t,h),_=(0,o.calcCountersWeightedSum)(g),m=(0,o.calcCountersSum)(t),f=n?(0,o.calcCountersSum)(n):0,b=(0,c.getPreviewElem)(s);b&&((0,d.renderPreviewItems)(b,t,l,u,p),((e,t,n,s)=>{const o=(0,a.langNumeric)(n,a.getLang("reactions_n_reacted","raw")||"%s",!0);e.setAttribute("aria-label",o);const r=e.querySelector('[data-section-ref="like-button-count"]')??void 0;if(!r)return;e.tt&&"object"==typeof e.tt&&(e.tt.shown||e.tt.showing||e.tt?.destroy?.());const c=(0,a.langNumeric)(t,"%s",!0);(0,i.animateCount)(r,c,{allowZero:0!==s,str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0})})(b,_,m,f))},w=(e,t)=>{const n=(0,c.getLikeBtnElem)(e),s=t.counts;n&&s?((e,t,n)=>{const s=_(e);s&&s.objectRaw&&v(0,{counts:t,countsPrevious:n,objectRaw:s.objectRaw,reactionId:s.userReactionId,reactionSetId:s.reactionSetId,styleVariant:s.styleVariant})})(n,s,t.countsPrevious):console.warn("Unable to update object reactions",{objectRaw:e,options:t})},C=(e,{counts:t})=>{const n=(0,c.getLikeBtnElem)(e);n&&((e,t)=>{e.setAttribute("data-reaction-counts",JSON.stringify(t))})(n,t)}},807442:(e,t,n)=>{"use strict";n.d(t,{ReactionsEntryGlobal:()=>g,init:()=>p});var s=n(972332),o=n(693579),i=n(509945),a=n(795730),r=n(286051),c=n(66663),u=n(913054),l=n(540462),d=n(797596);const p=()=>{(0,u.postRenderReactionsInit)(),(0,r.initResponseHandlers)()},h=e=>"1"===e.dataset.reactionsMenuDisabled,g={onReactionKeyDown:(e,t)=>{(0,i.isEventFromMenu)(t)||(0,l.partConfigEnabled)("unlike_archived_post")&&h(e)||[s.KEY.RETURN,s.KEY.SPACE].includes(t.keyCode)&&(t.stopPropagation(),(0,i.toggleReactionOnClick)(e))},initReactionByMouseEvent:(e,t)=>{if(t.target!==e)return;const n=(0,d.getButtonContainer)(e);n&&((0,l.partConfigEnabled)("unlike_archived_post")&&h(e)||(0,a.reactionsButtonInit)(n,{isMouseenterEvent:!0}))},onReactionClick:(e,t)=>{(0,s.checkEvent)(t)||(0,i.isEventFromMenu)(t)||((0,i.toggleReactionOnClick)(e),(0,l.partConfigEnabled)("unlike_archived_post")&&h(e)||(0,a.reactionsButtonInit)(e))},reactionsButtonMount:o.reactionsButtonMount,storageAddSets:c.storageAddSets,storageSetConfig:c.storageSetConfig}},509945:(e,t,n)=>{"use strict";n.d(t,{isEventFromMenu:()=>r,toggleReactionOnClick:()=>c});var s=n(554731),o=n(101965),i=n(446106),a=n(284667);const r=e=>e.target instanceof HTMLElement&&e.target.closest?.("._ReactionsMenuPopperRoot"),c=e=>{const t=(0,a.reactionsElemPayload)(e);if(!t?.objectRaw)return void console.warn("Missing reactions object raw",e);const{csrfHash:n,objectRaw:r,userReactionId:c}=t;if((0,i.emitReactionChoose)(r),null===n)return void console.warn("Missing reactions csrf hash",e);const u=void 0===c?s.REACTION_ID_DEFAULT:void 0;(0,o.reactionButtonSetReaction)(u,c,r,n,e,{isPrimaryLikeButtonClick:!0})}},795730:(e,t,n)=>{"use strict";n.d(t,{reactionsButtonInit:()=>s});const s=(...e)=>{const t=window.Reactions;t?t.reactionsButtonMount(...e):window.stManager.add([window.jsc("web/reactions.js"),"reactions.css"]).then((()=>{window.Reactions?s(...e):console.error("Reactions module is unavailable")}))}},873780:(e,t,n)=>{"use strict";n.d(t,{reactionLogError:()=>i});var s=n(295673),o=n(66663);const i=({error:e})=>{const t=(0,o.getReactionConfig)(),n=t?.reportJsErrors??!1;(0,s.reactionLogError)({error:e,reportError:n})}},286051:(e,t,n)=>{"use strict";n.d(t,{initResponseHandlers:()=>c});var s=n(624199),o=n(66663);const i=e=>{const t=e?.reaction_sets;t&&(0,o.storageAddSets)(t)},a=e=>{e&&(0,o.storageSetConfig)(e)};let r=!1;const c=()=>{r||((0,s.replaceExtraHandler)("reactionsConfig",a),(0,s.replaceExtraHandler)("reactions",i),r=!0)}},797596:(e,t,n)=>{"use strict";n.d(t,{getButtonContainer:()=>a,getClosestLikeBtnContainerElem:()=>o,getHiddenLikeBtn:()=>u,getLikeBtn:()=>c,getLikeBtnElem:()=>s,getLikeWrap:()=>i,getMenuMount:()=>r,getPreviewElem:()=>l});const s=e=>document.querySelector(`[data-section-ref="reactions-button"][data-reaction-target-object="${e}"]`)??void 0,o=e=>e.closest('[data-section-ref="reactions-button-container"]')??void 0,i=e=>{const t=s(e);if(t)return t.closest(".like_wrap")??void 0},a=e=>e.closest('[data-section-ref="reactions-button-container"]'),r=e=>e.querySelector('[data-section-ref="reactions-menu-mount"]')??null,c=e=>e.querySelector('[data-section-ref="reactions-button"]')??null,u=e=>e.querySelector('[data-section-ref="reactions-hidden-button"]')??void 0,l=e=>document.querySelector(`[data-section-ref="reactions-preview-items"][data-reaction-target-object="${e}"]`)},66663:(e,t,n)=>{"use strict";n.d(t,{getReactionConfig:()=>g,getReactionSet:()=>p,storageAddSets:()=>d,storageSetConfig:()=>h});var s=n(558137),o=n(8520),i=n(369296),a=n(873780),r=n(865556),c=n(927350);const u=(0,s.makeSharedState)("reactions-storage",(()=>new Map),{version:0}),l=(0,s.makeSharedState)("reactions-config",(()=>({config:void 0})),{version:0}),d=e=>{(0,c.isDebugEnabled)()&&console.log(e),Object.entries(e).forEach((([e,t])=>{const n=(0,i.validateReactionSetPayloaditems)(t,e);if(n)return void(0,a.reactionLogError)({error:n.error});const s=t.map((e=>({...e,title:(0,o.decodeHTMLEntities)(e.title)})));u().set(e,(0,i.prepareReactionMenuSet)(e,s,{imageMenuSize:r.SIZE_96,imagePreviewSize:r.SIZE_32,imageStoryPanelSize:r.SIZE_128,imageStoryPreviewSize:r.SIZE_40}))}))},p=e=>{const t=u().get(e);if(t)return t;{const t=new Error(`Reaction set not found: ${e}`);(0,a.reactionLogError)({error:t})}},h=e=>{(0,c.isDebugEnabled)()&&console.log(e);const t=(0,i.parseReactionMenuConfig)(e);t?l().config=t:console.warn("Reactions: invalid menu config passed",e)},g=()=>{const e=l()?.config;return e}},574959:(e,t,n)=>{"use strict";n.d(t,{isValidButtonStyleVariant:()=>p,isValidButtonTitleVariant:()=>d,isValidEnvironment:()=>a,preloadImage:()=>r,usePrevious:()=>c,usePreviousRef:()=>u});var s=n(296540),o=n(373502),i=n(163233);const a=()=>"function"==typeof window.cur?.viewAsBox?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(window.Widgets?.oauth?.(),!1),r=e=>new Promise(((t,n)=>{const s=new Image;s.src=e,s.onload=()=>t(),s.onerror=()=>n()})),c=e=>{const t=(0,s.useRef)(e);return(0,s.useEffect)((()=>{t.current=e})),t.current},u=e=>{const t=(0,s.useRef)(e);return(0,s.useEffect)((()=>{t.current=e})),t},l=Object.values(i.ButtonStyleVariant),d=e=>o.ReactionMenuTitleVariants.includes(e),p=e=>l.includes(e)},913054:(e,t,n)=>{"use strict";n.d(t,{postRenderReactionsInit:()=>j});var s=n(536418),o=n(8520),i=n(461506),a=n(754866),r=n(753304),c=n(890332),u=n(927350),l=n(284667),d=n(857461),p=n(797596),h=n(165703),g=n(44280),_=n(15874),m=n(349835),f=n(540462),b=n(446106),v=n(65150),w=n(66663),C=n(897004);const k=(e,t,n=window.cur?.wallTpl)=>{const s=n?.[e];if(s)return(0,r.stripPercentVars)((0,a.rs)(s,t));console.warn(`renderTemplate: missing template '${e}'`,n)},R=({isUserAction:e=!1},...t)=>{e?console.error(...t):(0,u.isDebugEnabled)()&&console.warn(...t)},y=e=>(0,C.isBadgesEnabled)()&&e.classList.contains("PostActionStatusBar--withBadges");const E=(e,t,{isActionStatusBarVisible:n,isReactionsPreviewVisible:s,positionTrackingEnd:i})=>{const r=((e,t)=>{const n=(0,p.getLikeWrap)(e);if(!n)return;const s=(0,_.getPostElem)(t,n),o=s?.querySelector('[data-section-ref="post-action-status-bar"]');if(o)return{actionStatusBar:o};const i=(0,m.isWkLayerWallPostOpen)()?window.wkcur?.wallTpl:window.cur?.wallTpl,r=(0,a.se)(k("post_action_status_bar",{class:"PostActionStatusBar--hidden"},i));return r?((0,f.partConfigEnabled)("feed_redesign_post_bottom_2023_enabled")?(0,a.domInsertAfter)(r,n):(0,a.domInsertBefore)(r,n),{actionStatusBar:r}):void 0})(e,t.postFullId);if(!r)return void R({},"Unable to init ActionStatusBar in post",t);const{actionStatusBar:c}=r;if(c.classList.toggle("PostActionStatusBar--hidden",!n),y(c)&&c.classList.toggle("PostActionStatusBar--withReactions",s),n&&!(0,p.getPreviewElem)(e)){const t=(0,a.se)(function(e,t,n={}){const s=(0,m.isWkLayerWallPostOpen)()?window.wkcur?.wallTpl:window.cur?.wallTpl,i=(0,o.classNames)({"ReactionsPreview--empty":!e,"ReactionsPreview--isInActionStatusBar":!!n.isInActionStatusBar});return k("post_reactions_preview",{class:i,object_raw:t},s)}(s,e,{isInActionStatusBar:!0}));if(y(c)){const e=c.querySelector(".PostActionStatusBar__leftInner");e&&e.prepend(t)}else c.prepend(t)}if(i){const t=(0,p.getLikeBtnElem)(e);i?.(t)}},S=e=>{if(!(e=>void 0!==e.counts)(e))return void R(e,"Counts is invalid or missing");const t=(0,c.likePostObjectId)(e.postFullId),n=(0,_.getPostElem)(e.postFullId,(0,p.getLikeWrap)(t));n||R(e,"Missing post element for reactions preview update",{payload:e,likeWrap:(0,p.getLikeWrap)(t)});const s=(0,p.getLikeBtnElem)(t);if(!s)return void R(e,"Unable to find reactions button",{likeObjectId:t});const o=(0,l.reactionsElemPayload)(s),i=o?.counts;I({elemPayload:o,likeBtnElem:s,likeObjectId:t,payload:e}),P({countsPrevious:i,likeBtnElem:s,likeObjectId:t,payload:e,postEl:n})},I=({elemPayload:e,likeBtnElem:t,likeObjectId:n,payload:o})=>{const{counts:i}=o;if(!!o.isQueueUpdate&&(e=>{const t=(0,s.getLastOwnReactionChangeTime)(e);if(!t)return!1;const n=t+1e4;return Date.now()<n})(t))(0,u.isDebugEnabled)()&&console.log("Ignoring reactions update from queue",o);else{if(e){const{counts:n,reactionSetId:a}=e,r=(0,w.getReactionSet)(a);if((0,h.isReactionsFullUpdatePayload)(o)){const e=o.reactionIdState.reactionId;r&&(0,s.updateReactionButtonForCurrentReaction)(t,e,r,o.isUserAction)}r&&((0,s.updateReactionButtonCounts)(t,r,o.isUserAction,i,n),(0,s.updateReactionButtonContainerForCounts)(t,i))}if((0,h.isReactionsFullUpdatePayload)(o)){const n=o.reactionIdState.reactionId;(0,s.setDataCurrentId)(t,n),o.isUserAction&&e?.objectRaw&&(0,b.emitDataUpdate)(e.objectRaw,{currentReactionId:n})}(0,l.updateReactionsButtonForCounts)(n,{counts:i})}},P=({countsPrevious:e,likeBtnElem:t,likeObjectId:n,payload:s,postEl:o})=>{const{counts:a,previewVisibility:r=d.previewVisibilityUseCurrent}=s,c=((e,t)=>{if((0,d.isIntentPreviewInActionStatusBar)(e))return{previewVariant:v.PreviewVariantActionStatusBar};if((0,d.isIntentPreviewHidden)(e))return{previewVariant:v.PreviewVariantHidden};if((0,d.isIntentPreviewUseCurrent)(e)){const e=(0,l.getPreviewVariantForLikeBtn)(t);if(e)return{previewVariant:e}}})(r,t);if(!c)return;const{previewVariant:u}=c,p=(0,d.isVariantInActionStatusBar)(u),h=(0,l.shouldReactionsPreviewBeVisible)(a),g=(0,d.isVariantHidden)(u)||p&&!h;if(p){let e;s.isPrimaryLikeButtonClick&&!s.isFromWkLayer&&(e=(0,i.preservePositionBetween)(t).start());const a=h;(0,C.isBadgesEnabled)()||o?.classList.toggle("post--withActionStatusBar",a),E(n,s,{isActionStatusBarVisible:a,isReactionsPreviewVisible:h,positionTrackingEnd:e})}g||(0,l.updateReactionsPreview)(n,{counts:a,countsPrevious:e})},A=e=>{if(!u.ENABLED_IN_POST_REPLY)return!1;const{counts:t}=e;if(!t)return;const n=(0,c.likeReplyObjectId)(e.replyFullId);(0,l.updateReactionsPreview)(n,{counts:t,countsPrevious:void 0}),(0,l.updateReactionsButtonForCounts)(n,{counts:t})},j=()=>{let e=[(0,g.registerUniqueListener)("wall-post-action-status-bar",g.WallDataEvents.post_reactions_counts_update,S),(0,g.registerUniqueListener)("wall-reply-reactions-counts",g.WallDataEvents.reply_reactions_counts_update,A)];return{onDestroy:()=>{e.forEach((e=>{e()})),e=[]}}}},44280:(e,t,n)=>{"use strict";n.d(t,{WallDataEvents:()=>s.WallDataEvents,registerUniqueListener:()=>s.registerUniqueListener});var s=n(903401)},723598:(e,t,n)=>{"use strict";n.d(t,{CoauthorInviteCardWidget:()=>h});var s=n(474848),o=n(456921),i=n(132028),a=n(149333),r=n(327626),c=n(373080),u=n(175400),l=n(454154),d=n(286751);const p=(0,o.observer)((function(){const{text:e,title:t,isAcceptRequestLoading:n,isRejectRequestLoading:o,isMultiCoauthor:i,handleReject:p,handleAccept:h,mainCoauthor:g,props:{current:{postId:_,status:m,author:f,coauthors:b,onClose:v,onNavigate:w,showAcceptingCoauthorsModal:C,showRejectingCoauthorsModal:k}}}=(0,d.useCoauthorInviteModel)(),R=(0,a.useLangs)(),y=m===d.CoauthorInviteState.REJECTED,E=m===d.CoauthorInviteState.PENDING,S=!y&&!E;return(0,s.jsx)(r.Banner,{stretched:!0,asideMode:E?void 0:"dismiss",onDismiss:v,header:t,text:(0,s.jsx)(c.InnerHTML,{children:e}),actions:!S&&(0,s.jsxs)(u.ButtonGroup,{mode:"horizontal",gap:"m",stretched:!0,children:[E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Button,{disabled:o,loading:n,onClick:()=>{b&&f&&(i?C({coauthors:b,postOwnerId:f.id,postId:_}):h((e=>{w({options:{params:{coauthor_acceptance_prev_state:JSON.stringify(e)}}})})))},mode:"primary",appearance:"accent",children:R.getLang("wall_coauthors_invite_card_accept")}),(0,s.jsx)(l.Button,{disabled:n,loading:o,onClick:()=>{b&&f&&(i?k({coauthors:b,postOwnerId:f.id,postId:_}):p((e=>{w({options:{params:{coauthor_acceptance_prev_state:JSON.stringify(e)}}})})))},mode:"link",appearance:"accent",children:R.getLang("wall_coauthors_invite_card_reject")})]}),y&&(0,s.jsx)(l.Button,{onClick:()=>{g?.rejectedPrivacyLink&&w({url:g.rejectedPrivacyLink})},mode:"link",appearance:"accent",children:R.getLang("wall_coauthors_invite_card_settings")})]})})})),h=(0,i.createWidget)(d.CoauthorInviteProvider,p)},826929:(e,t,n)=>{"use strict";n.d(t,{CoauthorInviteProvider:()=>p,useCoauthorInviteModel:()=>h});var s=n(331635),o=n(609620),i=n(327813),a=n(468073),r=n(712600),c=n(229745),u=n(132028),l=n(219190);class d{[u.init](){const{author:e,coauthors:t,status:n}=this.getState();t.length&&(this.isMultiCoauthor=t.length>1,this.isMultiCoauthor||(this.mainCoauthor=t[0],this.mainCoauthorIsGroup=a.Ranges.isGroupId(this.mainCoauthor.id),this.mainCoauthor.name=this.prepareName(this.mainCoauthor.name,this.mainCoauthorIsGroup)),this.authorIsGroup=a.Ranges.isGroupId(e.id),this.props.current.author={...e,name:this.prepareName(e.name,this.authorIsGroup)},void 0===n?(this.props.current.status=l.CoauthorInviteState.PENDING,this.setInitialState()):this.setPrefState())}setInitialState(){this.isMultiCoauthor?this.setInviteToUserState():this.mainCoauthorIsGroup?this.setInviteToGroupState():this.setInviteToUserState()}prepareName(e,t){const n=(0,o.default)(e,{length:33});return t?`«${n}»`:n}setInviteToUserState(){const{author:e}=this.getState();let t=this.langs.getLang("wall_coauthors_invite_card_from_user_to_user_text");this.authorIsGroup&&(t=this.langs.getLang("wall_coauthors_invite_card_from_group_to_user_text")),this.text=t.replace("{name}",`<b>${e.name}</b>`)}setInviteToGroupState(){const{author:e}=this.getState();if(!this.mainCoauthor)return;let t=this.langs.getLang("wall_coauthors_invite_card_from_user_to_group_text");this.authorIsGroup&&(t=this.langs.getLang("wall_coauthors_invite_card_from_group_to_group_text")),this.text=t.replace("{from_name}",`<b>${e.name}</b>`).replace("{to_name}",`<b>${this.mainCoauthor.name}</b>`)}setPrefState(){switch(this.getState().status){case l.CoauthorInviteState.ACCEPTED:if(this.mainCoauthorIsGroup){this.setAcceptedByGroupState();break}this.setAcceptedByUserState();break;case l.CoauthorInviteState.REJECTED:this.setRejectedState();break;default:this.setInitialState()}}setAcceptedByGroupState(){this.title=this.langs.getLang("wall_coauthors_invite_card_accept_by_group_title"),this.text=this.langs.getLang("wall_coauthors_invite_card_accept_by_group_text")}setAcceptedByUserState(){this.title=this.langs.getLang("wall_coauthors_invite_card_accept_title"),this.text=this.langs.getLang("wall_coauthors_invite_card_accept_text")}setRejectedState(){this.text=this.langs.getLang("wall_coauthors_invite_card_reject_text"),this.title=""}getState(){const{author:e,coauthors:t,postId:n,status:s}=this.props.current;return{author:e,coauthors:t,postId:n,status:s}}constructor(e,t,n){this.langs=e,this.wallApi=t,this.props=n,this.authorIsGroup=!1,this.mainCoauthorIsGroup=!1,this.isAcceptRequestLoading=!1,this.isRejectRequestLoading=!1,this.text="",this.title="",this.isMultiCoauthor=!1,this.mainCoauthor=null,this.handleReject=async e=>{const{postId:t,author:n,coauthors:s}=this.getState();if(this.mainCoauthor){this.isRejectRequestLoading=!0;try{await this.wallApi.rejectCoOwnership({post_id:t,post_owner_id:n.id,co_owner_id:this.mainCoauthor.id}),e({postId:t,status:l.CoauthorInviteState.REJECTED,author:n,coauthors:s})}catch{(0,i.runInAction)((()=>{this.isRejectRequestLoading=!1}))}}},this.handleAccept=async e=>{const{postId:t,author:n,coauthors:s}=this.getState();if(this.mainCoauthor){this.isAcceptRequestLoading=!0;try{await this.wallApi.acceptCoOwnership({post_id:t,post_owner_id:n.id,co_owner_id:this.mainCoauthor.id}),e({postId:t,author:n,coauthors:s,status:l.CoauthorInviteState.ACCEPTED})}catch{(0,i.runInAction)((()=>{this.isAcceptRequestLoading=!1}))}}},(0,i.makeAutoObservable)(this)}}d=(0,s.__decorate)([u.scope.transient(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===r.Langs?Object:r.Langs,void 0===c.WallApi?Object:c.WallApi,void 0===u.Props?Object:u.Props])],d);const{Provider:p,useModel:h}=(0,u.createProvider)(d)},219190:(e,t,n)=>{"use strict";n.d(t,{CoauthorInviteState:()=>s});const s={PENDING:0,ACCEPTED:1,REJECTED:2}},13511:(e,t,n)=>{"use strict";n.d(t,{CoauthorsRequestModalBody:()=>_});var s=n(474848),o=n(296540),i=n(456921),a=n(303800),r=n(753457),c=n(194528),u=n(159618),l=n(398586),d=n(751268),p=n(175400),h=n(454154),g=n(286751);const _=(0,i.observer)((function(){const{subtitle:e,selectedId:t,actionText:n,actionHandler:i,isLoading:_,props:{current:{coauthors:m,refreshCoordinates:f,handleNavReload:b}},updateSelectedId:v}=(0,g.useCoauthorsRequestModal)();(0,o.useEffect)((()=>{f?.()}),[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Div,{mode:"horizontal",children:(0,s.jsx)(r.Subhead,{children:e})}),(0,s.jsx)(c.Spacing,{size:8}),(0,s.jsx)(u.SpacedList,{spacing:4,children:m.map((e=>(0,s.jsx)(l.SelectableCell,{before:(0,s.jsx)(d.RichAvatar,{size:48,src:e.src,alt:e.name,"aria-hidden":!0}),selectable:!1,checked:t===e.id,onChange:v(e.id),children:e.name},e.name+e.id)))}),(0,s.jsx)(a.Div,{children:(0,s.jsx)(p.ButtonGroup,{mode:"vertical",stretched:!0,align:"center",children:(0,s.jsx)(h.Button,{disabled:!t,loading:_,onClick:()=>{i?.((()=>{b()}))},stretched:!0,size:"l",mode:"primary",appearance:"accent",children:n})})})]})}))},599141:(e,t,n)=>{"use strict";n.d(t,{CoauthorsRequestModalProvider:()=>l,useCoauthorsRequestModal:()=>d});var s=n(331635),o=n(327813),i=n(712600),a=n(229745),r=n(132028),c=n(790148);class u{[r.init](){if(this.props.current.mode===c.CoauthorModalMode.ACCEPTING)return this.title=this.langs.getLang("wall_coauthors_accepting_card_title"),this.subtitle=this.langs.getLang("wall_coauthors_accepting_card_subtitle"),this.actionText=this.langs.getLang("wall_coauthors_accepting_card_action"),void(this.actionHandler=this.accept);this.title=this.langs.getLang("wall_coauthors_rejecting_card_title"),this.subtitle=this.langs.getLang("wall_coauthors_rejecting_card_subtitle"),this.actionText=this.langs.getLang("wall_coauthors_rejecting_card_action"),this.actionHandler=this.reject}constructor(e,t,n){this.langs=e,this.wallApi=t,this.props=n,this.title="",this.subtitle="",this.actionText="",this.isLoading=!1,this.actionHandler=null,this.selectedId=null,this.updateSelectedId=e=>()=>{this.selectedId=e},this.accept=async e=>{if(this.selectedId){this.isLoading=!0;try{await this.wallApi.acceptCoOwnership({post_id:this.props.current.postId,post_owner_id:this.props.current.postOwnerId,co_owner_id:this.selectedId}),e()}catch{(0,o.runInAction)((()=>{this.isLoading=!1}))}}},this.reject=async e=>{if(this.selectedId){this.isLoading=!0;try{await this.wallApi.rejectCoOwnership({post_id:this.props.current.postId,post_owner_id:this.props.current.postOwnerId,co_owner_id:this.selectedId}),e()}catch{(0,o.runInAction)((()=>{this.isLoading=!1}))}}},(0,o.makeAutoObservable)(this)}}u=(0,s.__decorate)([r.scope.transient(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===i.Langs?Object:i.Langs,void 0===a.WallApi?Object:a.WallApi,void 0===r.Props?Object:r.Props])],u);const{Provider:l,useModel:d}=(0,r.createProvider)(u)},790148:(e,t,n)=>{"use strict";n.d(t,{CoauthorModalMode:()=>s});const s={ACCEPTING:0,REJECTING:1}},669177:(e,t,n)=>{"use strict";n.d(t,{PollModalProvider:()=>h,usePollModal:()=>g});var s=n(331635),o=n(327813),i=n(712600),a=n(734979),r=n(670252),c=n(132028),u=n(468073),l=n(719358);const d=2e3;class p{async[c.init](){await this.fetchPoll(),this.isFetching=!1}get canVote(){return 0===this.poll.answer_ids?.length&&!this.poll.closed&&!this.isPollFinished&&this.poll.can_vote}get canUnvote(){return!this.poll.disable_unvote&&this.isRevotingAvailable}get isPollFinished(){return Boolean(this.poll.end_date&&1e3*this.poll.end_date<=Date.now())}get isVotingAvailable(){return!(this.poll.answer_ids?.length||!this.poll.can_vote||this.isPollFinished)}get isShowResultsButtonDisabled(){return!!this.canVote}get isRevotingAvailable(){return!!this.poll.answer_ids?.length&&!this.isPollFinished&&!this.poll.disable_unvote&&this.poll.can_vote}get hasSelectedAnswers(){return this.selectedAnswers.size>0}get actionSheetText(){const e=this.poll.owner_id;if(u.Ranges.isGroupId(e)){const t=u.Ranges.convertOwnerIdToGroupId(e),n=this.poll.groups?.find((e=>e.id===t));if(n)return this.langs.langReplace(this.langs.getLang("wall_poll_actionsheet_group_title"),{community_name:n.name})}else{const t=this.poll.profiles?.find((t=>t.id===e));if(t)return this.langs.langReplace(this.langs.getLang("wall_poll_actionsheet_user_title"),{author:(0,l.getUserFullName)(t)})}return""}get pollTypeText(){return this.poll.anonymous?this.langs.getLang("voting_anonymous"):this.langs.getLang("voting_public")}get pollVotesText(){return 0===this.poll.votes?this.isPollFinished?this.langs.getLang("voting_no_voted"):this.langs.getLang("voting_vote_first"):this.langs.numeric(this.poll.votes,this.langs.getLang("voting_N_voted",!0))}get pollVotesAvatars(){return this.poll.anonymous?[]:this.poll.profiles?.filter((e=>this.poll.friends?.some((t=>t.id===e.id))))??[]}get pollSubtitle(){if(this.isPollFinished)return this.langs.getLang("voting_ended");let e=[];return this.poll?.disable_unvote&&e.push(this.langs.getLang("voting_unvote_disabled")),this.poll.end_date&&e.push(this.langs.date(new Date(1e3*this.poll.end_date),this.langs.getLang("voting_time_until",!0),this.langs.getLang("months_of",!0),{onlyDate:!0,offset:0})),e.join(" · ")}constructor(e,t,n,s){this.langs=e,this.pollsApi=t,this.snackbar=n,this.props=s,this.isFetching=!0,this.loading=!1,this.selectedAnswers=new Set,this.fetchPoll=async()=>{try{const e=await this.pollsApi.getById({owner_id:this.poll?.owner_id,poll_id:this.poll?.id,is_board:this.poll?.is_board?1:0,extended:1});(0,o.runInAction)((()=>{this.poll=e}))}catch(e){this.snackbar.show({type:"error",text:this.langs.getLang("voting_fetch_poll_failed"),duration:d})}},this.handleVote=async e=>{this.loading=!0;const t=Array.isArray(e);try{await this.pollsApi.addVote({owner_id:this.poll.owner_id,poll_id:this.poll.id,is_board:this.poll?.is_board?1:0,answer_ids:t?e.join(","):String(e)}),await this.fetchPoll()}catch(e){this.snackbar.show({type:"error",text:this.langs.getLang("voting_vote_failed"),duration:d})}finally{(0,o.runInAction)((()=>{this.loading=!1}))}this.handleShowResults()},this.handleSetMultipleAnswer=e=>{this.selectedAnswers.has(e)?this.selectedAnswers.delete(e):this.selectedAnswers.add(e),this.selectedAnswers=new Set(this.selectedAnswers)},this.handleVoteMultiple=async()=>{const e=[...this.selectedAnswers];await this.handleVote(e),this.selectedAnswers=new Set},this.handleDeleteVote=async()=>{this.loading=!0;try{await this.pollsApi.deleteVote({owner_id:this.poll.owner_id,poll_id:this.poll.id,is_board:this.poll?.is_board?1:0}),await this.fetchPoll()}catch(e){this.snackbar.show({type:"error",text:this.langs.getLang("voting_unvote_failed"),duration:d})}finally{(0,o.runInAction)((()=>{this.loading=!1}))}},this.handleShowResults=()=>{this.props.current.pollShowStatsAction(this.poll)},this.handleShowReport=()=>{this.props.current.pollReportAction(this.poll)},this.handleGetCode=()=>{this.props.current.pollGetCodeAction()},this.handleShare=()=>{this.props.current.pollShareAction()},this.poll=s.current.poll,(0,o.makeAutoObservable)(this)}}p=(0,s.__decorate)([c.scope.transient(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===i.Langs?Object:i.Langs,void 0===a.PollsApi?Object:a.PollsApi,void 0===r.Snackbar?Object:r.Snackbar,void 0===c.Props?Object:c.Props])],p);const{Provider:h,useModel:g}=(0,c.createProvider)(p)},453080:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenu:()=>f});var s=n(474848),o=n(194528),i=n(724648),a=n(582192),r=n(837046),c=n(157643),u=n(753457),l=n(723723),d=n(253889),p=n(456921),h=n(820852),g=n(990849),_=n(132028);const m=(0,p.observer)((function(){const e=(0,g.useReactionsMenuModel)(),{props:{current:{reactions:t,onReactionClick:n,isLoadingCountersLineData:p,likedUsersCount:_,reactedUsersPhotos:m,triggerClose:f,onCountersLineClick:b,...v}}}=e;return(0,s.jsxs)("div",{...v,children:[(0,s.jsx)(o.Spacing,{size:11}),(0,s.jsx)(i.Flex,{className:h.default.reactionsList,noWrap:!0,gap:"xl",children:t.map((e=>(0,s.jsx)("div",{children:(0,s.jsx)(d.ReactionItem,{reaction:e,onClick:()=>n?.(e.id)})},e.id)))}),(0,s.jsx)(o.Spacing,{size:20}),(0,s.jsx)(a.Separator,{wide:!0}),(0,s.jsx)(o.Spacing,{size:8}),p&&(0,s.jsx)(r.UsersStack,{size:"s",photos:[{src:"",renderWrapper:()=>(0,s.jsx)(c.Skeleton,{width:24,height:24,circle:!0})},{src:"",renderWrapper:()=>(0,s.jsx)(c.Skeleton,{width:24,height:24,circle:!0})}],children:(0,s.jsx)(c.Skeleton.Text,{height:13,width:"100%",children:" "})}),!p&&(_?(0,s.jsx)(u.Tappable,{hasHover:!1,hasActive:!1,onClick:()=>{b?.(),f?.()},children:m?(0,s.jsx)(r.UsersStack,{size:"m",photos:m,visibleCount:2,count:0,children:e.reactedUsersText}):(0,s.jsx)(u.Footnote,{className:(0,l.getColorClass)("color_text_secondary"),children:e.reactedUsersText})}):(0,s.jsx)(u.Footnote,{className:(0,l.getColorClass)("color_text_secondary"),children:e.reactedUsersText})),(0,s.jsx)(o.Spacing,{size:2})]})})),f=(0,_.createWidget)(g.ReactionsMenuProvider,m)},732577:(e,t,n)=>{"use strict";n.d(t,{ReactionImage:()=>u});var s=n(474848),o=n(8520),i=n(624948),a=n(296540),r=n(293116),c=n(40327);const u=({reaction:e,size:t,playOnce:n,className:u,getRootRef:l,...d})=>{const p=e.asset.images,h=(0,a.useMemo)((()=>(0,o.getPhotoSize)(p,t)),[p,t]),g=e.asset.animation_url,_=t+12,m={"--reaction-image-size":`${t}px`};return(0,s.jsx)("div",{className:(0,o.classNames)(c.default.root,u),style:m,ref:l,...d,children:(0,s.jsx)("div",{className:c.default.animationContainer,children:(0,s.jsx)(i.Lottie,{fallback:h&&(0,s.jsx)(r.Image,{src:h.url,alt:e.title,size:t,noBorder:!0,className:c.default.fallbackImage}),options:{animationUrl:g,group:"reaction_image",loop:n,width:_,height:_}})})})}},275839:(e,t,n)=>{"use strict";n.d(t,{ReactionImage:()=>s.ReactionImage});var s=n(732577)},756067:(e,t,n)=>{"use strict";n.d(t,{ReactionItem:()=>r});var s=n(474848),o=n(753457),i=n(275839),a=n(740501);function r({reaction:e,onClick:t}){return(0,s.jsx)(o.Tooltip,{placement:"top",appearance:"neutral",offsetByMainAxis:22,text:(0,s.jsx)(o.Footnote,{weight:"2",children:e.title}),children:(0,s.jsx)(o.Tappable,{onClick:t,hoverMode:a.default.itemHover,className:a.default.item,children:(0,s.jsx)(i.ReactionImage,{className:a.default.reactionImage,reaction:e,size:36})})})}},253889:(e,t,n)=>{"use strict";n.d(t,{ReactionItem:()=>s.ReactionItem});var s=n(756067)},160683:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenu:()=>s.ReactionsMenu});var s=n(453080)},990849:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuProvider:()=>u,useReactionsMenuModel:()=>l});var s=n(331635),o=n(132028),i=n(327813),a=n(712600),r=n(908671);class c{get reactedUsersText(){const e=this.props.current.likedUsersCount;return 0===e?this.langs.getLang("news_feed_reactions_menu_reacted_users_none"):this.langs.langReplace(this.langs.numeric(e,this.langs.getLang("news_feed_reactions_menu_reacted_users",!0)),{count:(0,r.formatCount)(e)})}constructor(e,t){this.props=e,this.langs=t,(0,i.makeAutoObservable)(this)}}c=(0,s.__decorate)([o.scope.transient(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===o.Props?Object:o.Props,void 0===a.Langs?Object:a.Langs])],c);const{Provider:u,useModel:l}=(0,o.createProvider)(c)},286751:(e,t,n)=>{"use strict";n.d(t,{CoauthorInviteCardWidget:()=>o.CoauthorInviteCardWidget,CoauthorInviteProvider:()=>s.CoauthorInviteProvider,CoauthorInviteState:()=>i.CoauthorInviteState,CoauthorModalMode:()=>r.CoauthorModalMode,CoauthorsRequestModalBody:()=>c.CoauthorsRequestModalBody,CoauthorsRequestModalProvider:()=>a.CoauthorsRequestModalProvider,PollModalProvider:()=>u.PollModalProvider,ReactionsMenu:()=>l.ReactionsMenu,useCoauthorInviteModel:()=>s.useCoauthorInviteModel,useCoauthorsRequestModal:()=>a.useCoauthorsRequestModal,usePollModal:()=>u.usePollModal});var s=n(826929),o=n(723598),i=n(219190),a=n(599141),r=n(790148),c=n(13511),u=n(669177),l=n(160683)},734979:(e,t,n)=>{"use strict";n.d(t,{PollsApi:()=>a});var s=n(331635),o=n(641569),i=n(132028);class a extends o.ApiNamespace{get namespace(){return"polls"}constructor(...e){super(...e),this.getBackgrounds=this.makeMethod("getBackgrounds"),this.getAnswersLimit=this.makeMethod("getAnswersLimit"),this.create=this.makeMethod("create"),this.edit=this.makeMethod("edit"),this.getById=this.makeMethod("getById"),this.addVote=this.makeMethod("addVote"),this.deleteVote=this.makeMethod("deleteVote")}}a=(0,s.__decorate)([i.scope.global()],a)},229745:(e,t,n)=>{"use strict";n.d(t,{WallApi:()=>a});var s=n(331635),o=n(641569),i=n(132028);class a extends o.ApiNamespace{get namespace(){return"wall"}constructor(...e){super(...e),this.get=this.makeMethod("get"),this.getPostById=this.makeMethod("getById"),this.acceptCoOwnership=this.makeMethod("acceptCoOwnership"),this.rejectCoOwnership=this.makeMethod("rejectCoOwnership"),this.parseAttachedLink=this.makeMethod("parseAttachedLink"),this.post=this.makeMethod("post"),this.subscribe=this.makeMethod("subscribe"),this.unsubscribe=this.makeMethod("unsubscribe"),this.getSubscriptions=this.makeMethod("getSubscriptions"),this.edit=this.makeMethod("edit"),this.getPostingSettings=this.makeMethod("getPostingSettings"),this.getCommentsExtended=this.makeMethod("getComments"),this.getCommentExtended=this.makeMethod("getComment"),this.reportPost=this.makeMethod("reportPost"),this.pin=this.makeMethod("pin"),this.unpin=this.makeMethod("unpin"),this.closeComments=this.makeMethod("closeComments"),this.openComments=this.makeMethod("openComments"),this.archive=this.makeMethod("archive"),this.reveal=this.makeMethod("reveal"),this.delete=this.makeMethod("delete"),this.restore=this.makeMethod("restore"),this.deleteComment=this.makeMethod("deleteComment"),this.restoreComment=this.makeMethod("restoreComment"),this.createComment=this.makeMethod("createComment"),this.editComment=this.makeMethod("editComment"),this.getCommentOrder=this.makeMethod("getCommentOrder")}}a=(0,s.__decorate)([i.scope.global()],a)},50790:(e,t,n)=>{"use strict";n.d(t,{useIsMounted:()=>o});var s=n(296540);const o=()=>{const e=(0,s.useRef)(!1);return(0,s.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,s.useCallback)((()=>e.current),[])}},624948:(e,t,n)=>{"use strict";n.d(t,{Lottie:()=>r});var s=n(474848),o=n(8520),i=n(812153),a=n(206968);const r=({play:e,fallback:t,options:n,className:r,style:c,...u})=>{const{width:l,height:d}=n,{lottieContainerRef:p,lottieRendered:h}=(0,i.useLottie)({...n,className:a.default.canvas},{play:e});return(0,s.jsx)("div",{ref:p,...u,className:(0,o.classNames)(a.default.root,r),style:{...c,width:l??c?.width??"100%",height:d??c?.height??"100%"},children:(0,s.jsx)("div",{children:!h&&t})})}},812153:(e,t,n)=>{"use strict";n.d(t,{useLottie:()=>a});var s=n(50790),o=n(296540),i=n(535130);function a(e,{play:t,show:n}={}){const{animationUrl:a,animationData:r}=e,c=(0,o.useRef)(!1),u=(0,o.useRef)(null),l=(0,o.useRef)(null),[d,p]=(0,o.useState)(!1),[h,g]=(0,o.useState)(null),[_,m]=(0,o.useState)(!1),[f,b]=(0,o.useState)(!1),v=(0,s.useIsMounted)();(0,o.useEffect)((()=>{const e=l.current;e&&!_&&(void 0!==t&&(t?e.play():e.pause()),void 0!==n&&(n?e.show():e.hide()))}),[_,t,n]),(0,o.useLayoutEffect)((()=>((async()=>{const t=l.current;t?c.current=!1:(m(!0),b(!1));const n=u.current;if((a||r)&&n&&!c.current){c.current=!0,p(!1),g(null);try{const t=await i.LottieManager.loadAnimation({containers:[n],...e});t.addEventListener("enterFrame",(()=>{requestAnimationFrame((()=>{b(!0)}))}),{once:!0}),t.addEventListener("destroy",(()=>{b(!1)}),{once:!0}),m(!1),l.current=t}catch(e){p(!0),g(e)}v()&&t?.destroy()}})(),()=>{l.current?.destroy()})),[a,r]);return{lottieError:d,lottieLoading:_,lottieLoaded:!_&&!d,lottieRendered:f,lottiePlayerRef:l,lottieContainerRef:u,lottieErrorMessage:h}}},908671:(e,t,n)=>{"use strict";n.d(t,{formatCount:()=>s});const s=(e,t)=>{const n=t?.separator||".",s=t?.maximumFractionDigits??1,o=t?.roundingMode||void 0,i=t?.kLimit||1e3,a=t?.mLimit||1e6,r=t?.bLimit||1e9,c=window.langConfig?.locale||"ru",u=(e,t)=>{"floor"===o&&(e=Math.floor(e*Math.pow(10,s))/Math.pow(10,s));let i=e.toFixed(s);return Number(i).toLocaleString(c).replace(/\./,n)+t};if(e>-i&&e<i)return e.toLocaleString(c);const l=e/r;if(l>=1||l<=-1)return u(e/1e9,"B");const d=e/a;if(d>=1||d<=-1)return u(e/1e6,"M");const p=e/i;return p>=1||p<=-1?u(e/1e3,"K"):String(e)}},470922:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var s=n(94243);function o(e,t){e.classList?e.classList.add(t):(0,s.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},94243:(e,t,n)=>{"use strict";function s(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>s})},878995:(e,t,n)=>{"use strict";function s(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function o(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=s(e.className,t):e.setAttribute("class",s(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>o})},56792:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});const s={root:"BadgesEntrypoint__root--mfogR",separatorWrapper:"BadgesEntrypoint__separatorWrapper--d63Iq",separator:"BadgesEntrypoint__separator--AtVoX"}},820852:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});const s={reactionsList:"ReactionsMenu__reactionsList--0i4BC"}},40327:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});const s={root:"ReactionImage__root--KVE0c",animationContainer:"ReactionImage__animationContainer--BxKFa",fallbackImage:"ReactionImage__fallbackImage--d04hO"}},740501:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});const s={item:"ReactionItem__item--3Zqf4",itemHover:"ReactionItem__itemHover--oQVzW",reactionImage:"ReactionItem__reactionImage--FYP3A"}},206968:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});const s={root:"Lottie__root--UFU5P",canvas:"Lottie__canvas--bb1CE"}},573510:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var s=n(58168),o=n(198587),i=n(777387),a=n(470922),r=n(878995),c=n(296540),u=n(475067),l=n(792403),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,r.default)(e,t)}))},p=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var s=t.resolveArguments(e,n),o=s[0],i=s[1];t.removeClasses(o,"exit"),t.addClass(o,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var s=t.resolveArguments(e,n),o=s[0],i=s[1]?"appear":"enter";t.addClass(o,i,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var s=t.resolveArguments(e,n),o=s[0],i=s[1]?"appear":"enter";t.removeClasses(o,i),t.addClass(o,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,s="string"==typeof n,o=s?""+(s&&n?n+"-":"")+e:n[e];return{baseClassName:o,activeClassName:s?o+"-active":n[e+"Active"],doneClassName:s?o+"-done":n[e+"Done"]}},t}(0,i.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var s=this.getClassNames(t)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&o&&(s+=" "+o),"active"===n&&e&&(0,l.forceReflow)(e),s&&(this.appliedClasses[t][n]=s,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))}(e,s))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],s=n.base,o=n.active,i=n.done;this.appliedClasses[t]={},s&&d(e,s),o&&d(e,o),i&&d(e,i)},n.render=function(){var e=this.props,t=(e.classNames,(0,o.default)(e,["classNames"]));return c.createElement(u.default,(0,s.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c.Component);p.defaultProps={classNames:""},p.propTypes={};const h=p},475067:(e,t,n)=>{"use strict";n.d(t,{default:()=>f});var s=n(198587),o=n(777387),i=n(296540),a=n(440961),r=n(113642),c=n(17241),u=n(792403),l="unmounted",d="exited",p="entering",h="entered",g="exiting",_=function(e){function t(t,n){var s;s=e.call(this,t,n)||this;var o,i=n&&!n.isMounting?t.enter:t.appear;return s.appearStatus=null,t.in?i?(o=d,s.appearStatus=p):o=h:o=t.unmountOnExit||t.mountOnEnter?l:d,s.state={status:o},s.nextCallback=null,s}(0,o.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:d}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==p&&n!==h&&(t=p):n!==p&&n!==h||(t=g)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,s=this.props.timeout;return e=t=n=s,null!=s&&"number"!=typeof s&&(e=s.exit,t=s.enter,n=void 0!==s.appear?s.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===p){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this);n&&(0,u.forceReflow)(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:l})},n.performEnter=function(e){var t=this,n=this.props.enter,s=this.context?this.context.isMounting:e,o=this.props.nodeRef?[s]:[a.findDOMNode(this),s],i=o[0],c=o[1],u=this.getTimeouts(),l=s?u.appear:u.enter;!e&&!n||r.default.disabled?this.safeSetState({status:h},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,c),this.safeSetState({status:p},(function(){t.props.onEntering(i,c),t.onTransitionEnd(l,(function(){t.safeSetState({status:h},(function(){t.props.onEntered(i,c)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),s=this.props.nodeRef?void 0:a.findDOMNode(this);t&&!r.default.disabled?(this.props.onExit(s),this.safeSetState({status:g},(function(){e.props.onExiting(s),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:d},(function(){e.props.onExited(s)}))}))}))):this.safeSetState({status:d},(function(){e.props.onExited(s)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(s){n&&(n=!1,t.nextCallback=null,e(s))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),s=null==e&&!this.props.addEndListener;if(n&&!s){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],r=o[1];this.props.addEndListener(i,r)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,o=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,s.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement(c.default.Provider,{value:null},"function"==typeof n?n(e,o):i.cloneElement(i.Children.only(n),o))},t}(i.Component);function m(){}_.contextType=c.default,_.propTypes={},_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},_.UNMOUNTED=l,_.EXITED=d,_.ENTERING=p,_.ENTERED=h,_.EXITING=g;const f=_},17241:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});const s=n(296540).createContext(null)},113642:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});const s={disabled:!1}},792403:(e,t,n)=>{"use strict";n.d(t,{forceReflow:()=>s});var s=function(e){return e.scrollTop}},777387:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var s=n(363662);function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,s.default)(e,t)}},198587:(e,t,n)=>{"use strict";function s(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}n.d(t,{default:()=>s})},363662:(e,t,n)=>{"use strict";function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}n.d(t,{default:()=>s})}},r={};function __webpack_require__(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return a[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=a,e=[],__webpack_require__.O=(t,n,s,o)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,s,o]=e[u],a=!0,r=0;r<n.length;r++)(!1&o||i>=o)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](n[r])))?n.splice(r--,1):(a=!1,o<i&&(i=o));if(a){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,s,o]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var o=Object.create(null);__webpack_require__.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var a=2&s&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,__webpack_require__.d(o,i),o},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>35782===e?"web/chunks/590c3317.async.106b7299.js":43316===e?"web/chunks/61b3672d.async.3c7c8265.js":80145===e?"web/chunks/2ab756d7.async.177061c7.js":58462===e?"web/chunks/6602413a.async.06896233.js":68938===e?"web/chunks/b1c5eabd.async.89e26e2c.js":20219===e?"web/chunks/4d85fe22.async.5a18fad8.js":8125===e?"web/chunks/90b4a8f8.async.4515aa60.js":51203===e?"web/chunks/miniAppsActionHandlers.f540b673.js":24639===e?"web/chunks/plugins_maps_mmrgl_script_chunk.76448c32.js":30685===e?"web/chunks/plugins_maps_mmrgl_style_chunk.440302d3.js":45458===e?"web/chunks/hls.10eb0a14.js":29884===e?"web/chunks/da84b8d2.async.56b02787.js":55736===e?"web/chunks/9416dc71.async.b1779d8d.js":56380===e?"web/chunks/8e574cd3.async.47d73056.js":37393===e?"web/chunks/0b869b3d.async.b2ee248b.js":65419===e?"web/chunks/8adfffcd.async.85830e77.js":46040===e?"web/chunks/34a9f527.async.ce6a98ff.js":44952===e?"web/chunks/56143671.async.42de387c.js":98271===e?"web/chunks/audio_web_globalPlayerImpl.d8da1ff7.js":30072===e?"web/chunks/showCaptchaPopup.590e73c2.js":19072===e?"web/chunks/left_menu_store.08375fe4.js":42255===e?"web/chunks/wikiModalExampleInitiator.6980f142.js":62203===e?"web/chunks/54a580c2.async.7d013393.js":56965===e?"web/chunks/stories_web_lib.236c4553.js":21953===e?"web/chunks/3a900eb4.async.0de5d7c4.js":42943===e?"web/chunks/video_web_lib.4c8dc45e.js":53927===e?"web/chunks/questions_boxes_web.1cc14edd.js":63148===e?"web/chunks/4db16ae6.async.d2267bdc.js":74336===e?"web/chunks/show_audio_playlist.4a974249.js":96158===e?"web/chunks/495c0275.async.74e6d07d.js":89626===e?"web/chunks/4e4648ce.async.9d56bc0b.js":75220===e?"web/chunks/616039fb.async.f6f5bae3.js":31661===e?"web/chunks/bf526a95.async.97084565.js":17895===e?"web/chunks/money_transfer_box.ad266d45.js":50905===e?"web/chunks/money_transfer.44e8c3f9.js":6827===e?"web/chunks/podcasts_web.45451b44.js":99500===e?"web/chunks/8141264e.async.ec898b72.js":81187===e?"web/chunks/8eeec1d5.async.55951ccb.js":2166===e?"web/chunks/showDonutSubscriptionModal.fe8042fe.js":7790===e?"web/chunks/20ebbd8f.async.8f88ed17.js":96859===e?"web/chunks/f76e7452.async.4587a1da.js":32758===e?"web/chunks/1fe42263.async.de7416ed.js":19129===e?"web/chunks/5f042a86.async.d1502b05.js":84835===e?"web/chunks/unauth_action_box.29fc715f.js":6086===e?"web/chunks/MiniAppsLifecycle.12e22545.js":59886===e?"web/chunks/StoryPublisherV2.d85eddd0.js":29311===e?"web/chunks/feed-client-nav-skeleton.6d469fc5.js":56091===e?"web/chunks/feed-client-nav-async-right-block.3c3bff7f.js":88651===e?"web/chunks/bookmarkClipPost.44b535ee.js":1715===e?"web/chunks/AudioLongtapModal.32ad1109.js":75121===e?"web/chunks/75b8349d.async.0bd4a145.js":26101===e?"web/chunks/030d00cf.async.38a880a1.js":75908===e?"web/chunks/6016368a.async.8570ffab.js":33641===e?"web/chunks/audio_modals_MusicTrackList.c138a0eb.js":51713===e?"web/chunks/voice_message_player.cd9ac644.js":9925===e?"web/chunks/speech.b26566c3.js":97189===e?"web/chunks/BadgesEntrypoint.73753500.js":71208===e?"web/chunks/6aa524d2.async.7378fdbe.js":2153===e?"web/chunks/8c58bd68.async.56c498d4.js":43451===e?"web/chunks/MiniAppService_MiniApp.7ee10eb6.js":12334===e?"web/chunks/stories-perf-metrics.b8260e38.js":13654===e?"web/chunks/6821e80a.async.11ec412e.js":79934===e?"web/chunks/e4ca2309.async.673d139f.js":51943===e?"web/chunks/VideoUpload.60ca6db9.js":73214===e?"web/chunks/SilentModeForms.d3ccbf4d.js":31095===e?"web/chunks/PodcastEpisodeModal.ef9f8cc3.js":35577===e?"web/chunks/CommunityPage_SimilarGroups.74873640.js":17148===e?"web/chunks/CommunityPage_DonutBanner.7cf4aa45.js":74633===e?"web/chunks/CommunityPage_GoalsOnboarding.74e50200.js":85386===e?"web/chunks/donut_modals.6dec8344.js":43162===e?"web/chunks/framer-motion-entrypoint.9763fedf.js":42135===e?"web/chunks/7af1c156.async.33d28229.js":77808===e?"web/chunks/fa888068.async.6b2cc28b.js":69096===e?"web/chunks/fb38e3a3.async.935e9e75.js":10504===e?"web/chunks/StoriesCreatorVKApp.4ef90c60.js":54833===e?"web/chunks/performance-stats.18a136f6.js":9635===e?"web/chunks/9635.f04f4968.js":6261===e?"web/chunks/73e333ce.async.03ce20e8.js":98758===e?"web/chunks/46086065.async.6bfa82c3.js":71881===e?"web/chunks/cd65e2f9.async.7557dd55.js":99454===e?"web/chunks/34fe94d6.async.e77b64f8.js":30821===e?"web/chunks/story_blocks_next.380c5cb5.js":32643===e?"web/chunks/story_blocks.f29a263b.js":99370===e?"web/chunks/VideoEditorModal.788b8bd9.js":95805===e?"web/chunks/PublishClipToVideoModal.d2ba5083.js":99473===e?"web/chunks/3b5cde2d.async.d79d8e7b.js":73509===e?"web/chunks/sharedVideoUploadState.088336bc.js":91906===e?"web/chunks/VideoUploadModal.a63825d3.js":74205===e?"web/chunks/VideoExternalUploadModal.74967ae2.js":64676===e?"web/chunks/85a52a67.async.de3e61f8.js":36637===e?"web/chunks/ClipUploadModal.90ed8a4e.js":18493===e?"web/chunks/AddClipToVideoBlock.18d07b93.js":40953===e?"web/chunks/AddClipToVideoModal.c679b8b2.js":60274===e?"web/chunks/ClipPlayerModule.3cc6cb92.js":75477===e?"chunks/"+e+".35e91db5.js":16848===e?"chunks/"+e+".a28d05cd.js":77955===e?"chunks/"+e+".ec1e24e1.js":30420===e?"chunks/"+e+".edc96122.js":{17356:"web/chunks/videoplayer-interactive",63616:"web/chunks/draggable"}[e]+"."+{17356:"5f2096ae",63616:"27e2b0ef"}[e]+".js",__webpack_require__.miniCssF=e=>51203===e?"web/chunks/3c37af5a.css":30685===e?"web/chunks/34230933.css":{98271:1,74336:1,17895:1,50905:1,6827:1}[e]?"web/chunks/722c5109.css":30072===e?"web/chunks/7040c834.css":2166===e?"web/chunks/388b24b1.css":59886===e?"web/chunks/962b64d7.css":1715===e?"web/chunks/b5fdd079.css":97189===e?"web/chunks/27168087.css":43451===e?"web/chunks/f2caa61f.css":51943===e?"web/chunks/c0f840a7.css":73214===e?"web/chunks/4e008d9c.css":35577===e?"web/chunks/d4bf59ea.css":17148===e?"web/chunks/61832f08.css":85386===e?"web/chunks/b80fe0f8.css":10504===e?"web/chunks/f0489d21.css":30821===e?"web/chunks/d2608c6d.css":32643===e?"web/chunks/076c8fc1.css":99370===e?"web/chunks/81bb4148.css":95805===e?"web/chunks/257e4f7b.css":73509===e?"web/chunks/49e4b942.css":{91906:1,74205:1}[e]?"web/chunks/c0ad2cfd.css":36637===e?"web/chunks/0569ccda.css":18493===e?"web/chunks/798f0393.css":40953===e?"web/chunks/0592332f.css":60274===e?"web/chunks/0e5005d9.css":void 0,__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},__webpack_require__.l=(e,t,n,o)=>{if(s[e])s[e].push(t);else{var i,a;if(void 0!==n)for(var r=document.getElementsByTagName("script"),c=0;c<r.length;c++){var u=r[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")=="vk:"+n){i=u;break}}i||(a=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack","vk:"+n),i.src=e),s[e]=[t];var l=(t,n)=>{i.onerror=i.onload=null,clearTimeout(d);var o=s[e];if(delete s[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((e=>e(n))),t)return t(n)},d=setTimeout(l.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=l.bind(null,i.onerror),i.onload=l.bind(null,i.onload),a&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",o=e=>new Promise(((t,n)=>{var s=__webpack_require__.miniCssF(e),o=__webpack_require__.p+s;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),s=0;s<n.length;s++){var o=(a=n[s]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var i=document.getElementsByTagName("style");for(s=0;s<i.length;s++){var a;if((o=(a=i[s]).getAttribute("data-href"))===e||o===t)return a}})(s,o))return t();((e,t,n,s)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=i=>{if(o.onerror=o.onload=null,"load"===i.type)n();else{var a=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=r,o.parentNode.removeChild(o),s(c)}},o.href=t,document.head.appendChild(o)})(e,o,t,n)})),i={12430:0},__webpack_require__.f.miniCss=(e,t)=>{i[e]?t.push(i[e]):0!==i[e]&&{1715:1,2166:1,6827:1,10504:1,17148:1,17895:1,18493:1,30072:1,30685:1,30821:1,32643:1,35577:1,36637:1,40953:1,43451:1,50905:1,51203:1,51943:1,59886:1,60274:1,73214:1,73509:1,74205:1,74336:1,85386:1,91906:1,95805:1,97189:1,98271:1,99370:1}[e]&&t.push(i[e]=o(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))},(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={12430:0};__webpack_require__.f.j=(t,n)=>{var s=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else if(73509!=t){var o=new Promise(((n,o)=>s=e[t]=[n,o]));n.push(s[2]=o);var i=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(i,(n=>{if(__webpack_require__.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,s[1](a)}}),"chunk-"+t,t)}else e[t]=0},__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var s,o,[i,a,r]=n,c=0;if(i.some((t=>0!==e[t]))){for(s in a)__webpack_require__.o(a,s)&&(__webpack_require__.m[s]=a[s]);if(r)var u=r(__webpack_require__)}for(t&&t(n);c<i.length;c++)o=i[c],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return __webpack_require__.O(u)},n=self.webpackChunkvkweb=self.webpackChunkvkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c=__webpack_require__.O(void 0,[91498,89631,50560,85172,762,21529,79210,99364,81765,23592,97936,61742,59489,73809,9747],(()=>__webpack_require__(164713)));c=__webpack_require__.O(c)})();