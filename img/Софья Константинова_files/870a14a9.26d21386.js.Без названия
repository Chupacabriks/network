"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[33120],{335700:(t,e,i)=>{i.r(e),i.d(e,{UIGallery:()=>h,UI_GALLERY_CLASSNAME:()=>l.UI_GALLERY_CLASSNAME,UI_GALLERY_CONTENT_CLASSNAME:()=>l.UI_GALLERY_CONTENT_CLASSNAME,UI_GALLERY_INNER_CLASSNAME:()=>l.UI_GALLERY_INNER_CLASSNAME,uiGetGallery:()=>c});var s=i(558137),o=i(898848),a=i(939646),n=i(972332),r=i(593159),_=i(754866),l=i(15614);const d=(0,s.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})),{version:0});function c(t){const e=(0,_.domData)((0,_.ge)(t),"gallery-id");return e&&d().galleries[e]}class h{_checkSizesAndUpdate(){return 0!==this._width&&0!==this._itemWidth||(this._width=Math.round((0,_.getSize)(this._el)[0]),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemFullWidth=this._itemWidth+this._itemOffset),!(0===this._width||0===this._itemWidth)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&(this._opts.isModernTransitionsEnabled||(0,n.addEvent)(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this)))}_initArrows(){this._opts.noArrows?(0,_.addClass)(this._el,"ui_gallery_no_arrows"):(this._leftArrow=(0,_.geByClass1)("ui_gallery__arrow_left",this._el),this._rightArrow=(0,_.geByClass1)("ui_gallery__arrow_right",this._el),this._arrowWidth=(0,_.getSize)(this._leftArrow)[0],this._opts.isModernTransitionsEnabled?((0,n.addEvent)(this._leftArrow,"click",this._slide.bind(this,-1,void 0,{eventName:"arrow"})),(0,n.addEvent)(this._rightArrow,"click",this._slide.bind(this,1,void 0,{eventName:"arrow"}))):((0,n.addEvent)(this._leftArrow,"click",this._legacySlide.bind(this,-1,void 0,{eventName:"arrow"})),(0,n.addEvent)(this._rightArrow,"click",this._legacySlide.bind(this,1,void 0,{eventName:"arrow"}))),(0,n.addEvent)(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),(0,n.addEvent)(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),(0,n.addEvent)(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),(0,n.addEvent)(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(t){let e;if("wheel"==t.type)if(Math.abs(t.deltaY)>Math.abs(t.deltaX)){if(!this._opts.scrollY)return;e=-t.deltaY}else{if(!this._opts.scrollX)return;e=-t.deltaX}else if(void 0!==t.wheelDeltaY){if(!this._opts.scrollY)return;e=t.wheelDeltaY}else if(void 0!==t.wheelDelta)e=t.wheelDelta;else{if(!t.detail||1!==t.axis)return;e=-t.detail}e=this._scroll.rtlSame?-e:e,Math.abs(e)>=120&&(e=74*Math.max(-1,Math.min(1,e))),this._innerCont.scrollLeft-=e,this._checkItemsAfterScroll(this._innerCont.scrollLeft),(0,n.cancelEvent)(t)}_getScrollParams(){this._opts.shouldCheckGalleryViewed&&this._checkSizesAndUpdate();const t=this._width-2*this._arrowWidth,e=this._itemFullWidth>t;return{isItemBiggerThanWidth:e,scrollDistance:e?this._itemFullWidth:t}}_legacySlide(t,e,i){const{scrollDistance:s,isItemBiggerThanWidth:o}=this._getScrollParams();let r=this._innerCont.scrollLeft+(this._scroll.rtlSame?-t:t)*s;const l=this._innerCont.scrollWidth-this._width;this._scroll.negative?(r=Math.min(r,0),r=Math.abs(r)):r=Math.max(0,r),r=Math.min(l,r);const d=this._scroll.negative||this._scroll.rtlSame?-t:t;if(d>0&&r<l){r=Math.floor(r/this._itemFullWidth)*this._itemFullWidth}else if(d<0&&r>0){r=(o?Math.ceil(r/this._itemFullWidth):Math.floor(r/this._itemFullWidth))*this._itemFullWidth}if(this._opts.isFullSizeSlide&&(r=(this._visible.left+t)*this._itemFullWidth),0===r||r===l){const e=this._innerCont.scrollWidth;(0,_.addClass)(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),r&&(r+=t*(this._innerCont.scrollWidth-e))}this._scroll.negative&&(r=-r),(0,a.animate)(this._innerCont,{scrollLeft:r},{duration:Math.abs(this._innerCont.scrollLeft-r)+50,transition:a.Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(r),setTimeout((()=>(0,_.removeClass)(this._inner,"ui_gallery__inner_shift_instant")),0),this._opts?.onSlide?.(t,{eventName:i?.eventName}),e&&(0,n.cancelEvent)(e)}_updateShift(t){let e=this._shift+t;const i=this._inner.scrollWidth-this._inner.clientWidth;e>i&&(e=i),e<0&&(e=0),this._shift=e}_slide(t,e,i){const{scrollDistance:s}=this._getScrollParams();this._updateShift(t*s),this._inner.style.transform=`translate3d(${-1*this._shift}px, 0, 0)`,this._checkItemsAfterScroll(this._shift),this._opts?.onSlide?.(t,{eventName:i?.eventName}),e&&(0,n.cancelEvent)(e)}_checkItemsAfterScroll(t,e){if(this._scroll.negative&&(t=Math.abs(t)),(!this._opts.shouldCheckGalleryViewed||this._visible.isGalleryViewed)&&(!this._opts.shouldCheckGalleryViewed||this._checkSizesAndUpdate())){if(this._opts.markOutside||this._opts.onViewItem){const i=this._itemWidth/3,s=(this._scroll.backward?this._inner.scrollWidth-this._width-t:t)-this._scrollOffset,o=t&&Math.floor(s/this._itemFullWidth),a=o*this._itemFullWidth+2*i;let n;n=this._scroll.backward?t+this._width<this._inner.scrollWidth-a:t>a;const l=Math.min(this._items.length-1,Math.floor((s+this._width)/this._itemFullWidth)),d=l*this._itemFullWidth+2*i;let c;if(c=this._scroll.backward?t>this._inner.scrollWidth-d:t+this._width<d,this._opts.onViewItem){const t=n?Math.min(this._items.length-1,o+1):o,i=c?Math.max(0,l-1):l;if(e||t!==this._visible.left||i!==this._visible.right){for(let s=t;s<=i;s++)(this._visible.left<0||e&&!(0,r.inArray)(this._items[s],this._visible.items)||s<this._visible.left||s>this._visible.right)&&this._opts.onViewItem(this._items[s],s);this._visible.left=t,this._visible.right=i,this._visible.items=this._items.slice(t,i+1)}}this._opts.markOutside&&(e?((0,_.geByClass)("ui_gallery_item_outside",this._inner).forEach((t=>{(0,_.removeClass)(t,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((o!==this._outside.left||!n)&&this._outside.left>=0&&((0,_.removeClass)(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(l!==this._outside.right||!c)&&this._outside.right>=0&&((0,_.removeClass)(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),n&&o!==this._outside.left&&((0,_.addClass)(this._items[o],"ui_gallery_item_outside"),this._outside.left=o),c&&l!==this._outside.right&&((0,_.addClass)(this._items[l],"ui_gallery_item_outside"),this._outside.right=l))}if(!this._opts.noArrows){const e=t>0,i=t+this._width<this._inner.scrollWidth;(0,_.toggleClass)(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?i:e),(0,_.toggleClass)(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?e:i)}(!this._scroll.backward&&this._inner.scrollWidth-t-this._width<1e3||this._scroll.backward&&t<1e3)&&this._onLoadMore()}}_onArrowMouseOver(t){this._inner.classList.add(`ui_gallery__inner_shift_${t}`)}_onArrowMouseOut(){this._inner.classList.remove("ui_gallery__inner_shift_left"),this._inner.classList.remove("ui_gallery__inner_shift_right")}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(t,e){t=t||[],this.addItems(t),this._finised=!!e||!t.length,this._loadingMore=!1}addItems(t,e){if((t=t||[]).length){const i=e>=0&&e<this._items.length?this._items[e]:null;t.forEach((t=>{i?(0,_.domInsertBefore)(t,i):this._inner.appendChild(t)})),this.refresh()}}destroy(){(0,n.removeEvent)(this._innerCont),(0,n.removeEvent)(this._leftArrow),(0,n.removeEvent)(this._rightArrow),(0,_.domData)(this._el,"gallery-id",null),delete d().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),(0,_.re)(this._el)}removeItem(t){return(0,o.isNumeric)(t)&&(t=this._items[t]),!(!t||!(0,r.inArray)(t,this._items))&&((0,_.re)(t),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}scrollToDirection(t){this._opts.isModernTransitionsEnabled?this._slide(t,void 0,{eventName:"bullet"}):this._legacySlide(t,void 0,{eventName:"bullet"})}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((t,e)=>[t,this._visible.left+e]))}setGalleryViewed(){this._visible.isGalleryViewed=!0,this._checkItemsAfterScroll(this._innerCont.scrollLeft)}constructor(t,e){if(!t)throw new Error("No element was provided for UIGallery");if(!(t=(0,_.ge)(t)).classList.contains(l.UI_GALLERY_CLASSNAME))throw new Error("Provided incorrect element for UIGallery");const i=c(t);if(i)return i;this._opts=(0,r.extend)({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1,isFullSizeSlide:!1,isModernTransitionsEnabled:!1},e),this._id=d().incIndex,d().incIndex+=1,this._el=t,this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemOffset=(0,r.intval)((0,_.getStyle)(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=(0,r.intval)((0,_.getStyle)(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=(0,_.geByClass1)(l.UI_GALLERY_CONTENT_CLASSNAME,this._el),this._inner=(0,_.geByClass1)(l.UI_GALLERY_INNER_CLASSNAME,this._el),this._opts.isModernTransitionsEnabled&&(this._shift=0,this._inner.classList.add("ui_gallery__inner--withTransitions")),this._scroll=function(){const t={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return t;if(!cur._scrollInfo){const e=(0,_.se)('<div style="position: fixed; left: -1000px; width: 0; overflow: scroll">x</div>'),i=document.querySelector("#content");i?.appendChild(e);const s=e.scrollLeft;t.rtl=vk.rtl,t.backward=s>0,e.scrollLeft=1e3,t.delta=e.scrollLeft===s?-1:1,t.negative=!t.backward&&t.delta<0,t.rtlSame=t.rtl&&!t.backward&&!t.negative,(0,_.re)(e),cur._scrollInfo=t}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[],isGalleryViewed:!1},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),(0,_.domData)(this._el,"gallery-id",this._id),d().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}}},586573:(t,e,i)=>{i.r(e),i.d(e,{UiScroll:()=>d,default:()=>c});var s=i(575753),o=i(898848),a=i(593159),n=i(754866),r=i(972332),_=i(939646),l=i(97639);class d{init(){if(this.options.stopScrollPropagation&&this.fixBlocker(),!this.inited){if(!this.el.container.scrollWidth||this.disabled)return;this.fixSize(!0),this.options.autoresize&&this.startResizeListening(),this.options.global||cur.destroy.push(this.destroy.bind(this)),this.inited=!0}return this.update(!0),this.api}addEvent(t,e,i,s){return this.removeEvents.push([t,e,i]),(0,r.addEvent)(t,e,i,void 0,void 0,s?{passive:!0}:void 0),i}destroy(){if(this.disabled=!0,this.fixSize(),this.animation&&this.animation.stop(),this.moreTimeout&&clearTimeout(this.moreTimeout),this.dragstopHandler&&(0,r.removeEvent)(document,"mouseup contextmenu",this.dragstopHandler),this.dragHandler&&(0,r.removeEvent)(document,"mousemove",this.dragHandler),(0,a.each)(this.removeEvents,(function(t,e){r.removeEvent.apply(null,e)})),this.el.overflow.parentNode==this.el.container){const t=(0,n.cf)();for(;this.el.content.firstChild;)t.appendChild(this.el.content.firstChild);this.el.container.appendChild(t)}return(0,n.removeData)(this.el.container,"ui-scroll"),this.el.container.className=this.el.container.className.replace(/\bui_scroll_.+?\b/g," "),(0,a.each)(this.removeElements,(function(t,e){(0,n.re)(e)})),this.el.container.scrollTop=this.api.data.scrollTop,delete this.el.container.__uiScroll__,this.api}updateAbove(t){if((0,a.isFunction)(t)){this.animation&&this.animation.stop();const e=this.el.outer.scrollHeight-this.el.outer.scrollTop-this.el.overflow.offsetHeight;t(),this.el.outer.scrollTop=this.el.outer.scrollHeight-this.el.overflow.offsetHeight-e}return this.api}updateBelow(t){if((0,a.isFunction)(t)){this.animation&&this.animation.stop();const e=this.options.preserveEdgeBelow&&this.api.data.scrollBottom<=this.options.preserveEdgeBelowThreshold;t(),e&&this.scrollBottom(!1)}return this.api}fixBlocker(){s.browser.chrome&&!this.options.noForceReFlow&&this.forceReFlow(),this.el.blocker.scrollTop=this.blockerScrollTop}forceReFlow(){this.el.blocker.style.display="inline-block",this.el.blocker.offsetHeight,this.el.blocker.style.display=""}fixSize(t){this.options.native||(t&&null==this.fixSizeDefault&&(this.fixSizeDefault=this.el.container.style.width),(0,n.setStyle)(this.el.container,"width",t?(0,n.getSize)(this.el.container,!0)[0]||this.fixSizeDefault||"":this.fixSizeDefault||""))}emitEvent(t){this.disabled||this.inited&&this.emitter.emitEvent(t,[this.api])}static scrollEventDelta(t){let e=0;const i=void 0!==t.deltaMode?t.deltaMode:"MozMousePixelScroll"==t.type?0:1;return"wheel"==t.type?e=t.deltaY:void 0!==t.wheelDeltaX&&void 0!==t.wheelDeltaY?(e=1/40*-t.wheelDeltaY,s.browser.mac&&s.browser.opera&&(e*=.1)):void 0!==t.wheelDelta?e=1/40*-t.wheelDelta:t.detail&&2===t.axis&&(e=t.detail),e*(1==i?15:2==i?450:1)}isScrollEventUnused(t){return d.scrollEventDelta(t)>0?!this.api.data.scrollBottom:!this.api.data.scrollTop}resize(t){if(!t&&this.options.preserveEdgeBelow){const e=this.options.preserveEdgeBelow&&this.api.data.scrollBottom<=this.options.preserveEdgeBelowThreshold;this.update(!0)&&(this.emitEvent("resize"),e&&this.scrollBottom(),this.options.stopScrollPropagation&&!t&&this.fixBlocker())}else this.update(!0)&&(this.options.stopScrollPropagation&&!t&&this.fixBlocker(),this.emitEvent("resize"))}disable(t){return this.disabled=!!t,t?(this.animation&&this.animation.stop(),this.fixSize()):(this.fixSize(!0),this.options.stopScrollPropagation&&this.fixBlocker(),this.update(!0)),(0,n.toggleClass)(this.el.container,"ui_scroll_disabled",this.disabled),this.api}dragstart(t){if(!(this.disabled||this.dragging||this.options.native))return t||(t=window.event),this.dragging=!0,this.animation&&this.animation.stop(),this.options.reversed&&(this.noMore=!0),(0,r.addEvent)(document,"mouseup contextmenu",this.dragstartHandler=this.dragstop.bind(this)),(0,r.addEvent)(document,"mousemove",this.dragHandler=this.drag.bind(this)),this.dragScroll=this.options.reversed?this.api.data.scrollBottom:this.api.data.scrollTop,this.dragY=t.screenY,(0,r.cancelEvent)(t),this.emitEvent("dragstart"),this.api}dragstop(t){if(!this.disabled&&this.dragging&&!this.options.native){if(t||(t=window.event),this.dragging=!1,this.dragstopHandler&&(0,r.removeEvent)(document,"mouseup contextmenu",this.dragstopHandler),this.dragHandler&&(0,r.removeEvent)(document,"mousemove",this.dragHandler),(0,n.setStyle)(document.body,"cursor",""),(0,n.removeClass)(this.el.container,"ui_scroll_dragging"),this.dragged)this.noMore&&(this.noMore=!1,this.more());else{this.options.reversed&&(this.noMore=!0);const e=(t.pageY-(0,n.getXY)(this.el.barOuter)[1]-this.barInnerHeight/2)*(Math.max(this.options.minContentHeight,this.api.data.scrollHeight)-this.api.data.viewportHeight)/(this.barOuterHeight-this.barInnerHeight);this.scrollTop(!1,e,0,function(){this.noMore&&(this.noMore=!1,this.more())}.bind(this))}return this.dragged=!1,t&&"contextmenu"!==t.type&&(0,r.cancelEvent)(t),this.emitEvent("dragstop"),this.api}}drag(t){if(this.disabled||!this.dragging||this.options.native)return;t||(t=window.event);const e=(t.screenY-this.dragY)*(this.api.data.scrollHeight/this.el.barOuter.scrollHeight);return this.el.outer.scrollTop=this.options.reversed?this.el.outer.scrollHeight-this.el.overflow.offsetHeight-this.dragScroll+e:this.dragScroll+e,this.dragged||(this.dragged=!0,(0,n.setStyle)(document.body,"cursor","pointer"),(0,n.addClass)(this.el.container,"ui_scroll_dragging")),(0,r.cancelEvent)(t),this.emitEvent("drag"),this.api}scroll(t,e,i){return this.animation&&this.animation.stop(),this.el.outer.scrollTop==t&&this.update(!0),e?(e="number"!=typeof e||!isFinite(e)||e%1?300:Math.abs(e),this.animation=new _.Fx.Base({scrollTop:this.el.outer.scrollTop},{transition:_.Fx.Transitions.easeOutCubic,onStep:function(t){this.el.outer.scrollTop=t.scrollTop}.bind(this),duration:e,onComplete:(0,a.isFunction)(i)?i.pbind(this.api):void 0}).start({scrollTop:this.el.outer.scrollTop},{scrollTop:t})):(this.el.outer.scrollTop=t,(0,a.isFunction)(i)&&i(this.api)),this.api}scrollTop(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),!this.disabled&&!this.dragging)return this.scroll((0,a.intval)(e),i,s)}scrollBottom(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),!this.disabled&&!this.dragging)return this.scroll(this.el.outer.scrollHeight-this.el.overflow.offsetHeight-(0,a.intval)(e),i,s)}scrollBy(t,e,i){if(!this.disabled&&!this.dragging)return this.scroll(this.el.outer.scrollTop+(0,a.intval)(t),e,i)}scrollIntoView(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),(e=(0,l.getScrollElement)(e))&&e.compareDocumentPosition&&e.compareDocumentPosition(this.el.content)&Node.DOCUMENT_POSITION_CONTAINS){const t=(0,n.getXY)(e)[1],o=(0,n.getXY)(this.el.overflow)[1],r=(0,n.getSize)(e)[1];if(t<=o&&t+r>=o+this.api.data.viewportHeight||t>=o&&t+r<=o+this.api.data.viewportHeight)(0,a.isFunction)(s)&&(i?setTimeout(s.bind(this.api),0):s(this.api));else if(r>this.api.data.viewportHeight||t<o)this.scrollTop(!1,t-o+this.api.data.scrollTop-(this.options.shadows?(0,n.getSize)(this.el.shadowTop)[1]:0),i,s);else{const e=this.options.shadows?(0,n.getSize)(this.el.shadowBottom)[1]:0;this.scrollTop(!1,t-o+this.api.data.scrollTop+r-this.api.data.viewportHeight+e,i,s)}}return this.api}update(t){let e,i;this.el.container&&!this.el.container.updateScroll&&(this.el.container.updateScroll=this.update.bind(this,!1));const s=this.el.outer.scrollTop;if(this.inited&&!this.disabled&&(t&&(e=this.el.inner.offsetHeight,this.api.data.viewportHeight!==(this.api.data.viewportHeight=this.el.overflow.offsetHeight)||this.api.data.scrollHeight!==e)||this.api.data.scrollTop!==s)){if(t&&(this.api.data.scrollHeight=e),this.api.data.scrollTop=Math.max(0,Math.min(this.api.data.scrollHeight-this.api.data.viewportHeight,Math.max(0,s))),this.api.data.scrollBottom=Math.max(0,this.api.data.scrollHeight-this.api.data.scrollTop-this.api.data.viewportHeight),!this.options.native){if(e=Math.max(this.options.minContentHeight,this.api.data.scrollHeight),i=e<=this.api.data.viewportHeight,!i){const i=this.el.barOuter.offsetHeight;(t||this.barOuterHeight!==i)&&(this.barOuterHeight=i,this.barInnerHeight=Math.max(this.options.barMinHeight,this.barOuterHeight*this.api.data.viewportHeight/e),this.el.barInner.style.height=this.barInnerHeight+"px"),(0,l.nextFrame)((()=>{const t=(this.barOuterHeight-this.barInnerHeight)*this.api.data.scrollTop/(e-this.api.data.viewportHeight);this.el.barInner.style.transform=`translateY(${t}px)`}))}this.options.shadows&&(this.shadowTop!=(this.api.data.scrollTop&&!i)&&(0,n.toggleClass)(this.el.container,"ui_scroll_shadow_top_visible",this.shadowTop=this.api.data.scrollTop&&!i),this.shadowBottom!=(this.api.data.scrollBottom&&!i)&&(0,n.toggleClass)(this.el.container,"ui_scroll_shadow_bottom_visible",this.shadowBottom=this.api.data.scrollBottom&&!i)),this.unnecessary!==i&&((0,n.toggleClass)(this.el.container,"ui_scroll_unnecessary",i),this.unnecessary=i,this.options.stopScrollPropagation&&this.fixBlocker(),i&&this.barInnerHeight&&this.barOuterHeight&&(0,l.nextFrame)(function(t){this.el.barInner.style.height=100*this.barInnerHeight/this.barOuterHeight+"%";const i=(this.barOuterHeight-this.barInnerHeight)*this.api.data.scrollTop/(e-this.api.data.viewportHeight)*100/this.barInnerHeight;this.el.barInner.style.transform=`translateY(${i}%)`}.bind(this)))}return this.emitEvent("update"),(!this.options.reversed||s>=0)&&this.more(),!0}return!1}more(){const t=this.options.reversed?this.api.data.scrollTop:this.api.data.scrollBottom,e=null!==this.options.onmoreThreshold?this.options.onmoreThreshold:2*this.api.data.viewportHeight;!this.noMore&&t<=e&&this.emitEvent("more")}constructor(t,e){if(!(t=(0,l.getScrollElement)(t)))throw new Error("uiScroll container is undefined");t.__uiScroll__&&t.__uiScroll__.destroy(),this.options=(0,a.extend)({global:!1,native:!1,theme:"default",reversed:!1,autoresize:!0,preserveEdgeBelow:!1,barMinHeight:30,preserveEdgeBelowThreshold:20,stopScrollPropagation:!0,stopScrollPropagationAlways:!1,minContentHeight:0,onmoreThreshold:null,hidden:!1,shadows:!1,scrollElements:[],onresize:null,onscroll:null,onscrollstart:null,onscrollstop:null,ondrag:null,ondragstart:null,ondragstop:null,onupdate:null,onmore:null,noForceReFlow:!1},e),this.options.native&&(this.options.shadows=!1),s.browser.mobile&&(this.options.stopScrollPropagation=!1),(0,o.isArray)(this.options.scrollElements)||(this.options.scrollElements=[]),this.removeEvents=[],this.removeElements=[],this.dragging=!1,this.dragged=!1,this.released=!0,this.noMore=!1,this.dragY=null,this.dragScroll=null,this.shadowTop=!1,this.shadowBottom=!1,this.unnecessary=!1,this.disabled=!1,this.stopped=!0,this.stoppedTimeout=null,this.fixSizeDefault=null,this.animation=null,this.barOuterHeight=null,this.barInnerHeight=null,this.currentFrame=null,this.blockerScrollTop=500,this.emitter=new EventEmitter,(0,a.isFunction)(this.options.onresize)&&this.emitter.addListener("resize",this.options.onresize),(0,a.isFunction)(this.options.onscroll)&&this.emitter.addListener("scroll",this.options.onscroll),(0,a.isFunction)(this.options.onscrollstart)&&this.emitter.addListener("scrollstart",this.options.onscrollstart),(0,a.isFunction)(this.options.onscrollstop)&&this.emitter.addListener("scrollstop",this.options.onscrollstop),(0,a.isFunction)(this.options.ondrag)&&this.emitter.addListener("drag",this.options.ondrag),(0,a.isFunction)(this.options.ondragstart)&&this.emitter.addListener("dragstart",this.options.ondragstart),(0,a.isFunction)(this.options.ondragstop)&&this.emitter.addListener("dragstop",this.options.ondragstop),(0,a.isFunction)(this.options.onupdate)&&this.emitter.addListener("update",this.options.onupdate),(0,a.isFunction)(this.options.onmore)&&this.emitter.addListener("more",this.options.onmore),this.el={container:t,overflow:(0,n.ce)("div",{className:"ui_scroll_overflow"}),outer:(0,n.ce)("div",{className:"ui_scroll_outer"},{margin:this.options.stopScrollPropagation?this.blockerScrollTop+"px 0":void 0}),inner:(0,n.ce)("div",{className:"ui_scroll_inner tt_noappend"}),shadowTop:(0,n.ce)("div",{className:"ui_scroll_shadow_top"}),shadowBottom:(0,n.ce)("div",{className:"ui_scroll_shadow_bottom"}),content:(0,n.ce)("div",{className:"ui_scroll_content clear_fix"}),barContainer:(0,n.ce)("div",{className:"ui_scroll_bar_container"}),barOuter:(0,n.ce)("div",{className:"ui_scroll_bar_outer"}),barInner:(0,n.ce)("div",{className:"ui_scroll_bar_inner"})},(0,n.data)(this.el.container,"ui-scroll",this);const i=(0,n.cf)(),_=["ui_scroll_container"];for((0,a.each)((0,o.isArray)(this.options.theme)?this.options.theme:(0,a.trim)(this.options.theme+"").split(/\s+/),(function(t,e){e&&_.push("ui_scroll_"+e+"_theme")})),(0,n.addClass)(this.el.container,_.join(" ")),this.options.hidden&&(0,n.addClass)(this.el.container,"ui_scroll_hidden");this.el.container.firstChild;)this.el.content.appendChild(this.el.container.firstChild);if(this.el.outer.appendChild(this.el.inner),this.el.inner.appendChild(this.el.content),this.options.stopScrollPropagation?(this.el.blocker=(0,n.ce)("div",{className:"ui_scroll_blocker"}),this.addEvent(this.el.blocker,"scroll",this.fixBlocker.bind(this),!0),this.el.blocker.appendChild(this.el.outer),this.el.overflow.appendChild(this.el.blocker)):this.el.overflow.appendChild(this.el.outer),i.appendChild(this.el.overflow),this.options.native?(0,n.addClass)(this.el.container,"ui_scroll_native"):(this.el.barOuter.appendChild(this.el.barInner),this.el.barContainer.appendChild(this.el.barOuter),i.appendChild(this.el.barContainer),this.options.shadows&&(this.el.overflow.appendChild(this.el.shadowTop),this.el.overflow.appendChild(this.el.shadowBottom)),s.browser.mobile||this.options.scrollElements.push(this.el.barContainer)),this.options.autoresize){const t=(0,l.addResizeSensor)(this.el.inner,this.resize.bind(this,!0)),e=(0,l.addResizeSensor)(this.el.overflow,this.resize.bind(this,!1));this.removeElements.push(t[0]),this.removeElements.push(e[0]),this.startResizeListening=function(){t[1](),e[1]()}}this.removeElements.push(this.el.overflow,this.el.barContainer),this.el.container.appendChild(i),this.options.reversed&&(this.el.outer.scrollTop=this.el.outer.scrollHeight),this.el.container.__uiScroll__=this.api={container:this.el.container,scroller:this.el.outer,content:this.el.content,emitter:this.emitter,ondragstart:this.dragstart.bind(this),ondragstop:this.dragstop.bind(this),ondrag:this.drag.bind(this),destroy:this.destroy.bind(this),disable:this.disable.bind(this,!0),enable:this.disable.bind(this,!1),scrollTop:this.scrollTop.bind(this,!0),scrollBottom:this.scrollBottom.bind(this,!0),scrollBy:this.scrollBy.bind(this),scrollIntoView:this.scrollIntoView.bind(this,!0),update:this.init.bind(this),updateAbove:this.updateAbove.bind(this),updateBelow:this.updateBelow.bind(this),data:{scrollTop:null,scrollBottom:null,scrollHeight:null,viewportHeight:null}},this.init();const c="onwheel"in this.el.outer?"wheel":void 0!==document.onmousewheel?"mousewheel":s.browser.mozilla?"MozMousePixelScroll":"DOMMouseScroll";return this.addEvent(this.el.container,c,function(t){this.animation&&this.animation.stop(),!this.disabled&&this.options.stopScrollPropagation&&(this.unnecessary?this.options.stopScrollPropagationAlways&&(0,r.cancelEvent)(t):this.isScrollEventUnused(t)?(0,r.cancelEvent)(t):(0,r.stopEvent)(t))}.bind(this),!this.options.stopScrollPropagation),this.options.native||this.addEvent(this.el.barContainer,"mousedown",this.dragstart.bind(this)),(0,a.each)(this.options.scrollElements,function(t,e){this.addEvent(e,c,function(t){this.disabled||this.unnecessary||(this.scrollBy(d.scrollEventDelta(t)),!this.options.stopScrollPropagation&&this.isScrollEventUnused(t)||(0,r.cancelEvent)(t))}.bind(this))}.bind(this)),this.options.reversed&&this.addEvent(this.el.container,"mousedown touchstart pointerdown",function(t){this.released=!1,this.noMore=!0;const e=this.addEvent(document,"mouseup contextmenu touchend pointerup",function(t){(0,r.removeEvent)(document,"mouseup contextmenu touchend pointerup",e),this.released=!0,this.noMore&&this.stopped&&!this.dragging&&(this.noMore=!1,this.more())}.bind(this))}.bind(this)),this.addEvent(this.el.outer,"scroll",function(){this.update()&&(this.stopped?(this.stopped=!1,this.emitEvent("scrollstart")):this.options.native||!1!==this.stopped||(this.stopped=0,(0,n.addClass)(this.el.container,"ui_scroll_scrolled")),this.emitEvent("scroll"),this.stoppedTimeout&&clearTimeout(this.stoppedTimeout),this.stoppedTimeout=setTimeout(function(){this.stopped||(this.stopped=!0,this.options.native||(0,n.removeClass)(this.el.container,"ui_scroll_scrolled"),this.emitEvent("scrollstop"),this.noMore&&this.released&&!this.dragging&&(this.noMore=!1,this.more()))}.bind(this),200))}.bind(this)),this.api}}d.addResizeSensor=l.addResizeSensor;const c=d},97639:(t,e,i)=>{i.d(e,{addResizeSensor:()=>c,getScrollElement:()=>d,nextFrame:()=>l});var s=i(593159),o=i(754866),a=i(575753);let n;const r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(t=>setTimeout(t,1)),_=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;function l(t){n&&_(n),n=r(t)}function d(t){return(0,s.isString)(t)&&"_"===t[0]?(0,o.geByClass1)(t):(0,o.ge)(t)}function c(t,e){if((t=d(t))&&(0,s.isFunction)(e)){if(a.browser.msie9||a.browser.opera&&a.browser.version<13){let i=!1,n=!1;const r=(0,o.ce)("object",{type:"text/html",className:"ui_scroll_resize_object",data:"about:blank",onload:function(){n=!0,i&&_()}});function _(){if(!r.contentDocument)return setTimeout(_,100);r.contentDocument.defaultView.removeEventListener("resize",e),r.contentDocument.defaultView.addEventListener("resize",e),e()}return t.appendChild(r),t.__resizeSensor__=[r,function(){i=!0,n&&_()}]}{const l=(0,o.ce)("div",{className:"ui_scroll_resize_sensor"}),c=(0,o.ce)("div",{className:"ui_scroll_resize_sensor ui_scroll_resize_expand"}),h=(0,o.ce)("div",{className:"ui_scroll_resize_sensor ui_scroll_resize_shrink"}),u=(0,o.ce)("div"),p=(0,o.ce)("div");let m=null;return c.appendChild(u),h.appendChild(p),l.appendChild(c),l.appendChild(h),t.appendChild(l),t.__resizeSensor__=[l,c.onscroll=h.onscroll=function(){const i=(t.offsetWidth||1e4)+10,s=(t.offsetHeight||1e4)+10;u.style.width=i+"px",u.style.height=s+"px",c.scrollLeft=i,c.scrollTop=s,h.scrollLeft=i,h.scrollTop=s,m!==(m=i+" "+s)&&e()}]}}}},257168:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(754866),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(749284),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(593159),_web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(250598),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(972332),_web_legacy_ui_ui_tabs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(693488),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(575753),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(237625),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(672277);const SEARCH_FOCUSED_CLASS="search_focused",uiSearch={destroy:function(t){const e=uiSearch.getFieldEl(t);uiSearch.stopEvents(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeData)(e)},getWrapEl:function(t){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_wrap",t)},getFieldEl:function(t){return t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)("_field",t)?t:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(uiSearch.getWrapEl(t),"_field")},stopEvents:function(t){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(e,(function(t,e){e.stop()}))},startEvents:function(t){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(e,(function(t,e){e.stop(),e.start()}))},init:function(el,options){if(!el)return;if(el=uiSearch.getFieldEl(el),!el)return;const wrapEl=uiSearch.getWrapEl(el),delayedInitOptions=!options&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options");if(delayedInitOptions){const evalScript="(function() { return "+delayedInitOptions+" })()";try{const initOptions=eval(evalScript);initOptions?.suggester?.useCatalogSuggest?setTimeout((()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options",null)),0):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options",null),uiSearch.init(el,initOptions)}catch(t){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(t,evalScript)}return}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"inited"))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"inited",1);const onKeyDown=uiSearch.onKeyDown.pbind(el),onBuffer=function(t){if("input"===t.type&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__.browser.msie){const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(el);if(t===((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(el,"prev-value")||""))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(el,"prev-value",t)}setTimeout(uiSearch.onChanged.pbind(el,!1,t),0)};(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_1__.placeholderInit)(el),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"opts",options);const onFocus=t=>{if(options.focusedModifierTargetSelector){const t=document.querySelector(options.focusedModifierTargetSelector);t?.classList.add(SEARCH_FOCUSED_CLASS)}options.onFocus?.(t)},onBlur=t=>{if(options.focusedModifierTargetSelector){const t=document.querySelector(options.focusedModifierTargetSelector);t?.classList.remove(SEARCH_FOCUSED_CLASS)}options.onBlur?.(t)};let mainHandler;if(options.suggester)options.suggester.useCatalogSuggest=!!options?.suggester?.useCatalogSuggest,options.suggester.useCatalogSuggest||(options.suggester.instance=new Suggester(el,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.extend)(options.suggester,{type:options.suggester.type,historyItems:!!options.suggester.history&&options.suggester.historyItems,onSearch:function(t,e,i,s,o){t||(options.allowFiltersForEmpty||uiSearch.removeAllFilters(el),uiSearch.hideProgress(el)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(wrapEl,"ui_search_field_empty",!t),uiSearch.handleAriaAttributes(wrapEl,t),options.onChange&&options.onChange.call(el,t,e,i,s,o)}}))),mainHandler={start:function(){onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"focus",onFocus)},stop:function(){onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"focus",onFocus)}};else{const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_ui_search_button_search",wrapEl),e=function(t){uiSearch.onEnter(el,t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(el)};mainHandler={start:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"keydown",onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"paste cut input",onBuffer),onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"focus",onFocus),t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(t,"click",e)},stop:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"keydown",onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"paste cut input",onBuffer),onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"focus",onFocus),t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(t,"click",e)}}}if(mainHandler.start(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"eventHandlers",[mainHandler]),options.params){const content=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(options.params.html)),newOptions=options?.suggester?.useCatalogSuggest?{forceSide:"bottom",setPos:()=>({left:"auto",top:"52px"})}:{};options.paramsTooltip=new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_3__.ElementTooltip((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_ui_search_params_button",wrapEl),{appendTo:wrapEl,content,autoShow:!1,customShow:!0,shift:options.params.shift?options.params.shift:0,offset:[0,-2],...newOptions}),options.paramsTooltip.build(),options?.suggester?.useCatalogSuggest&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(options.paramsTooltip._ttel,{right:0}),setTimeout((function(){(function initScript(){try{eval(options.params.script)}catch(t){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(t,options.params.script)}}).call(el)}))}options.fixed&&uiSearch.setFixed(el),options.noAutoDestroy||cur.destroy.push(uiSearch.stopEvents.pbind(el)),uiSearch.initFilters(el,options),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.isFunction)(options.onInit)&&options.onInit(el,options)},getOptions:function(t){let e;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(t,"_field"))e=t;else{const i=uiSearch.getWrapEl(t);e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_field",i)}return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"opts")||{}},toggleParameters:function(t){const e=uiSearch.getOptions(t);e.paramsTooltip&&e.paramsTooltip.toggle()},hideParameters:function(t){const e=uiSearch.getOptions(t);e&&e.paramsTooltip&&e.paramsTooltip.hide()},saveHistorySearch:function(t,e,i,s,o,a){e||(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(t));const n=uiSearch.getOptions(t);n.suggester&&n.suggester.instance&&n.suggester.instance.saveHistoryItem(e,i,s,o,a)},onEnter:function(t,e){t=uiSearch.getFieldEl(t);const i=uiSearch.getOptions(t),s=t.getValue?t.getValue():t.value;return i.onEnter&&i.onEnter(t,s,e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e)},onKeyDown:function(t,e){if(cur.preventInputActions&&-1!=[_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.RETURN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.ESC,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.DOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.UP].indexOf(e.keyCode))return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e);if(e.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.RETURN)return uiSearch.onEnter(t,e);if(e.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.ESC){const i=!!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(t);return uiSearch.reset(t,!1,e),!i||(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e)}setTimeout.pbind(uiSearch.onChanged.pbind(t,!1,e),0)},onChanged:function(t,e,i){t=uiSearch.getFieldEl(t);const s=uiSearch.getOptions(t),o=uiSearch.getWrapEl(t),a=t.getValue?t.getValue():t.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(o,"ui_search_field_empty",!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(a)),uiSearch.handleAriaAttributes(o,a),a||s.allowFiltersForEmpty||uiSearch.removeAllFilters(t),e||s.onChange&&s.onChange.call(t,a,i)},focus:function(t){t=uiSearch.getFieldEl(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(t)},reset:function(t,e,i){t=uiSearch.getFieldEl(t);const s=uiSearch.getOptions(t),o=uiSearch.getWrapEl(t);(t.getValue?t.getValue():t.value)?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(t,""),uiSearch.onChanged(t,e,i),e||s.onEnter&&s.onEnter(t,""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(t)):s.in_tabs&&_web_legacy_ui_ui_tabs__WEBPACK_IMPORTED_MODULE_5__.default.hideSearch(o),window.tooltips&&tooltips.destroyAll()},showProgress:function(t){t=uiSearch.getFieldEl(t);const e=uiSearch.getWrapEl(t);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,"ui_search_loading");const i=t.getValue?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(t.getValue()):t.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(e,"ui_search_field_empty",!i),uiSearch.handleAriaAttributes(e,i)},hideProgress:function(t){t=uiSearch.getFieldEl(t);const e=uiSearch.getWrapEl(t);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_loading"),t){const i=t.getValue?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(t.getValue()):t.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(e,"ui_search_field_empty",!i),uiSearch.handleAriaAttributes(e,i)}},handleAriaAttributes:function(t,e){const i=t.querySelector(".ui_search_controls"),s=!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(e);i?.setAttribute("aria-hidden",s)},scrollResize:function(t){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__.browser.mobile)return;t=uiSearch.getFieldEl(t);const e=uiSearch.getWrapEl(t),i=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(e),s=e&&e.classList.contains("ui_search_fixed"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(cur.uiSearchPageBlock)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("page_block",t),a=vk.staticheader?Math.max(0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_header"))[1]-scrollNode.scrollTop):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_header"))[1];let n;const r=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isAncestor)(e,boxLayerWrap);if(!e||!i||!r&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("scroll_fix",e)||t.ignoreFixed&&!s||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(i))return;if(r?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(i,!0)[1]<0:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(i,!0)[1]<a){const r=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getStyle)(e.classList.contains("ui_search_new")?e:t,"width"));!s&&r&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(i,"height",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(e)[1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,"width",r),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,"ui_search_fixed"));const _=Math.min(0,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_layout"))[0]));if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{marginLeft:_}),o){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(o)[1]+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(o)[1]-(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_8__.scrollGetY)()-t.offsetHeight;n=Math.min(a,Math.max(-t.offsetHeight,i)),n!==cur.lastUISearchPos&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,"top",n),cur.lastUISearchPos=n)}}else s&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(i,"height",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{top:"",marginLeft:""}),cur.lastUISearchPos=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_fixed"))},setStatic:function(t){t.ignoreFixed=!0;const e=uiSearch.getWrapEl(t),i=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(e);e&&i&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(i,"height",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{top:"",marginLeft:""}),cur.lastUISearchPos=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_fixed"))},setFixed:function(t){if(t.ignoreFixed=!1,!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"resizeEventHandler")){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isAncestor)(t,boxLayerWrap)?boxLayerWrap:window,i=uiSearch.scrollResize.pbind(t),s={stop:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent.pbind(e,"scroll",i),start:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent.pbind(e,"scroll",i)};(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers",((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[]).concat([s])),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"resizeEventHandler",!0),s.start()}uiSearch.scrollResize(t)},initFilters:function(t,e){if(!t)return;const i=uiSearch.getWrapEl(t),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_fltr_control",i),o={start:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(s,"click",(function(t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(s,"shown")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(t.target,"ui_search_fltr_control")||a(s)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(s,"mouseover",(function(){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(s,"shown"))return;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer");t&&(clearTimeout(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer",0)),a(s,!0)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(s,"mouseout",(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer",setTimeout((function(){a(s,!1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer",0)}),200))}))},stop:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent.pbind(s,"click mouseover mouseout")};function a(t,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(t,"shown",e)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers",((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[]).concat([o])),o.start();const n=uiSearch._getFiltersPane(t);(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(n,"click",(function(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(e.target,"token_title")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(e.target,"token_del")){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("token",e.target),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(i,"id");uiSearch.removeFilter(t,s)}}))},removeAllFilters:function(t){const e=uiSearch._getFiltersPane(t),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"cur_filters");(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.extend)({},i),(function(e){uiSearch.removeFilter(t,e,!0)}))},toggleFilter:function(t,e,i,s){s?uiSearch.addFilter(t,e,i):uiSearch.removeFilter(t,e)},addFilter:function(t,e,i){if(!e||!i)return;const s=uiSearch._getFiltersPane(t),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters")||{};o[e]=i,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters",o);const a=uiSearch.getOptions(t);a.onFiltersChanged&&a.onFiltersChanged(o),uiSearch._renderFilters(t)},removeFilter:function(t,e,i){const s=uiSearch._getFiltersPane(t),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters")||{};if(o[e]){delete o[e],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters",o);const a=uiSearch.getOptions(t);a.onFilterRemoved&&a.onFilterRemoved(e,t,i),a.onFiltersChanged&&a.onFiltersChanged(o),uiSearch._renderFilters(t)}},_getFiltersPane:function(t){const e=uiSearch.getWrapEl(t)||t;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_filters_pane",e)},_renderFilters:function(t){clearTimeout((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"renderFiltersTO")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"renderFiltersTO",setTimeout(uiSearch._doRenderFilters.pbind(t)))},_doRenderFilters:function(t){const e=uiSearch._getFiltersPane(t),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"cur_filters")||{},s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_filters",e);if(s)if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.isEmpty)(i))(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"expanded"),setTimeout((function(){s.innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(e)}),200);else{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClassDelayed)(e,"expanded");const t=[],o={};let a=0;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(i,(function(e,i){let s=!1,n=!1,r=e.match(/(.*?)_([^_]+)$/);const _=r&&r[2]||!1;r=r&&r[1]||!1,r&&(void 0!==o[r]&&"from"===_?n=o[r]:void 0!==o[r]&&(s=o[r]+1),o[r]=a);const l=`<div class="token" id="token${e}" data-id="${e}">\n                         <div class="token_title">${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.replaceEntities)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.clean)(i))}</div>\n                         <div class="token_del"></div>\n                       </div>`;!1!==n?t.splice(n,0,l):!1!==s?t.splice(s,0,l):t.push(l),a++})),s.innerHTML=t.join("")}}},__WEBPACK_DEFAULT_EXPORT__=uiSearch},693488:(t,e,i)=>{i.d(e,{default:()=>c});var s=i(754866),o=i(593159),a=i(575753),n=i(972332),r=i(740342),_=i(335700),l=i(342018);const d={initTabs:function(t,e,i=!0){if(a.browser.msie&&(0,o.intval)(a.browser.version)<10)return;if(a.browser.opera&&(0,o.intval)(a.browser.version)<15)return;if((0,s.hasClass)(t,"ui_tabs_sliding"))return;const n=(0,s.getSize)(e)[0],r=e.offsetLeft,_=(0,s.geByClass1)("_ui_tabs_slider",t);if(_&&!(0,s.domData)(t,"inited")){const t={width:n+"px",marginLeft:r};(0,s.setStyle)(_,t)}i&&d.tryInitTabsScroll(t)},tryInitTabsScroll:function(t){const e=t.querySelector(".js-tabs-scroll:not(.js-tabs-scroll-inited)");if(!e)return;e.classList.add("js-tabs-scroll-inited");const i=new _.UIGallery(e,{scrollY:!1}),s=(0,r.debounce)((()=>{i.refresh()}),200);window.addEventListener("resize",s),(0,l.pushNavDestroy)((()=>{i.destroy(),window.removeEventListener("resize",s)}))},tryInit:function(t,e=!0){if((0,s.domData)(t,"inited"))return;const i=(0,s.geByClass1)("ui_tab_group_sel",t)||(0,s.geByClass1)("ui_tab_sel",t);i&&d.initTabs(t,i,e),(0,s.domData)(t,"inited",1)},goTab:function(t,e,i,o=!1){if((0,n.checkEvent)(e))return!0;const a=(0,s.gpeByClass)("ui_tabs",t);return!(!i&&(0,s.geByClass1)("ui_tab_sel",a)==t)&&(d.switchTab(t),d.showProgress(a),nav.go(t,e,{tab:t,noframe:o}))},switchTab:function(t,e){let i=(0,s.gpeByClass)("ui_tabs",t);const a=(0,s.geByClass1)("ui_tab_sel",i);let n=null,r=null;const _=(0,s.hasClass)(a,"ui_tab_group_item")?r=(0,s.gpeByClass)("ui_tab_group",a):a,l=(0,s.hasClass)(t,"ui_tab_group_item")?n=(0,s.gpeByClass)("ui_tab_group",t):t;if(t!=a){if(t!=l&&(d.toggleGroup(l,!1),d.resetLabel(l,t)),_){d.initTabs(i,_),e=e||{};const t=(0,s.geByClass1)("_ui_tabs_slider",i);if(t){e.noAnim||l===_||((0,s.addClass)(i,"ui_tabs_sliding"),clearTimeout(cur.tabSlidingTO),cur.tabSlidingTO=setTimeout(s.removeClass.pbind(i,"ui_tabs_sliding"),300));const a=(0,o.intval)(t.style.marginLeft),n={width:(0,s.getSize)(l)[0]+"px"};n[cssTransformProp]="translateX("+(l.offsetLeft-a)+"px)",(0,s.setStyle)(t,n)}a!=_&&l!=_&&d.resetLabel(_),_!=a&&(0,s.removeClass)(_,"ui_tab_group_sel"),(0,s.removeClass)(a,"ui_tab_sel"),"tab"===(0,s.attr)(a,"role")&&(0,s.attr)(a,"aria-selected","false")}if(l!=t&&(0,s.addClass)(l,"ui_tab_group_sel"),(0,s.addClass)(t,"ui_tab_sel"),r&&(0,s.removeClass)(r,"ui_tab_hide_separator"),"tab"===(0,s.attr)(t,"role")&&(0,s.attr)(t,"aria-selected","true"),n){i=(0,s.geByClass1)("ui_tab_group_items",n,"div").children;let t=null;(0,o.each)(i,(function(e,i){"SPAN"===i.tagName?t=i:(0,s.hasClass)((0,s.domFC)(i),"ui_tab_sel")||(0,s.hasClass)(i,"unshown")||(t=null)})),t&&(0,s.addClass)(n,"ui_tab_hide_separator")}}return!1},resetLabel:function(t,e){const i=(0,s.geByClass1)("ui_tab_group_label",t,"span");i&&(i.innerHTML=(e||i).getAttribute("data-default-label"))},toggleGroup:function(t,e){const i=(0,s.data)(t,"visibletimer");i&&clearTimeout(i),(0,s.data)(t,"visibletimer",setTimeout(s.toggleClass.pbind(t,"visible",e),e?0:100)),(0,s.toggleClass)(t,"shown",e)},showGroup:function(t){const e=(0,s.data)(t,"hidetimer");e&&(clearTimeout(e),(0,s.data)(t,"hidetimer",0)),d.toggleGroup(t,!0)},hideGroup:function(t){(0,s.data)(t,"hidetimer")||(0,s.data)(t,"hidetimer",setTimeout((function(){d.toggleGroup(t,!1),(0,s.data)(t,"hidetimer",0)}),200))},showProgress:function(t){(0,s.hasClass)(t,"ui_tabs")||(t=(0,s.gpeByClass)("ui_tabs",t)),(0,s.addClass)(t,"ui_tabs_loading")},hideProgress:function(t){(0,s.hasClass)(t,"ui_tabs")||(t=(0,s.gpeByClass)("ui_tabs",t)),(0,s.removeClass)(t,"ui_tabs_loading")},showSearch:function(t,e){if(cur.viewAsBox)return cur.viewAsBox();if((0,n.checkEvent)(e))return!0;const i=(0,s.gpeByClass)("ui_tabs",t),o=(0,s.domByClass)(i,"_field");return(0,s.addClass)(i,"ui_tabs_search_opened"),uiSearch.focus(o),!1},hideSearch:function(t,e){if((0,n.checkEvent)(e))return!0;const i=(0,s.gpeByClass)("ui_tabs",t);return(0,s.removeClass)(i,"ui_tabs_search_opened"),!1},scrollToActiveTab(t){const e=document.querySelector(`#${t}`);if(!e)return;const i=e.querySelector(".ui_tab_sel, .ui_tab_group_sel"),s=e.querySelector(`.${_.UI_GALLERY_CONTENT_CLASSNAME}`);if(!i||!s)return;const o=i.offsetLeft,a=o+i.offsetWidth,n=s.scrollLeft,r=s.clientWidth,l=n+r,d=o-20,c=a+20;d<n?s.scrollTo({left:d}):c>l&&s.scrollTo({left:c-r})},showSort(){const t=document.querySelector(".js-ui_tab_sort_wrap");t&&t.classList.remove("ui_tab_search_wrap_hidden")},hideSort(){const t=document.querySelector(".js-ui_tab_sort_wrap");t&&t.classList.add("ui_tab_search_wrap_hidden")}},c=d},356812:(t,e,i)=>{i.d(e,{apiAudioToAudioTuple:()=>s.apiAudioToAudioTuple});var s=i(965440)},587952:(t,e,i)=>{i.d(e,{AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR:()=>s});const s="/"},133326:(t,e,i)=>{i.d(e,{getAudioHashesString:()=>o});var s=i(587952);const o=({addHash:t,editHash:e,actionHash:i,deleteHash:o,replaceHash:a,urlHash:n,restoreHash:r})=>[t||"",e||"",i||"",o||"",a||"",n||"",r||""].join(s.AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR)},625451:(t,e,i)=>{i.d(e,{makeStrictContext:()=>o});var s=i(296540);function o({name:t,defaultValue:e}){const i=(0,s.createContext)(e);function o(){const e=(0,s.useContext)(i);if(void 0===e)throw new Error(`Value for ${t}Context must be defined before call useContext`);return e}return i.displayName=`${t}Context`,o.displayName=`use${i.displayName}`,{Context:i,useContext:o}}},977131:(t,e,i)=>{var s=i(474848),o=i(296540),a=i(456921),n=i(999948),r=i(661119),_=i(568952),l=i(588357);(0,a.observer)((t=>{const[e]=(0,o.useState)((()=>{const e=new n.AudioCatalogMusicMixBlockModel;return e.setMix({type:_.AudioListType.MusicMix,contentType:l.AudioType.MusicTrack,identity:{id:t.id},title:t.title}),e}));return(0,s.jsx)(r.AudioCatalogMusicMixBlockComponent,{...t,loading:e.loading,playing:e.isPlaying,onTogglePlayClick:()=>{e.togglePlay()}})}))},508781:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockApplication:()=>r});var s=i(474848),o=i(865708),a=i(800127),n=i(753261);const r=({needShowOnboarding:t,...e})=>(0,s.jsx)(o.AppRootProvider,{children:(0,s.jsx)(n.AudioCatalogMusicMixBlockContext.Provider,{value:{needShowOnboarding:t||!1},children:(0,s.jsx)(a.AudioCatalogMusicMixBlockEffector,{...e})})})},996374:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>d});var s=i(474848),o=i(8520),a=i(296540),n=i(720836),r=i(624948),_=i(213879),l=i(384366);function d({id:t,backgroundAnimationUrl:e,description:i,header:d,style:c,playing:h,loading:u,onTogglePlayClick:p}){const{width:m,height:g}=(0,a.useMemo)((()=>{switch(c){case"default":return{width:910,height:248};case"secondary":return{width:870,height:208}}}),[c]);return(0,s.jsxs)("div",{className:(0,o.classNames)(l.default.root,l.default[c]),children:[(0,s.jsx)("div",{className:l.default.wrap,children:(0,s.jsx)(n.Placeholder,{mode:"default"===c?"default":"overlay",icon:(0,s.jsx)(_.AudioCatalogMusicMixBlockStateButtonContainer,{state:h?"play":"pause",loading:u&&!h,ariaLabelPlay:"play",ariaLabelPause:"pause",style:c,onClick:p}),header:d,children:i})}),(0,s.jsx)(r.Lottie,{options:{width:m,height:g,lazyLoading:!0,loop:!0,upscale:!0,autoplay:!1,group:t,animationUrl:e},play:h})]})}},135822:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>s.AudioCatalogMusicMixBlockComponent});var s=i(996374)},993926:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButton:()=>u});var s=i(474848),o=i(296540),a=i(202350),n=i(271036),r=i(723723),_=i(700272),l=i(826965),d=i(529019);const c={play:l.Icon28Pause,pause:d.Icon28Play};function h({state:t,loading:e,style:i,onClick:o,ariaLabelPlay:l,ariaLabelPause:d}){const h=c[t],u="play"===t?l:d;return(0,s.jsx)(a.RoundedGroup.Item,{mode:"default"===i?"shadow":"overlay",children:(0,s.jsx)(n.IconButton,{className:(0,r.getColorClass)("color_icon_primary"),onClick:o,"aria-label":u,children:e?(0,s.jsx)(_.Spinner,{size:"regular"}):(0,s.jsx)(h,{})})})}const u=(0,o.memo)(h)},726564:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButton:()=>s.AudioCatalogMusicMixBlockStateButton});var s=i(993926)},661119:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>s.AudioCatalogMusicMixBlockComponent,AudioCatalogMusicMixBlockStateButton:()=>o.AudioCatalogMusicMixBlockStateButton});var s=i(135822),o=i(726564)},252552:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButtonContainer:()=>l});var s=i(474848),o=i(753261),a=i(661119),n=i(296540),r=i(852227);const _=r.AudioCatalogMusicMixEmitter.ensure();function l(t){const{needShowOnboarding:e}=(0,o.useAudioCatalogMusicMixBlockContext)(),[i,l]=(0,n.useState)(e),d=()=>{i?_.emit(r.AudioCatalogMusicMixBlockEventType.AudioRecomsOnboardingShowRequested,{onHideOnboarding:()=>{l(!1),t.onClick?.()}}):t.onClick?.()};return i?(0,s.jsx)(a.AudioCatalogMusicMixBlockStateButton,{...t,state:"pause",loading:!1,onClick:d}):(0,s.jsx)(a.AudioCatalogMusicMixBlockStateButton,{...t,onClick:d})}},213879:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButtonContainer:()=>s.AudioCatalogMusicMixBlockStateButtonContainer});var s=i(252552)},753261:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockContext:()=>o,useAudioCatalogMusicMixBlockContext:()=>a});var s=i(625451);const{Context:o,useContext:a}=(0,s.makeStrictContext)({name:"AudioCatalogMusicMixBlockContext",defaultValue:{needShowOnboarding:!1}})},520708:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEffector:()=>r});var s=i(474848),o=i(293721),a=i(661119),n=i(938255);function r({id:t,backgroundAnimationUrl:e,description:i,header:r,title:_,style:l}){const d=(0,o.useUnit)(n.audioCatalogVkMixBlockService.$isPlaying),c=(0,o.useUnit)(n.audioCatalogVkMixBlockService.playAudioMixFx),h=(0,o.useUnit)(n.audioCatalogVkMixBlockService.$loading);return(0,s.jsx)(a.AudioCatalogMusicMixBlockComponent,{id:t,backgroundAnimationUrl:e,description:i,header:r,style:l,playing:d,loading:h,onTogglePlayClick:()=>{c({id:t,title:_})}})}},800127:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEffector:()=>s.AudioCatalogMusicMixBlockEffector});var s=i(520708)},235393:(t,e,i)=>{i.d(e,{createAudioCatalogVkMixBlockService:()=>c});var s=i(32489),o=i(630082),a=i(380948),n=i(297420),r=i(82467),_=i(346671),l=i(803111),d=i(540462);function c(){const t=(0,s.createDomain)("audio/audioPage/catalog/VkMixBlockService"),e=(0,l.ensureAudioPlayerService)(),i=t.createEvent(),c=(0,s.restore)(i,null),h=(0,o.equals)(e.$currentPlaylist.map((t=>t?.getType?.())),r.PLAYLIST_TYPE_VKMIX),u=(0,a.and)(e.$isPlaying,h),p=(0,s.attach)({source:[u],effect:async([t],{id:s,title:o})=>{const a=await e.getCurrentPlaylistFx();if(!t&&!a||!t&&a?.getType()!==r.PLAYLIST_TYPE_VKMIX)try{const t=new r.AudioMixPlaylist({id:s,title:o,items:[],context:r.PLAYLIST_CONTEXT_VKMIX});await t.ensureAt(0);const a=new _.AudioMixPlaylistAdapter(t),n=a.getAudioAt(0);if(!n)throw new Error("First audio in VK Mix not found");i(t),await e.playFx({audio:n,playlist:a,context:r.PLAYLIST_CONTEXT_VKMIX})}catch(t){throw new Error("Failed to initialize VK Mix playlist")}else!t&&a?.getType()===r.PLAYLIST_TYPE_VKMIX&&a?e.playFx():e.pauseFx()}}),m=(0,a.and)(p.pending,(0,n.not)(u)),g=(0,s.attach)({source:c,effect(t){if(!t)throw new Error("Mix not exists");t.launchSession()}}),b=(0,s.attach)({source:c,effect(t){if(!t)throw new Error("Mix not exists");t.breakSession()}});return(0,s.sample)({clock:h,filter:t=>!!(0,d.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web")&&t,target:g}),(0,s.sample)({clock:h,filter:t=>!!(0,d.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web")&&!t,target:b}),{$isPlaying:u,$loading:m,playerService:e,playAudioMixFx:p}}},938255:(t,e,i)=>{i.d(e,{audioCatalogVkMixBlockService:()=>s});const s=(0,i(235393).createAudioCatalogVkMixBlockService)()},113203:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixEmitter:()=>a});var s=i(584053),o=i(558137);class a extends s.Emitter{constructor(){super()}}a.ensure=(0,o.makeSharedState)("AudioCatalogMusicMixEmitter",(()=>new a),{version:1})},556506:(t,e,i)=>{var s;i.d(e,{AudioCatalogMusicMixBlockEventType:()=>s}),function(t){t.AudioRecomsOnboardingShowRequested="audioRecomsOboardingShowRequested"}(s||(s={}))},852227:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEventType:()=>s.AudioCatalogMusicMixBlockEventType,AudioCatalogMusicMixEmitter:()=>o.AudioCatalogMusicMixEmitter});var s=i(556506),o=i(113203)},502722:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockApplication:()=>s.AudioCatalogMusicMixBlockApplication,AudioCatalogMusicMixBlockEventType:()=>o.AudioCatalogMusicMixBlockEventType,AudioCatalogMusicMixEmitter:()=>o.AudioCatalogMusicMixEmitter});i(977131);var s=i(508781),o=i(852227)},675058:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockModel:()=>d});var s=i(327813),o=i(638431),a=i(983567),n=i(785684),r=i(392358),_=i(540462),l=i(319756);class d{setMix(t){const e=(0,_.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web"),{mixProvider:i}=this;this._mix=i.get(t.identity)??i.create(t,{isSessionFeatureEnabled:e}),this.ap.subscribe(r.AudioPlayerEventType.PLAYLIST_CHANGED,(()=>{(0,_.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web")&&this._mix&&(this.isMixInQueue?this._mix.launchSession():this._mix.breakSession())}))}get mix(){return this._mix}ensureMix(){const{mix:t}=this;if(!t)throw new Error("MusicMix is not defined");return t}get loading(){return!1}get isPlaying(){return this.isMixInQueue&&this.ap.isPlaying()}get isPaused(){return this.isMixInQueue&&!this.ap.isPlaying()}get isMixInQueue(){const{mixAdapter:t}=this,e=this.ap.getCurrentPlaylist();return!(!e||!t)&&e.getType()===t.type}async togglePlay(){const{ap:t}=this;this.isPlaying?t.pause():this.isPaused?t.resume():this.play()}async play(){const t=this.ensureMix(),{mixAdapter:e}=this;if(!e)throw new Error("MusicMix adapter is not defined");await t.ensureAt(0);const i=e.getAudioAt(t.length-1);if(!i)throw new Error("Last audio in VK Mix not found");await this.ap.playList({audio:i,playlist:e,context:e.context})}get mixAdapter(){const{mix:t}=this;return t&&new n.MusicMixAdapter(t)}constructor(){this.ap=(0,a.getAudioPlayer)(),this.mixProvider=(0,l.ensureDIRootWebContainer)().resolve(o.MusicMixProvider),this._mix=null,(0,s.makeAutoObservable)(this)}}},999948:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockModel:()=>s.AudioCatalogMusicMixBlockModel});var s=i(675058)},764505:(t,e,i)=>{i.d(e,{clean:()=>s.clean,escapeRE:()=>s.escapeRE,isElement:()=>s.isElement,isRetina:()=>s.isRetina,replaceEntities:()=>s.replaceEntities});var s=i(898848)},965440:(t,e,i)=>{i.d(e,{apiAudioToAudioTuple:()=>_});var s=i(8520),o=i(764505),a=i(133326),n=i(854950);const r=new WeakMap,_=(t,{useCache:e=!1}={})=>{if(!t)return null;if(e){const e=r.get(t);if(e)return e}const i=[t.id,t.owner_id,t.url||"",(0,o.clean)(t.title),(0,o.clean)(t.artist||t.performer||""),t.duration,t.album_id||0,0,"",t.lyrics_id||0,0,"",l(t),(0,a.getAudioHashesString)({addHash:t.access_key,editHash:t.access_key,actionHash:t.access_key,deleteHash:t.access_key,replaceHash:t.access_key,urlHash:t.access_key,restoreHash:t.access_key}),d(t),t.ads||{},(0,o.clean)(t.subtitle||""),t.main_artists||"",t.featured_artists||"",!!t.album&&[t.album?.owner_id,t.album?.id,t.album?.access_key],t.track_code||"",t.content_restricted||0,t.album_part_number||0,!0,t.access_key||"",t.audio_chart_info||!1,t.release_audio_id||""];return e&&r.set(t,i),i};function l(t){const{podcast_info:e}=t,i=Boolean(e);return{podcast:i,dislike:t.dislike,fave:i&&Boolean(e?.is_favorite)}}function d(t){const{podcast_info:e,album:i}=t;if(e){const t=e.cover;return t?.sizes&&(0,s.getPhotoSize)(t.sizes||[],(0,n.getImageMinWidth)(40))?.url||""}const o=i?.thumb;return o?o.sizes?(0,s.getPhotoSize)(o.sizes||[],(0,n.getImageMinWidth)(200))?.url||"":`${o.photo_300},${o.photo_135}`||"":""}},201511:(t,e,i)=>{i.d(e,{toAudioData:()=>n});var s=i(520790),o=i(293658),a=i(35215);function n(t){const{duration:e}=t;return{identity:(0,s.toOwnedAudioIdentityData)(t),title:t.title,artwork:l(t),url:t.url||null,isExplicit:t.is_explicit??!1,authors:r(t),duration:Number.isFinite(e)?e:void 0,isBlocked:d(t)}}function r(t){return{main:t?.main_artists?.map(_)??[],feat:t?.featured_artists?.map(_)??[],raw:t.artist}}function _(t){return{name:t.name}}function l(t){const e=t.album?.thumb;return e?(0,o.toAudioArtworkImages)(e):[]}function d({dmca_blocked:t,content_restricted:e}){return!!t||(0,a.isNumber)(e)&&0!==e}},520790:(t,e,i)=>{function s(t){return{id:t.id,ownerId:t.owner_id,accessKey:t.access_key}}i.d(e,{toOwnedAudioIdentityData:()=>s})},293658:(t,e,i)=>{i.d(e,{toAudioArtworkImages:()=>o});const s=[["photo_34",34],["photo_68",68],["photo_135",135],["photo_270",270],["photo_300",300],["photo_600",600],["photo_1200",1200]];function o(t,e){const i=[];if(!t)return i;for(const[o,a]of s){const s=t[o];s&&i.push({src:s,size:a,mainColor:e})}return i}},598539:(t,e,i)=>{i.d(e,{AudioContextableEntityMultiton:()=>l});var s=i(434518),o=i(763812),a=i(331635),n=i(327813),r=i(70916),_=(0,o._)("_makeCachedDataGetter");class l{get(t,e){const i=this.getEntityKey(t,e);let s=this.entities.get(i);if(s)return s;if(!e)return;const o=this.data.get(t);if(o){const a=this.constructEntity(this.makeEntityParams(t,o),e);s=a,this.entities.set(i,a)}return s}getStrict(t,e){const i=this.get(t,e);if(!i)throw new Error("Entity not created or lost cache");return i}create(t,e){const{identity:i,data:s}=t;if(this.setState(i,t.state),this.data.set(i,s),e){const e=this.constructEntity(this.makeEntityParams(i,s));this.entities.set(this.getEntityKey(t.identity),e)}const o=this.constructEntity(this.makeEntityParams(i,s),e);return this.entities.set(this.getEntityKey(t.identity,e),o),o}getEntityKey(t,e){const i=e&&this.getContextKey(e);return`${t.fullId}${i??""}`}makeEntityParams(t,e){return{identity:t,getData:(0,s._)(this,_)[_](t,e),attachContext:e=>this.getStrict(t,e)}}constructor(){Object.defineProperty(this,_,{value:d}),this.entities=new Map,this.data=new r.ObservableIdentityMap,(0,n.makeObservable)(this)}}function d(t,e){let i=e;return()=>{let e=this.data.get(t);return e&&(i=e),e??i}}(0,a.__decorate)([n.observable],l.prototype,"entities",void 0),(0,a.__decorate)([n.observable],l.prototype,"data",void 0),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof CreateParams?Object:CreateParams,"undefined"==typeof Context?Object:Context]),(0,a.__metadata)("design:returntype",Object)],l.prototype,"create",null)},735859:(t,e,i)=>{i.d(e,{Audio:()=>h});var s=i(434518),o=i(763812),a=i(331635),n=i(327813),r=i(545208),_=(0,o._)("_identity"),l=(0,o._)("_context"),d=(0,o._)("_getData"),c=(0,o._)("_attachContext");class h{get identity(){return(0,s._)(this,_)[_]}get context(){return(0,s._)(this,l)[l]}attachContext(t){const e=(0,s._)(this,c)[c];if(!e)throw new Error("Audio is not contextable");return e(t)}get data(){return(0,s._)(this,d)[d]()}get type(){return this.data.type}get url(){return this.data.url}get title(){return this.data.title}get artwork(){return this.data.artwork}get isExplicit(){return this.data.isExplicit}get authors(){return this.data.authors}get duration(){return this.data.duration}get isBlocked(){return this.data.isBlocked}get mediaMetadata(){const{authors:t}=this;return{title:this.title,artist:t&&(0,r.stringifyAudioAuthors)(t),artwork:[...this.artwork]}}getContextStrict(){const{context:t}=this;if(!t)throw new Error("Audio is not contextual");return t}constructor(t){Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,s._)(this,_)[_]=t.identity,(0,s._)(this,l)[l]=t.context??null,(0,s._)(this,d)[d]=t.getData,(0,s._)(this,c)[c]=t.attachContext,(0,n.makeObservable)(this)}}(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],h.prototype,"data",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Object)],h.prototype,"type",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Object)],h.prototype,"url",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Object)],h.prototype,"title",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Object)],h.prototype,"artwork",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Object)],h.prototype,"isExplicit",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Object)],h.prototype,"authors",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Object)],h.prototype,"duration",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Object)],h.prototype,"isBlocked",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype","undefined"==typeof MediaMetadataInit?Object:MediaMetadataInit)],h.prototype,"mediaMetadata",null)},545208:(t,e,i)=>{function s(t){return[t.main.map((({name:t})=>t)).filter(Boolean).join(", "),t.feat.map((({name:t})=>t)).filter(Boolean).join(", ")].filter(Boolean).join(" . feat ")||t.raw}i.d(e,{stringifyAudioAuthors:()=>s})},921259:(t,e,i)=>{i.d(e,{AudioEntityToggle:()=>a});var s=i(331635),o=i(327813);class a{get isPending(){return this.toggleService.pending.has(this.identity)}get state(){return!!this.toggleService.state.get(this.identity)}activate(...[t]){return this.toggleService.activate(this.identity,t)}deactivate(...[t]){return this.toggleService.deactivate(this.identity,t)}toggle(t,e){return this.toggleService.toggle(this.identity,t,e)}constructor(t,e){this.identity=t,this.toggleService=e,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],a.prototype,"isPending",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],a.prototype,"state",null)},460183:(t,e,i)=>{i.d(e,{AudioList:()=>c});var s=i(434518),o=i(763812),a=i(327813),n=i(702130),r=(0,o._)("_identity"),_=(0,o._)("_context"),l=(0,o._)("_getData"),d=(0,o._)("_attachContext");class c extends n.AudioList{get identity(){return(0,s._)(this,r)[r]}get context(){return(0,s._)(this,_)[_]}attachContext(t){const e=(0,s._)(this,d)[d];if(!e)throw new Error("Audio is not contextable");return e(t)}get data(){return(0,s._)(this,l)[l]()}get length(){return this.items.length}get type(){return this.data.type}get contentType(){return this.data.contentType}get title(){return this.data.title}audioAtStrict(t){const e=this.audioAt(t);if(!e)throw new Error("Audio not found");return e}getContextStrict(){const{context:t}=this;if(!t)throw new Error("AudioList is not contextual");return t}constructor(t){super(),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),(0,s._)(this,r)[r]=t.identity,(0,s._)(this,_)[_]=t.context,(0,s._)(this,l)[l]=t.getData,(0,s._)(this,d)[d]=t.attachContext,(0,a.makeObservable)(this)}}},153346:(t,e,i)=>{i.d(e,{MusicAudio:()=>c});var s=i(331635),o=i(327813),a=i(70148),n=i(735859),r=i(833600),_=i(116710),l=i(921259),d=i(741991);class c extends n.Audio{get subtitle(){return this.data.subtitle}get album(){return this.data.album}get hasLyrics(){return this.data.hasLyrics}get apiAudio(){return this.data.apiAudio}get releaseAudioIdentity(){const t=this.data.releaseAudioIdentity;return t&&new a.OwnedIdentity(t)}get mediaMetadata(){return{...super.mediaMetadata,album:this.album?.title}}get releaseAudio(){const t=this.releaseAudioIdentity;return t?this.trackProvider.get(t)??null:null}get originalAudio(){if(this.releaseAudio)return this.releaseAudio;if(!this.isMine)return null;const t=this.service.myMusic.getSource(this.identity);return t?this.trackProvider.get(t)??null:null}get isMine(){return this.myMusic.isOwned}constructor(t){super(t);const{identity:e}=this,{service:i}=t,s=this.context?.trackCode??null;this.trackProvider=t.trackProvider,this.service=i,this.myMusic=new _.MusicAudioOwning({identity:e,trackCode:s,service:i.myMusic}),this.groupsMusic=new d.MusicAudioGroupsMusic({identity:e,trackCode:s,service:i.groupMusicServices}),this.dislike=new l.AudioEntityToggle(e,i.dislikes),this.lyrics=new r.MusicLyrics({identity:e,service:i.lyrics}),(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],c.prototype,"subtitle",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],c.prototype,"album",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],c.prototype,"hasLyrics",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",Object)],c.prototype,"apiAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",Object)],c.prototype,"releaseAudioIdentity",null),(0,s.__decorate)([o.override,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype","undefined"==typeof MediaMetadataInit?Object:MediaMetadataInit)],c.prototype,"mediaMetadata",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",Object)],c.prototype,"releaseAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",Object)],c.prototype,"originalAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],c.prototype,"isMine",null)},741991:(t,e,i)=>{i.d(e,{MusicAudioGroupsMusic:()=>o});var s=i(116710);class o{create(t){return new s.MusicAudioOwning({identity:this.identity,trackCode:this.trackCode,service:this.service.get(t)})}constructor(t){this.identity=t.identity,this.trackCode=t.trackCode,this.service=t.service}}},441615:(t,e,i)=>{i.d(e,{MusicTrack:()=>n});var s=i(331635),o=i(327813),a=i(153346);class n extends a.MusicAudio{get isFocusTrack(){return this.data.isFocusTrack}constructor(t){super(t),(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],n.prototype,"isFocusTrack",null)},841400:(t,e,i)=>{i.d(e,{MusicMix:()=>d});var s=i(434518),o=i(763812),a=i(331635),n=i(327813),r=i(460183),_=(0,o._)("_audioApi"),l=(0,o._)("_audioProvider");class d extends r.AudioList{get isSessionLaunched(){return this.state.isSessionLaunched}get infinite(){return!0}get head(){return this.items}audioAt(t){return this.items.at(t)}launchSession(){if(0===this.length)throw new Error("Music mix session cannot be launched if there are no tracks in the mix");this.state.isSessionLaunched=!0}breakSession(){this.clearItems(),this.state.isSessionLaunched=!1}async fetchAt(t,e){return this.fetchAtByNext(t,e)}async fetchNext(t=1){const e=(await(0,s._)(this,_)[_].getStreamMixAudios({mix_id:this.identity.id,count:t,...this.isSessionFeatureEnabled?{append:this.isSessionLaunched?1:0}:{}})).map((t=>(0,s._)(this,l)[l].createContextualFromAPI(t,{list:this})));return this.items.push(...e),e}clearItems(){this.items.length=0}constructor(t){super(t),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.state={isSessionLaunched:!1},this.items=[],(0,s._)(this,_)[_]=t.audioApi,(0,s._)(this,l)[l]=t.audioProvider,this.isSessionFeatureEnabled=t.isSessionFeatureEnabled??!1,(0,n.makeObservable)(this)}}(0,a.__decorate)([n.observable.deep,(0,a.__metadata)("design:type","undefined"==typeof IMusicMixState?Object:IMusicMixState)],d.prototype,"state",void 0),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],d.prototype,"launchSession",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],d.prototype,"breakSession",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],d.prototype,"clearItems",null)},735584:(t,e,i)=>{i.d(e,{MusicTrackProvider:()=>y});var s=i(434518),o=i(763812),a=i(331635),n=i(327813),r=i(346675),_=i(955060),l=i(132028),d=i(74270),c=i(70148),h=i(873900),u=i(598539),p=i(520790),m=i(441615),g=i(824501),b=i(551054),E=i(831321),M=(0,o._)("_corruptedIdentities");class y extends u.AudioContextableEntityMultiton{get corruptedIdentities(){return(0,s._)(this,M)[M]}createContextualFromAPI(t,e){const i=t.track_code;if(!i)throw new Error("trackCode is not defined in source");return this.createFromAPI(t).attachContext({...e,trackCode:i})}createFromAPI(t){return this.create({identity:new c.OwnedIdentity((0,p.toOwnedAudioIdentityData)(t)),data:(0,b.toMusicTrackData)(t),state:(0,E.toMusicAudioStateData)(t)})}isFetchingAudio(t){return this.pendingEntities.has(this.toEntityIdentity(t))}async ensure(t){const e=this.get(t);return e||this.fetch(t)}async fetch(t){const[e]=await this.fetchMany([t]);if(!e)throw new Error("Server did not return the audio");return e}async fetchMany(t){if(!t.length)return[];try{this.markPending(t);return(await this.audioApi.getById({audios:t.map(h.getIdentityAccessRawId).join(",")})).map((t=>this.createFromAPI(t)))}finally{this.unmarkPending(t)}}async ensureMany(t){let e=[];const i=[],s=[];for(const i of t){const t=this.get(i);t?e.push(t):s.push(i)}if(!s.length)return e;await this.fetchMany(s),e=[];for(const s of t){const t=this.get(s);t?e.push(t):(this.logger.log(new Error(`Audio ${s.fullId} not found in audio.getById response`)),i.push(s))}return this.markCorrupted(i),e}constructEntity(t,e){return new m.MusicTrack({...t,context:e,trackProvider:this,service:this.service})}setState(t,e){const{hasLyrics:i,disliked:s}=e;void 0!==i&&this.service.lyrics.setHasLyrics(t,i),void 0!==s&&this.service.dislikes.setState(t,s)}getContextKey(t){return`${t.list?.identity.fullId??""}/${t.trackCode}`}toEntityIdentity(t){return new c.OwnedIdentity(t)}markPending(t){t.forEach((t=>this.pendingEntities.add(t)))}unmarkPending(t){t.forEach((t=>this.pendingEntities.delete(t)))}markCorrupted(t){t.forEach((t=>(0,s._)(this,M)[M].add(t)))}constructor(t,e,i){super(),Object.defineProperty(this,M,{writable:!0,value:void 0}),this.audioApi=t,this.service=e,this.logger=i,this.pendingEntities=new d.ObservableIdentitySet,(0,s._)(this,M)[M]=new d.ObservableIdentitySet,(0,n.makeObservable)(this)}}(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,a.__metadata)("design:returntype",Promise)],y.prototype,"ensure",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,a.__metadata)("design:returntype",Promise)],y.prototype,"fetch",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Promise)],y.prototype,"fetchMany",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Promise)],y.prototype,"ensureMany",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],y.prototype,"markPending",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],y.prototype,"unmarkPending",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],y.prototype,"markCorrupted",null);y=(0,a.__decorate)([l.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===r.AudioApi?Object:r.AudioApi,void 0===g.MusicService?Object:g.MusicService,void 0===_.ErrorLogger?Object:_.ErrorLogger])],y)},551054:(t,e,i)=>{i.d(e,{toMusicSnippetClip:()=>l,toMusicSnippetData:()=>_,toMusicTrackData:()=>r});var s=i(201511),o=i(588357),a=i(70148);function n(t,e){return{...(0,s.toAudioData)(e),type:t,hasLyrics:e.has_lyrics??!1,authors:d(e),album:h(e),duration:e.duration,subtitle:e.subtitle??"",releaseAudioIdentity:e.release_audio_id?a.OwnedIdentity.fromRawId(e.release_audio_id):null,apiAudio:e}}function r(t){return{...n(o.AudioType.MusicTrack,t),isFocusTrack:t.is_focus_track??!1}}function _(t){return{...n(o.AudioType.MusicSnippet,t),clip:null}}function l(t){return t?.clip_from&&t?.clip_to?{to:t.clip_to,from:t.clip_from}:null}function d(t){return{main:t.main_artists?.map(c)??[],feat:t.featured_artists?.map(c)??[],raw:t.artist}}function c(t){return{name:t.name,id:t.id}}function h(t){const{album:e}=t;return e?{id:e.id,ownerId:e.owner_id,title:e.title}:null}},831321:(t,e,i)=>{function s(t){return{hasLyrics:t.has_lyrics,disliked:t.dislike}}i.d(e,{toMusicAudioStateData:()=>s})},833600:(t,e,i)=>{i.d(e,{MusicLyrics:()=>l});var s=i(434518),o=i(763812),a=i(331635),n=i(327813),r=(0,o._)("_identity"),_=(0,o._)("_service");class l{get data(){return(0,s._)(this,_)[_].get((0,s._)(this,r)[r])}get isExist(){return(0,s._)(this,_)[_].hasLyrics((0,s._)(this,r)[r])}ensure(){return(0,s._)(this,_)[_].ensure((0,s._)(this,r)[r])}constructor(t){Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),(0,s._)(this,r)[r]=t.identity,(0,s._)(this,_)[_]=t.service,(0,n.makeObservable)(this)}}(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],l.prototype,"data",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],l.prototype,"isExist",null)},116710:(t,e,i)=>{i.d(e,{MusicAudioOwning:()=>_});var s=i(434518),o=i(763812),a=i(331635),n=i(327813),r=(0,o._)("_service");class _{get ownerId(){return(0,s._)(this,r)[r].ownerId}get hasOwned(){return(0,s._)(this,r)[r].has(this.identity)}get isOwned(){return(0,s._)(this,r)[r].isOwned(this.identity)}get isDeleted(){return(0,s._)(this,r)[r].isDeleted(this.identity)}get isPending(){return(0,s._)(this,r)[r].checkPending(this.identity)}add(t){if(!this.trackCode)throw new Error("trackCode required");return(0,s._)(this,r)[r].add(this.identity,{...t,trackCode:this.trackCode})}delete(t){return(0,s._)(this,r)[r].delete(this.identity,t)}restore(t){return(0,s._)(this,r)[r].restore(this.identity,t)}constructor(t){Object.defineProperty(this,r,{writable:!0,value:void 0}),this.identity=t.identity,this.trackCode=t.trackCode,(0,s._)(this,r)[r]=t.service,(0,n.makeObservable)(this)}}(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"hasOwned",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"isOwned",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"isDeleted",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"isPending",null)},638431:(t,e,i)=>{i.d(e,{MusicMixProvider:()=>c});var s=i(331635),o=i(327813),a=i(132028),n=i(70916),r=i(346675),_=i(843161),l=i(841400),d=i(735584);class c{get(t){return this.entities.get(this.toEntityIdentity(t))}create(t,{isSessionFeatureEnabled:e=!1}={}){const i=this.toEntityIdentity(t.identity);this.entitiesData.set(i,t);const s=new l.MusicMix({identity:i,getData:this.makeCachedDataGetter(i,t),audioApi:this.audioApi,audioProvider:this.trackProvider,isSessionFeatureEnabled:e,context:{ref:null}});return this.entities.set(s.identity,s),s}toEntityIdentity(t){return new _.SingleIdentity(t)}makeCachedDataGetter(t,e){let i=e;return()=>{let e=this.entitiesData.get(t);return e&&(i=e),e??i}}constructor(t,e){this.audioApi=t,this.trackProvider=e,this.entities=new n.ObservableIdentityMap,this.entitiesData=new n.ObservableIdentityMap,(0,o.makeAutoObservable)(this)}}c=(0,s.__decorate)([a.scope.global(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===r.AudioApi?Object:r.AudioApi,void 0===d.MusicTrackProvider?Object:d.MusicTrackProvider])],c)},624948:(t,e,i)=>{i.d(e,{Lottie:()=>r});var s=i(474848),o=i(8520),a=i(812153),n=i(206968);const r=({play:t,fallback:e,options:i,className:r,style:_,...l})=>{const{width:d,height:c}=i,{lottieContainerRef:h,lottieRendered:u}=(0,a.useLottie)({...i,className:n.default.canvas},{play:t});return(0,s.jsx)("div",{ref:h,...l,className:(0,o.classNames)(n.default.root,r),style:{..._,width:d??_?.width??"100%",height:c??_?.height??"100%"},children:(0,s.jsx)("div",{children:!u&&e})})}},384366:(t,e,i)=>{i.d(e,{default:()=>s});const s={root:"AudioCatalogMusicMixBlockComponent__root--DTwry",default:"AudioCatalogMusicMixBlockComponent__default--FhNpB",secondary:"AudioCatalogMusicMixBlockComponent__secondary--svwzm",description:"AudioCatalogMusicMixBlockComponent__description--Y1hxg",wrap:"AudioCatalogMusicMixBlockComponent__wrap--cFl4P"}},206968:(t,e,i)=>{i.d(e,{default:()=>s});const s={root:"Lottie__root--UFU5P",canvas:"Lottie__canvas--bb1CE"}}}]);try{stManager?.done("dist/web/chunks/870a14a9.26d21386.js")}catch(t){}