"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[30624],{742795:(e,a,t)=>{t.d(a,{PrimaryAttachmentPollWrapper:()=>h});var o=t(474848),n=t(296540),c=t(695684),r=t(101066),s=t(447208),i=t(293721),l=t(266854),d=t(866467),p=t(540462),u=t(33305);const h=({pollId:e,trackCode:a,onShowFullVoting:t,onShare:h,onReport:_,onShowStats:g,onGetCode:v,...f})=>{const{[e]:m}=(0,i.useStore)(r.$polls),{[e]:b}=(0,i.useStore)(l.$profiles),{[e]:w}=(0,i.useStore)(r.$pollsLoading),C=(0,n.useMemo)((()=>{if(!m)return"";const e=m.end_date&&1e3*m.end_date<=Date.now();return 0===m.votes?e?d.getLang("voting_no_voted"):d.getLang("voting_vote_first"):(0,d.langNumeric)(m.votes,d.getLang("voting_N_voted","raw"))}),[m]),S=(0,n.useMemo)((()=>{const e=[m.anonymous?d.getLang("voting_anonymous"):d.getLang("voting_public")],a=m.end_date,t=1e3*a;return m.closed?e.push(d.getLang("voting_closed")):a&&t<Date.now()?e.push(d.getLang("voting_ended")):a&&e.push((0,d.langDate)(t,d.getLang("voting_time_until","raw"),0,d.getLang("months_of","raw"))),e.join(" · ")}),[m]),y=(0,n.useMemo)((()=>({footerText:C,voteText:d.getLang("voting_vote"),headerText:S,revoteText:d.getLang("voting_revote"),reportText:d.getLang("voting_report"),shareText:d.getLang("voting_share"),exportText:d.getLang("voting_export"),actionsButtonText:d.getLang("global_actions_button"),answersCountTexts:m.answers.map((e=>(0,d.langNumeric)(e.votes||0,d.getLang("mobile_voting_answers","raw")))),showVariantsText:d.getLang("voting_show_variants"),showResultsText:d.getLang("voting_show_results")})),[m]);if(!m||!b)return null;let k,x;return"gradient"===m.background?.type?k="gradient":"tile"===m.background?.type?k="tile":m.photo&&(k="photo"),k&&["gradient","tile"].includes(k)?x=m.background:"photo"===k&&(x=m.photo),(0,o.jsx)(c.PrimaryAttachmentPoll,{onShowFullVoting:t,onShare:h,onReport:_,onGetCode:v,onShowStats:g,poll:m,profiles:b,getProfileHref:e=>(0,u.getOwnerHref)(e),loading:!!w,onVote:async e=>{m&&await(0,r.pollsAddVoteFx)({query:{owner_id:m.owner_id,poll_id:m.id,answer_ids:e.join(","),track_code:a}})},onDeleteVote:async()=>{await(0,r.pollsDeleteVoteFx)({query:{poll_id:m.id,owner_id:m.owner_id,track_code:a}})},runOnceInViewport:s.runOnceInViewport,hasCustomBackground:!!m.background?.type||!!m.photo?.images,backgroundType:k,background:x,actionSheetTestId:`poll-action-sheet_${m.owner_id}_${m.id}`,backgroundImageLoading:(0,p.partConfigEnabled)("feed_web_image_optimization")?"lazy":void 0,...f,...y})}},797320:(e,a,t)=>{t.d(a,{domain:()=>o});const o=(0,t(32489).createDomain)("POLLS")},101066:(e,a,t)=>{t.d(a,{$polls:()=>p,$pollsLoading:()=>u,pollsAddVoteFx:()=>i,pollsDeleteVoteFx:()=>l,setPollFx:()=>d});var o=t(32489),n=t(310952),c=t(679005),r=t(797320),s=t(266854);const i=(0,n.createPollsAddVoteFx)({domain:r.domain}),l=(0,n.createPollsDeleteVoteFx)({domain:r.domain}),d=r.domain.createEffect((e=>e)),p=r.domain.createStore({}),u=r.domain.createStore({});p.on([i.done,l.done],((e,{params:{query:{poll_id:a}},result:{poll:t}})=>(0,c.produce)(e,(e=>{t&&(e[a]=t)})))),(0,o.sample)({clock:[i.done,l.done],fn:({result:{poll:e}})=>[e.id,e.profiles],target:s.setProfilesFx}),p.on([d.doneData],((e,a)=>(0,c.produce)(e,(e=>{e[a.id]=a})))),u.on([i,l],((e,{query:{poll_id:a}})=>(0,c.produce)(e,(e=>{e[a]=!0})))),u.on([i.finally,l.finally],((e,{params:{query:{poll_id:a}}})=>(0,c.produce)(e,(e=>{e[a]=!1}))))},266854:(e,a,t)=>{t.d(a,{$profiles:()=>r,setProfilesFx:()=>c});var o=t(797320),n=t(679005);const c=o.domain.createEvent(),r=o.domain.createStore({});r.on([c],((e,[a,t])=>(0,n.produce)(e,(e=>{e[a]=t||[]}))))},185977:(e,a,t)=>{t.d(a,{getPollRawObject:()=>o});const o=e=>`${e.is_board?"board_poll":"poll"}${e.owner_id}_${e.id}`},592423:(e,a,t)=>{t.d(a,{CaptchaType:()=>o,createCaptchaPopupService:()=>l});var o,n=t(32489),c=t(293721),r=t(418562),s=t(311606),i=t(621745);!function(e){e[e.IMAGE=0]="IMAGE",e[e.AUDIO=1]="AUDIO"}(o||(o={}));const l=()=>{const e=(0,c.createGate)(),a=(0,n.createEvent)(),t=(0,n.createEvent)(),o=(0,n.createEvent)(),l=(0,n.createEvent)(),d=(0,n.createEvent)(),p=(0,n.createEvent)(),u=(0,n.createEvent)(),h=(0,n.createEvent)(),_=(0,n.createEvent)(),g=(0,n.createEvent)(),v=(0,n.createEvent)();(0,n.forward)({from:e.close,to:v});const f=(0,n.createStore)("");f.on(e.open,((e,{captchaImage:a})=>a));const m=(0,n.createStore)("");m.on(e.open,((e,{captchaTrack:a})=>a));const b=(0,n.createStore)("");b.on(e.open,((e,{deviceId:a})=>a));const w=(0,n.createStore)(null);w.on(e.open,(()=>"CAPTCHA_MODAL_ACTIVE")),w.on(g,(()=>null));const C=(0,n.createStore)(null);C.on(e.open,((e,a)=>a.platform));const S=(0,n.createStore)("");S.reset(e.close),S.on(e.open,((e,{sid:a})=>a));const y=(0,n.createStore)("");y.reset(e.close),y.on([u,h],(()=>(0,r.default)()));const k=(0,n.createStore)(0);k.on(p,(e=>e+1)),k.reset(e.close);const x=(0,n.createStore)("");x.reset(e.close),x.on(a,((e,a)=>a));const I=(0,n.createStore)(!0);I.reset([e.close,p,u]),I.on(l,(()=>!0)),I.on(u,(()=>!0)),I.on(d,(()=>!1)),I.on(_,(()=>!1));const P=(0,n.createStore)(0);P.on(p,(e=>0===e?1:0));const L=(0,n.createStore)(!1);L.reset(e.close),L.on(t,(()=>!0)),L.on(o,(()=>!1));const $=(0,n.createStore)(!1);$.reset([e.close,p,u,h]),$.on(_,(()=>!0));const E=(0,n.createStore)("");E.reset([e.close,u]);const R=(0,n.createStore)(0);R.reset([e.close,v]),R.on([u,p],(()=>5));const{tick:T,isRunning:B}=(0,s.interval)({timeout:1e3,start:(0,n.merge)([u,p]),stop:v});R.on(T,(e=>e-1));const j=(0,n.createStore)(!1);j.reset(e.close);const V=(0,n.createStore)(!1);V.reset(e.close);const A=(0,n.createStore)(!0);A.reset(e.close),A.on(a,((e,a)=>""===a.trim()));const D=(0,n.createStore)(!0);return D.reset(e.close),D.on(p,(()=>!1)),(0,n.sample)({source:R,filter:e=>0===e,target:v}),(0,n.sample)({source:{isAudioPlaying:L,refreshCountdownRunning:B},fn:({isAudioPlaying:e,refreshCountdownRunning:a})=>e||a,target:[j,V]}),(0,n.sample)({clock:[e.open,h,p],source:{sid:S,hash:y,type:P,swapCount:k,platform:C,captchaImage:f,captchaTrack:m,deviceId:b,isFirst:D},fn:e=>(0,i.getCaptchaLink)(e),target:E}),(0,n.sample)({clock:u,source:{sid:S,hash:y,type:P,swapCount:k,platform:C,captchaImage:f,captchaTrack:m,deviceId:b},fn:e=>(0,i.getCaptchaLink)({...e,isRefresh:!0}),target:E}),{Gate:e,answerChanged:a,audioPlaying:t,audioPaused:o,captchaLoadingStarts:l,captchaLoadingEnds:d,captchaTypeToggled:p,captchaRefreshed:u,captchaReloaded:h,captchaLoadingErrorSet:_,closeCaptcha:g,$answer:x,$captchaLoading:I,$captchaType:P,$isAudioPlaying:L,$hasLoadCaptchaError:$,$captchaSrc:E,$refreshCountdown:R,$isRefreshButtonDisabled:j,$isCaptchaTypeToggleDisabled:V,$isSubmitButtonDisabled:A,$isCaptchaModalActive:w}}},972980:(e,a,t)=>{t.d(a,{CaptchaType:()=>o.CaptchaType,Platform:()=>n.Platform,createCaptchaPopupService:()=>o.createCaptchaPopupService});var o=t(592423),n=t(621745)},621745:(e,a,t)=>{t.d(a,{Platform:()=>o,getCaptchaLink:()=>r});var o,n=t(592423),c=t(586138);!function(e){e[e.VK_WEB=0]="VK_WEB",e[e.VK_M_WEB=1]="VK_M_WEB"}(o||(o={}));const r=({sid:e,hash:a,type:t,isRefresh:o,swapCount:r,platform:s,isFirst:i,captchaImage:l,captchaTrack:d,deviceId:p})=>{const u=a?`&v=${a}`:"",h=o?"&refresh=1":"",_=!o&&r>0?"&swap_type=1":"",g=i?"&first=1":"";let v;switch(s){case 0:default:v=c.VK_WEB_APP_ID;break;case 1:v=c.VK_MVK_APP_ID}switch(t){case n.CaptchaType.IMAGE:{let a="";if(l){const e=new URLSearchParams(l);a=e.has("device_id")?e.has("device_id")&&e.get("device_id")?`${l}&s=1&width=400&resized=1`:`${l.replace("device_id=",`device_id=${p}`)}&s=1&width=400&resized=1`:`${l}&resized=1&width=400&app_id=${v}&device_id=${p}`}else a=`/captcha.php?sid=${e}&s=1&resized=1&width=400&app_id=${v}&device_id=${p}`;return`${a}${u}${h}${_}${g}`}case n.CaptchaType.AUDIO:{let a="";if(d){const e=new URLSearchParams(d);a=e.has("device_id")?e.has("device_id")&&e.get("device_id")?`${d}`:`${d.replace("device_id=",`device_id=${p}`)}`:`${d}&app_id=${v}&device_id=${p}`}else a=`/sound_captcha.php?act=get&captcha_sid=${e}&app_id=${v}&device_id=${p}`;return`${a}${u}${h}${_}${g}`}default:return""}}},447208:(e,a,t)=>{function o(e,a){const t=new IntersectionObserver(((e,t)=>{e.some((e=>e.isIntersecting))&&(a(),t.disconnect())}),{threshold:0});return t.observe(e),()=>t.disconnect()}t.d(a,{runOnceInViewport:()=>o})},303279:(e,a,t)=>{t.d(a,{handleCaptcha:()=>i});var o=t(657472),n=t(540462),c=t(265668),r=t(270959),s=t(345601);const i=e=>new Promise((async(a,t)=>{const i=e.redirect_uri;if(i)try{const t=await(0,c.showCaptchaSDK)(i);return void a({captcha_key:"",captcha_sid:e.captcha_sid,is_sound_captcha:0,success_token:t})}catch(e){if(e===o.CaptchaSDKEvents.CLOSE||e===o.CaptchaSDKEvents.OPENED)return void t()}if((0,n.partConfigEnabled)("vkcom_audio_captcha_enabled"))(0,s.showCaptchaPopup)({sid:e.captcha_sid,isRefreshEnabled:e.is_refresh_enabled,isSoundCaptchaAvailable:e.is_sound_captcha_available,captcha_track:e.captcha_track,captcha_img:e.captcha_img,onSubmit:(t,o)=>{a({captcha_sid:e.captcha_sid,captcha_key:t,is_sound_captcha:o})},onClose:()=>{t()}});else{let o=null;const c=(0,n.partConfigEnabled)("vkcom_captcha_resized")?`${e.captcha_img}&resized=1&width=400`:e.captcha_img,s=e?.is_refresh_enabled||!1,i={imgSrc:c,onSubmit:(e,t)=>{a({captcha_sid:e,captcha_key:t,is_sound_captcha:0}),o&&o.hide()},onHide:()=>{t()}};o=(0,r.showCaptchaBox)(e.captcha_sid,!1,null,i,s)}}))},345601:(e,a,t)=>{t.d(a,{showCaptchaPopup:()=>o.showCaptchaPopup});var o=t(630988)},236087:(e,a,t)=>{t.d(a,{CaptchaType:()=>o.CaptchaType,Platform:()=>o.Platform,captchaPopupService:()=>n});var o=t(972980);const n=(0,o.createCaptchaPopupService)()},630988:(e,a,t)=>{t.d(a,{showCaptchaPopup:()=>r});var o=t(474848),n=t(211413),c=t(98341);function r(e){(0,n.showMessageBoxModal)((a=>(0,o.jsx)(c.CaptchaPopup,{...a,...e,onClose:()=>{e.onClose&&e.onClose(),a.onClose()},onSubmit:(t,o)=>{e.onSubmit&&(e.onSubmit(t,o),a.onClose())}})),{width:300,onDestroy:()=>{e.onClose&&e.onClose()}})}},681735:(e,a,t)=>{t.d(a,{CaptchaAnswerField:()=>d});var o=t(474848),n=t(296540),c=t(44544),r=t(753457),s=t(236087),i=t(866467),l=t(293721);const d=(0,n.forwardRef)((({disabled:e,captchaType:a},t)=>{const d=(0,n.useRef)(null),p=(0,n.useRef)(null),u=(0,l.useStore)(s.captchaPopupService.$answer),h=(0,l.useEvent)(s.captchaPopupService.answerChanged);return(0,n.useImperativeHandle)(t,(()=>({inputFieldRef:d,inputLabelRef:p}))),(0,o.jsx)(c.FormItem,{mode:"vertical",noPadding:!0,top:a===s.CaptchaType.AUDIO?(0,o.jsx)("div",{tabIndex:0,ref:p,children:i.getLang("vkconnect_auth_audio_captcha_title")}):"",children:(0,o.jsx)(r.Input,{getRef:d,tabIndex:0,value:u,placeholder:a===s.CaptchaType.IMAGE?i.getLang("vkconnect_auth_label_captcha"):i.getLang("vkconnect_auth_label_captcha_audio_new_ux"),disabled:e,onChange:e=>h(e.target.value)})})}))},766969:(e,a,t)=>{t.d(a,{CaptchaAnswerField:()=>o.CaptchaAnswerField});var o=t(681735)},200831:(e,a,t)=>{t.d(a,{CaptchaError:()=>l});var o=t(474848),n=t(866467),c=t(293721),r=t(236087),s=t(753457),i=t(279734);const l=(0,t(296540).forwardRef)((({captchaType:e},a)=>{const t=(0,c.useEvent)(r.captchaPopupService.captchaReloaded);return(0,o.jsxs)(s.Footer,{children:[(0,o.jsx)(o.Fragment,{children:e===r.CaptchaType.IMAGE?n.getLang("vkconnect_auth_captcha_loading_error_caption"):n.getLang("vkconnect_auth_audio_captcha_loading_error_caption")}),(0,o.jsx)(i.Link,{onClick:t,getRootRef:a,role:"button","aria-label":e===r.CaptchaType.IMAGE?n.getLang("vkconnect_auth_captcha_image_loading_error_retry_aria_label"):n.getLang("vkconnect_auth_captcha_sound_loading_error_retry_aria_label"),children:n.getLang("vkconnect_auth_captcha_loading_error_refresh_text")})]})}))},165317:(e,a,t)=>{t.d(a,{CaptchaError:()=>o.CaptchaError});var o=t(200831)},932829:(e,a,t)=>{t.d(a,{CaptchaInfoButton:()=>l});var o=t(474848),n=t(296540),c=t(580539),r=t(454154),s=t(723723),i=t(866467);const l=(0,n.forwardRef)((({onClick:e},a)=>(0,o.jsx)(r.Button,{getRootRef:a,tabIndex:0,appearance:"neutral",mode:"tertiary",size:"m",before:(0,o.jsx)(c.Icon24InfoCircleOutline,{className:(0,s.getColorClass)("color_icon_secondary")}),"aria-label":i.getLang("vkconnect_auth_audio_captcha_info_text"),onClick:e})))},438105:(e,a,t)=>{t.d(a,{CaptchaInfoButton:()=>o.CaptchaInfoButton});var o=t(932829)},132015:(e,a,t)=>{t.d(a,{CaptchaPopup:()=>I});var o=t(474848),n=t(296540),c=t(293721),r=t(694244),s=t(753457),i=t(63614),l=t(303800),d=t(293116),p=t(700272),u=t(194528),h=t(175400),_=t(454154),g=t(866467),v=t(540462),f=t(836410),m=t(165317),b=t(740557),w=t(318029),C=t(766969),S=t(246407),y=t(438105),k=t(24343),x=t(236087);const I=({sid:e,isRefreshEnabled:a,isSoundCaptchaAvailable:t,captcha_track:I,captcha_img:P,onSubmit:L,onClose:$})=>{(0,c.useGate)(x.captchaPopupService.Gate,{sid:e,platform:x.Platform.VK_WEB,captchaTrack:I,captchaImage:P,deviceId:(0,S.getDeviceId)(x.Platform.VK_WEB)});const E=(0,v.partConfigEnabled)("vkcom_captcha_new_ux"),R=(0,c.useEvent)(x.captchaPopupService.captchaLoadingEnds),T=(0,c.useStore)(x.captchaPopupService.$hasLoadCaptchaError),B=(0,c.useStore)(x.captchaPopupService.$captchaLoading),j=(0,c.useEvent)(x.captchaPopupService.captchaLoadingErrorSet),V=(0,c.useStore)(x.captchaPopupService.$captchaType),A=(0,c.useStore)(x.captchaPopupService.$answer),D=(0,c.useStore)(x.captchaPopupService.$captchaSrc),M=(0,c.useStore)(x.captchaPopupService.$isSubmitButtonDisabled),z=(0,c.useStore)(x.captchaPopupService.$isCaptchaTypeToggleDisabled),F=(0,c.useEvent)(x.captchaPopupService.captchaTypeToggled),O=(0,c.useStore)(x.captchaPopupService.$isRefreshButtonDisabled),G=(0,c.useEvent)(x.captchaPopupService.captchaRefreshed),K=(0,c.useStore)(x.captchaPopupService.$refreshCountdown),W=(0,n.useRef)(null),N=(0,n.useRef)(null),H=(0,n.useRef)(null),U=(0,n.useRef)(null),q=(0,n.useRef)(null),X=(0,n.useRef)(null),J=(0,n.useRef)(null),Q=(0,n.useRef)(null),Y=V===x.CaptchaType.AUDIO,[Z,ee]=(0,n.useState)(!1),ae=(0,c.useStore)(x.captchaPopupService.$isAudioPlaying),te=e=>{e.preventDefault(),L&&L(A,Number(Y))},oe=(0,n.useCallback)((e=>{const a=Q.current||J.current||N.current,o=H.current,n=U.current,c=q.current,r=W?.current?.inputFieldRef.current,s=W?.current?.inputLabelRef.current,i=X.current,{activeElement:l}=document,d=[a,o,n,c,r,s,i].includes(l)?l:a;if("Space"===e.code&&[o,n,c,i,a].some((e=>d===e))){e.preventDefault();d.click()}function p(){Y&&!n?.disabled?n?.focus():u()}function u(){c?.disabled?h():c?.focus()}function h(){Y&&s?s?.focus():_()}function _(){r?.disabled?g():r?.focus()}function g(){E||!i?.disabled?i?.focus():v()}function v(){a?.focus()}if(t&&"Tab"===e.key&&!e.shiftKey&&d)switch(e.preventDefault(),d){case a:E||!o?.disabled?o?.focus():p();break;case o:p();break;case n:u();break;case c:h();break;case s:_();break;case r:g();break;case i:v()}function f(){r?.disabled?m():r?.focus()}function m(){Y?s?.focus():b()}function b(){c?.disabled?w():c?.focus()}function w(){Y?n?.focus():C()}function C(){E||!o?.disabled?o?.focus():S()}function S(){a?.focus()}if(t&&"Tab"===e.key&&e.shiftKey&&d)switch(e.preventDefault(),d){case a:E||!i?.disabled?i?.focus():f();break;case i:f();break;case r:m();break;case s:b();break;case c:w();break;case n:C();break;case o:S()}}),[t,E,Y]);(0,n.useEffect)((()=>(document.removeEventListener("keydown",oe),document.addEventListener("keydown",oe),()=>{document.removeEventListener("keydown",oe)})),[oe]),(0,n.useEffect)((()=>{if(Y){const e=e=>{e.ctrlKey&&!ae&&Q?.current?.click()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}}),[Y,ae]),(0,n.useEffect)((()=>{const e=N.current;!B&&V===x.CaptchaType.IMAGE&&e&&(e.tabIndex=0,e.ariaLabel=g.getLang("vkconnect_auth_captcha_image_aria_label"),e.focus()),B||V!==x.CaptchaType.AUDIO||Q.current?.focus()}),[B,V]),(0,n.useEffect)((()=>{const e=J.current;T&&e&&e.focus()}),[T]);return(0,o.jsxs)(r.ModalBox,{children:[(0,o.jsx)(s.ModalDismissButton,{onClick:$}),(0,o.jsx)(i.ModalBody,{insetLevel:1,children:(0,o.jsxs)(l.Div,{mode:"vertical",spacing:4,paddingTop:8,paddingBottom:8,children:[(0,o.jsxs)(d.Image,{getRef:N,alt:g.getLang("vkconnect_auth_captcha_image_aria_label"),src:V===x.CaptchaType.IMAGE?D:"",onLoad:R,onError:j,widthSize:268,heightSize:102,children:[B&&(0,o.jsx)(p.Spinner,{}),!B&&T&&(0,o.jsx)(m.CaptchaError,{ref:J,captchaType:V}),!T&&Y&&(0,o.jsx)(f.SoundCaptcha,{ref:Q,src:D,disabled:!E&&ae})]}),(0,o.jsx)(u.Spacing,{size:6}),(0,o.jsxs)(h.ButtonGroup,{mode:"horizontal",stretched:!0,gap:"s",style:{justifyContent:"space-between"},children:[a&&(0,o.jsx)(b.CaptchaRefreshButton,{ref:H,newCaptchaUX:E,disabled:!E&&(O||Y&&(B||T)),countdownValue:K,captchaType:V,onRefresh:()=>{G(),E&&W?.current?.inputFieldRef.current?.focus()}}),(Y||t)&&(0,o.jsxs)(h.ButtonGroup,{mode:"horizontal",gap:"s",children:[Y&&(0,o.jsx)(y.CaptchaInfoButton,{ref:U,onClick:()=>{ee((e=>!e))}}),t&&(0,o.jsx)(w.CaptchaTypeButton,{ref:q,disabled:!E&&z,captchaType:V,onToggle:()=>{F(),E&&W?.current?.inputFieldRef.current?.focus()}})]})]}),Y&&Z&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.Spacing,{size:8}),(0,o.jsx)(k.InfoBanner,{})]}),(0,o.jsx)(u.Spacing,{size:16}),(0,o.jsxs)("form",{onSubmit:te,children:[(0,o.jsx)(C.CaptchaAnswerField,{ref:W,disabled:Y&&(B||T),captchaType:V}),(0,o.jsx)(u.Spacing,{size:12}),(0,o.jsx)(h.ButtonGroup,{mode:"vertical",align:"center",stretched:!0,children:(0,o.jsx)(_.Button,{getRootRef:X,size:"l",stretched:!0,disabled:!E&&(M||Y&&(B||T)),onClick:te,tabIndex:0,children:g.getLang("vkconnect_auth_captcha_submit_button")})})]})]})})]})}},98341:(e,a,t)=>{t.d(a,{CaptchaPopup:()=>o.CaptchaPopup});var o=t(132015)},740557:(e,a,t)=>{t.d(a,{CaptchaRefreshButton:()=>d});var o=t(474848),n=t(296540),c=t(573638),r=t(454154),s=t(723723),i=t(236087),l=t(866467);const d=(0,n.forwardRef)((({newCaptchaUX:e,disabled:a,countdownValue:t,captchaType:n,onRefresh:d},p)=>(0,o.jsx)(r.Button,{getRootRef:p,disabled:a,size:"m",appearance:"neutral",mode:"tertiary",before:(0,o.jsx)(c.Icon24Refresh,{className:(0,s.getColorClass)("color_icon_secondary")}),"aria-label":n===i.CaptchaType.IMAGE?l.getLang("vkconnect_auth_captcha_refresh_button_aria_label"):l.getLang("vkconnect_auth_captcha_refresh_audio_button_aria_label_new_ux"),tabIndex:0,onClick:d,children:e||!t?l.getLang("vkconnect_refresh_captcha"):(0,l.langReplace)(l.getLang("vkconnect_refresh_captcha_via"),{time:String(t)})})))},298161:(e,a,t)=>{t.d(a,{CaptchaTypeButton:()=>p});var o=t(474848),n=t(296540),c=t(236087),r=t(963328),s=t(16547),i=t(454154),l=t(723723),d=t(866467);const p=(0,n.forwardRef)((({disabled:e,captchaType:a,onToggle:t},n)=>(0,o.jsx)(i.Button,{getRootRef:n,disabled:e,size:"m",appearance:"neutral",mode:"tertiary",before:a===c.CaptchaType.IMAGE?(0,o.jsx)(r.Icon24Headphones,{className:(0,l.getColorClass)("color_icon_secondary")}):(0,o.jsx)(s.Icon24TextOutline,{className:(0,l.getColorClass)("color_icon_secondary")}),onClick:t,"aria-label":a===c.CaptchaType.IMAGE?d.getLang("vkconnect_auth_captcha_enable_audio_aria_label"):d.getLang("vkconnect_auth_captcha_enable_image_aria_label"),tabIndex:0})))},318029:(e,a,t)=>{t.d(a,{CaptchaTypeButton:()=>o.CaptchaTypeButton});var o=t(298161)},772243:(e,a,t)=>{t.d(a,{InfoBanner:()=>s});var o=t(474848),n=t(327626),c=t(866467),r=t(549093);const s=()=>(0,o.jsx)(n.Banner,{noPadding:!0,size:"s",subheader:c.getLang("vkconnect_auth_audio_captcha_info_text"),mode:"image",imageTheme:"light",background:(0,o.jsx)("div",{className:r.default.background})})},24343:(e,a,t)=>{t.d(a,{InfoBanner:()=>o.InfoBanner});var o=t(772243)},104413:(e,a,t)=>{t.d(a,{SoundCaptcha:()=>h});var o=t(474848),n=t(296540),c=t(426622),r=t(155581),s=t(723723),i=t(271036),l=t(866467),d=t(205726),p=t(293721),u=t(236087);const h=(0,n.forwardRef)((({src:e,disabled:a},t)=>{const h=(0,n.useRef)(null),_=(0,p.useEvent)(u.captchaPopupService.audioPlaying),g=(0,p.useEvent)(u.captchaPopupService.audioPaused),v=(0,p.useEvent)(u.captchaPopupService.captchaLoadingErrorSet),f=(0,p.useEvent)(u.captchaPopupService.captchaLoadingStarts),m=(0,p.useEvent)(u.captchaPopupService.captchaLoadingEnds),b=(0,p.useStore)(u.captchaPopupService.$isAudioPlaying),w=(0,p.useStore)(u.captchaPopupService.$captchaLoading);return(0,n.useEffect)((()=>{const a=h.current;e&&a&&a.load()}),[e]),(0,o.jsxs)(o.Fragment,{children:[e&&(0,o.jsx)("audio",{ref:h,preload:"none",src:e,onLoadStart:f,onCanPlay:m,onPlay:_,onPause:g,onError:v}),!w&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.IconIllustrationSoundWaveLeft36h,{className:(0,s.getColorClass)(b?"color_icon_accent_themed":"color_icon_tertiary")}),(0,o.jsx)(i.IconButton,{getRootRef:t,size:52,disabled:a,"aria-label":l.getLang("vkconnect_auth_captcha_play_audio_button_aria_label_new_ux"),className:(0,s.getColorClass)("color_text_accent_themed"),tabIndex:0,onClick:()=>{const e=h.current;e?.readyState||e?.load(),e?.play().catch((()=>{v()}))},children:(0,o.jsx)(d.Icon40PlayCircle,{})}),(0,o.jsx)(r.IconIllustrationSoundWaveRight36h,{className:(0,s.getColorClass)(b?"color_icon_accent_themed":"color_icon_tertiary")})]})]})}))},836410:(e,a,t)=>{t.d(a,{SoundCaptcha:()=>o.SoundCaptcha});var o=t(104413)},246407:(e,a,t)=>{t.d(a,{getDeviceId:()=>s});var o=t(553608),n=t(418562),c=t(236087);const r="vk_web_captcha_device_id",s=e=>{let a;switch(e){case c.Platform.VK_WEB:a=r;break;case c.Platform.VK_M_WEB:a="vk_m_web_captcha_device_id";break;default:a=r}let t=o.vkLocalStorage.getItem(a);return t||(t=(0,n.default)(),o.vkLocalStorage.setItem(a,t)),t}},164043:(e,a,t)=>{t.d(a,{isVotingLocked:()=>i,showReportVotingForm:()=>l});var o=t(683234),n=t(754866),c=t(237625),r=t(866467),s=t(65759);const i=e=>{const a=(0,n.geByClass)("_media_voting"+e);let t=!1;return a.forEach((e=>{(0,n.hasClass)(e,"media_voting_locked")&&(t=!0)})),t},l=(e,a)=>{if((0,o.actionsMenuItemLocked)(e))return;let t,l,d;const p=void 0!==a.id;if(p)t=a.id,l=a.isBoard;else{if(d=(0,n.gpeByClass)("media_voting",e),null===d&&(0,c.debugLog)("Unable to show report voting form because there is no .media_voting element"),t=(0,n.domData)(d,"id"),i(t))return;l=(0,n.domData)(d,"board")}const u=l?"board_poll":"poll";(0,s.showReportForm)(u,0,t,(()=>{if(!p&&null!==d){const e=d.querySelector("._report_voting_button");if(null==e)return void(0,c.debugLog)("Unable to disable report voting button, because it cannot be found");e.innerHTML=r.getLang("global_report_sent"),e.onclick=null}}))}},65759:(e,a,t)=>{t.d(a,{ReportReasonIds:()=>d,afterCommentReportSubmit:()=>p,showReportForm:()=>i.showReportForm});var o=t(237625),n=t(866467),c=t(168066),r=t(864448),s=t(303279),i=t(415033);(0,c.initApi)();const l=window.vk;var d;function p(e,a,t){const c=function(e,a,t){switch(e){case"photo":return`#post${a}photo_${t}`;case"video":return`#post${a}video_${t}mv`;case"market":return`#post${a}market_${t}`}}(e,a,t);if("photo"===e){const e=document.querySelector(`${c} .dld`);null!==e&&(e.outerHTML="")}const r=document.querySelector(`${c} .reply_wrap`);null!==r?(r.style.display="none",r.outerHTML+=`<div class="dld">${n.getLang("global_report_sent")}</div>`):(0,o.debugLog)(`Unable to hide report button for ${e} comment`)}(0,r.setLoginConfig)({onCaptcha:s.handleCaptcha,domain:l?.apiConfigDomains?.loginDomain}),(0,r.setApiConfig)({onCaptcha:s.handleCaptcha,domain:l?.apiConfigDomains?.apiDomain}),function(e){e[e.NotOriginalContent=28]="NotOriginalContent"}(d||(d={}))},415033:(e,a,t)=>{t.d(a,{showReportForm:()=>i});var o=t(474848),n=t(725669),c=t(211413),r=t(540462),s=t(319756);function i(e,a,i,l,d,p,u,h){if("user"===e&&(0,r.partConfigEnabled)("content_reports_new_profile_form")){const e=(0,n.asyncComponent)((()=>Promise.all([t.e(91498),t.e(89631),t.e(21529),t.e(66434)]).then(t.bind(t,431257))),(({ReportsProfileModal:e})=>e)),r=e=>{window.location.assign(e)};(0,c.showMessageBoxModalSuspense)((t=>(0,o.jsx)(s.DIRootWebProvider,{children:(0,o.jsx)(e,{userId:a,onRedirect:r,...t})})),{onDestroy:d})}else{const r=(0,n.asyncComponent)((()=>Promise.all([t.e(91498),t.e(89631),t.e(99595)]).then(t.bind(t,716729))),(({ReportForm:e})=>e));(0,c.showMessageBoxModalSuspense)((t=>(0,o.jsx)(r,{...t,reportSource:e,reportSourceOwnerId:a,reportSourceId:i,onSubmit:l,messengerAdditionalData:p,from:u,adData:h})),{onDestroy:d})}}},310952:(e,a,t)=>{t.d(a,{createPollsAddVoteFx:()=>n,createPollsDeleteVoteFx:()=>c});t(412554);var o=t(957994);const n=({domain:e})=>e.createEffect((({query:e,controller:a,config:t,options:n})=>{const c=e.track_code?`,\n  track_code: '${e.track_code}'`:"",r=`\nvar addVoteResult = API.polls.addVote({\n  owner_id: ${e.owner_id},\n  poll_id: ${e.poll_id},\n  is_board: ${!!e.is_board},\n  answer_ids: '${e.answer_ids}'${c}\n});\n\nvar poll = API.polls.getById({\n  owner_id: ${e.owner_id},\n  poll_id: ${e.poll_id},\n  is_board: ${!!e.is_board},\n  extended: 1\n});\n\nreturn {\n  add_vote_result: addVoteResult,\n  poll: poll\n};`,s=a?.signal;return(0,o.api)("execute",{code:r},t,{signal:s,...n})})),c=({domain:e})=>e.createEffect((({query:e,controller:a,config:t,options:n})=>{const c=e.track_code?`,\n  track_code: '${e.track_code}'`:"",r=`\nvar deleteVoteResult = API.polls.deleteVote({\n  owner_id: ${e.owner_id},\n  poll_id: ${e.poll_id},\n  is_board: ${!!e.is_board}${c}\n});\n\nvar poll = API.polls.getById({\n  owner_id: ${e.owner_id},\n  poll_id: ${e.poll_id},\n  is_board: ${!!e.is_board},\n  extended: 1\n});\n\nreturn {\n  delete_vote_result: deleteVoteResult,\n  poll: poll\n};`,s=a?.signal;return(0,o.api)("execute",{code:r},t,{signal:s,...n})}))},426622:(e,a,t)=>{t.d(a,{IconIllustrationSoundWaveLeft36h:()=>o});var o=(0,t(844990).makeIcon)("IconIllustrationSoundWaveLeft36h","illustration_sound_wave_left_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_left_36h"><path d="M59.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25M42.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0zM23.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25M6.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0z" /></symbol>',72,36,!1,void 0)},155581:(e,a,t)=>{t.d(a,{IconIllustrationSoundWaveRight36h:()=>o});var o=(0,t(844990).makeIcon)("IconIllustrationSoundWaveRight36h","illustration_sound_wave_right_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_right_36h"><path d="M12.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0zM4.96 10.446c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25m24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0zM48.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0zm-15.942-1.25c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25m24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0z" /></symbol>',72,36,!1,void 0)},963328:(e,a,t)=>{t.d(a,{Icon24Headphones:()=>o});var o=(0,t(844990).makeIcon)("Icon24Headphones","headphones_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="headphones_24"><path d="M12 2.25a9 9 0 0 0-9 9V18a3 3 0 0 0 3 3h1.5A1.5 1.5 0 0 0 9 19.5v-5A1.5 1.5 0 0 0 7.5 13H5v-1.75c0-3.87 3.13-7 7-7s7 3.13 7 7V13h-2.5a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5H18a3 3 0 0 0 3-3v-6.75a9 9 0 0 0-9-9" /></symbol>',24,24,!1,void 0)},573638:(e,a,t)=>{t.d(a,{Icon24Refresh:()=>o});var o=(0,t(844990).makeIcon)("Icon24Refresh","refresh_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="refresh_24"><path d="M12 9.096a.4.4 0 0 0 .67.296l4.287-3.899a.667.667 0 0 0 0-.987L12.67.609a.4.4 0 0 0-.67.295V4a8 8 0 1 0 8 8 1 1 0 1 0-2 0 6 6 0 1 1-6-6z" /></symbol>',24,24,!1,void 0)},205726:(e,a,t)=>{t.d(a,{Icon40PlayCircle:()=>o});var o=(0,t(844990).makeIcon)("Icon40PlayCircle","play_circle_40","0 0 40 40",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 40 40" id="play_circle_40"><path fill-rule="evenodd" d="M40 20c0 11.046-8.954 20-20 20S0 31.046 0 20 8.954 0 20 0s20 8.954 20 20m-14.329 1.077a1.25 1.25 0 0 0 0-2.154l-8.787-5.175A1.25 1.25 0 0 0 15 14.826v10.348a1.25 1.25 0 0 0 1.884 1.078z" clip-rule="evenodd" /></symbol>',40,40,!1,void 0)},549093:(e,a,t)=>{t.d(a,{default:()=>o});const o={background:"InfoBanner__background--4zHoK"}}}]);try{stManager?.done("dist/web/chunks/09a00588.3034b128.js")}catch(e){}