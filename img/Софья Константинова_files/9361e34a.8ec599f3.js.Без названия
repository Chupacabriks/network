"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[39581],{50790:(e,t,n)=>{n.d(t,{useIsMounted:()=>r});var o=n(296540);const r=()=>{const e=(0,o.useRef)(!1);return(0,o.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,o.useCallback)((()=>e.current),[])}},812153:(e,t,n)=>{n.d(t,{useLottie:()=>s});var o=n(50790),r=n(296540),i=n(535130);function s(e,{play:t,show:n}={}){const{animationUrl:s,animationData:a}=e,l=(0,r.useRef)(!1),c=(0,r.useRef)(null),p=(0,r.useRef)(null),[d,u]=(0,r.useState)(!1),[y,E]=(0,r.useState)(null),[P,m]=(0,r.useState)(!1),[h,L]=(0,r.useState)(!1),A=(0,o.useIsMounted)();(0,r.useEffect)((()=>{const e=p.current;e&&!P&&(void 0!==t&&(t?e.play():e.pause()),void 0!==n&&(n?e.show():e.hide()))}),[P,t,n]),(0,r.useLayoutEffect)((()=>((async()=>{const t=p.current;t?l.current=!1:(m(!0),L(!1));const n=c.current;if((s||a)&&n&&!l.current){l.current=!0,u(!1),E(null);try{const t=await i.LottieManager.loadAnimation({containers:[n],...e});t.addEventListener("enterFrame",(()=>{requestAnimationFrame((()=>{L(!0)}))}),{once:!0}),t.addEventListener("destroy",(()=>{L(!1)}),{once:!0}),m(!1),p.current=t}catch(e){u(!0),E(e)}A()&&t?.destroy()}})(),()=>{p.current?.destroy()})),[s,a]);return{lottieError:d,lottieLoading:P,lottieLoaded:!P&&!d,lottieRendered:h,lottiePlayerRef:p,lottieContainerRef:c,lottieErrorMessage:y}}},732061:(e,t,n)=>{n.d(t,{AnimationLayer:()=>a});var o=n(474848),r=n(296540),i=n(970704),s=n(9320);const a=({layer:e,animationState:t,onAnimationPlayBackAreaLoaded:n,onAnimationPlayBackAreaFinished:a,...l})=>{const c=(0,i.isMainAnimationLayout)(e),[p,d]=(0,r.useState)(!1);return p?null:(0,o.jsx)(o.Fragment,{children:c&&(0,o.jsx)(s.MainAnimationLayout,{layer:e,onFirstFrameRender:()=>{t.markStateAsPlaying()},onAnimationLoaded:()=>{n(),t.markStateAsLoaded()},onLayerLoopCompleted:()=>{p||(a(),t.markStateAsFinished(),d(!0))},...l})})}},863826:(e,t,n)=>{n.d(t,{LottiePlayer:()=>y});var o=n(474848),r=n(327813),i=n(456921),s=n(8520),a=n(812153),l=n(296540),c=n(761894),p=n(970704),d=n(808586),u=n(274802);const y=(0,i.observer)((({layer:e,style:t,onAnimationLoaded:n,onFirstFrameRender:i,onLayerLoopCompleted:y})=>{const{popupStore:E}=(0,d.usePopupStickerWithError)(),P=(0,l.useRef)(0),m=(0,l.useRef)(!1),{isPlaying:h,onAnimationClick:L,lottiePlayer:{options:A}}=E,{onLottiePlayerError:_}=E.errorHandlers,{lottieContainerRef:S,lottiePlayerRef:T,lottieLoaded:f,lottieRendered:R,lottieErrorMessage:O}=(0,a.useLottie)({group:c.POPUP_LOTTIE_GROUP,animationUrl:e.url,...A},{play:h}),v=()=>{m.current||(y(),m.current=!0)};return(0,l.useEffect)((()=>{const e=T.current;e&&e.setOptions(A)}),[A]),(0,l.useEffect)((()=>{O&&(e=>{_?.(e),v()})(O)}),[O,_]),(0,l.useEffect)((()=>{const e=T.current;if(e)return n&&e.addEventListener("ready",n,{once:!0}),i&&e.addEventListener("firstFrame",i,{once:!0}),()=>{i&&e.removeEventListener("firstFrame",i),n&&e.removeEventListener("ready",n)}}),[f]),(0,l.useEffect)((()=>{const e=T.current;if(e)return e.addEventListener("destroy",v,{once:!0}),()=>{m.current&&e.removeEventListener("destroy",v)}}),[R]),(0,l.useEffect)((()=>{const t=T.current;if(!t)return;const n=(0,p.getAnimationLayerLoopsLimit)(e),o=()=>{if(P.current+=1,P.current===n)return v(),void t.removeEventListener("loopComplete",o)};return t.addEventListener("loopComplete",o),()=>{t.removeEventListener("loopComplete",o)}}),[f]),(0,o.jsx)("div",{onClick:e=>{L?.(e)},className:(0,s.classNames)(u.default.wrapper,{[u.default.wrapperClickable]:Boolean(L)&&A.speed!==c.SPEED_ON_DESTROY}),style:(0,r.toJS)(t),ref:S})}))},9320:(e,t,n)=>{n.d(t,{MainAnimationLayout:()=>i});var o=n(474848),r=n(863826);const i=({layer:e,popUpLayerStyle:t,onAnimationLoaded:n,onFirstFrameRender:i,onLayerLoopCompleted:s})=>(0,o.jsx)(r.LottiePlayer,{layer:e,style:t,onAnimationLoaded:n,onFirstFrameRender:i,onLayerLoopCompleted:s})},833045:(e,t,n)=>{n.d(t,{NonAnimationLayer:()=>l});var o=n(474848),r=n(296540),i=n(970704),s=n(280501),a=n(674109);const l=({layer:e,parentState:t,popUpLayerStyle:n})=>{const l=(0,i.isGradientLayer)(e),c=(0,i.isBackgroundLayer)(e),[p,d]=(0,r.useState)(!t);return(0,r.useEffect)((()=>{if(!t)return;const e=()=>{d(!1)},n=()=>{d(!0)};return t.listenable.once("onPlaying",n),t.listenable.once("onFinished",e),()=>{t.listenable.off("onPlaying",n),t.listenable.off("onFinished",e)}}),[]),p?(0,o.jsxs)(o.Fragment,{children:[l&&(0,o.jsx)(s.GradientLayer,{popUpLayerStyle:n}),c&&(0,o.jsx)(a.BackgroundLayer,{popUpLayerStyle:n})]}):null}},674109:(e,t,n)=>{n.d(t,{BackgroundLayer:()=>i});var o=n(474848),r=n(507115);const i=({popUpLayerStyle:e})=>(0,o.jsx)("div",{className:r.default.wrapper,style:e})},280501:(e,t,n)=>{n.d(t,{GradientLayer:()=>i});var o=n(474848),r=n(554371);const i=({popUpLayerStyle:e})=>(0,o.jsx)("div",{style:e,className:r.default.wrapper})},338611:(e,t,n)=>{n.d(t,{PlayBackArea:()=>c});var o=n(474848),r=n(327813),i=n(732061),s=n(833045),a=n(970704),l=n(686213);const c=({layer:e,popUpLayerStyle:t,animationState:n,onAnimationPlayBackAreaFinished:c,onAnimationPlayBackAreaLoaded:p,style:d,...u})=>{const y=(0,a.isAnimationLayer)(e);return(0,o.jsx)("div",{className:l.default.wrapper,style:(0,r.toJS)(d),...u,children:(0,o.jsxs)("div",{className:l.default.area,children:[y&&n&&(0,o.jsx)(i.AnimationLayer,{layer:e,animationState:n,popUpLayerStyle:t,onAnimationPlayBackAreaLoaded:p,onAnimationPlayBackAreaFinished:c}),!y&&(0,o.jsx)(s.NonAnimationLayer,{layer:e,parentState:n,popUpLayerStyle:t})]})})}},716253:(e,t,n)=>{n.d(t,{PopUpPortal:()=>d});var o=n(474848),r=n(327813),i=n(440961),s=n(296540),a=n(456921),l=n(338611),c=n(808586),p=n(970704);const d=(0,a.observer)((({portalElement:e=document.body})=>{const t=(0,s.useRef)(0),n=(0,s.useRef)(0),{popupStore:a}=(0,c.usePopupStickerWithError)(),d=a.playBackAreasProps.filter((({layer:e})=>(0,p.isAnimationLayer)(e))).length,u=()=>{t.current++,t.current===d&&(t.current=0,n.current=0,a.onEndPlay?.())},y=()=>{n.current++,n.current===d&&a.startPlay()};if(!a.playBackAreasProps.length)return null;const E=(0,r.toJS)(a.playBackAreasProps).map((({style:e,popUpLayerStyle:t,...n},i)=>(0,o.jsx)(l.PlayBackArea,{onAnimationPlayBackAreaLoaded:y,onAnimationPlayBackAreaFinished:u,style:(0,r.toJS)(e),popUpLayerStyle:(0,r.toJS)(t),...n},i)));return(0,i.createPortal)(E,e||document.body)}))},609969:(e,t,n)=>{n.d(t,{PopupProvider:()=>a});var o=n(474848),r=n(296540),i=n(808586),s=n(312459);const a=({popupStore:e,children:t})=>{const n=(0,r.useRef)(e??new s.PopupStickerService);return(0,o.jsx)(i.PopupContext.Provider,{value:{popupStore:n.current},children:t})}},808586:(e,t,n)=>{n.d(t,{PopupContext:()=>r,usePopupSticker:()=>s,usePopupStickerWithError:()=>i});var o=n(296540);const r=(0,o.createContext)(null);function i(){const e=(0,o.useContext)(r);if(null===e)throw new Error("You have forgotten to wrap your root component with PopupProvider");return e}function s(){const e=(0,o.useContext)(r);return null===e?{popupStore:void 0}:e}},761894:(e,t,n)=>{n.d(t,{CONTAINER_ID_DATASET_PROPERTY:()=>l,CONTAINER_ID_DATA_DEFAULT_VALUE:()=>i,CONTAINER_ID_DATA_PROPERTY:()=>a,ConflictActionsTypes:()=>g,CustomPopUpLayerTypes:()=>_,DEDUCTIBLE_DATA_PROPERTY:()=>d,DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY:()=>u,DEFAULT_LOOP_LIMIT:()=>T,DEFAULT_PLAYER_OPTIONS:()=>h,DEFAULT_POPUP_CONTAINER_DATA_PROPERTY:()=>y,DEFAULT_POSITION_X:()=>R,DEFAULT_POSITION_Y:()=>O,DEFAULT_SCALE_RATIO:()=>f,FULL_SCREEN_CONTAINER_DATA_PROPERTY:()=>p,FULL_SCREEN_DATA_DEFAULT_VALUE:()=>s,MIN_SIZE_FOR_PLAY:()=>C,MIN_SIZE_FOR_SCALE:()=>v,POPUP_LOTTIE_GROUP:()=>I,POPUP_POSITION_DEFAULT_VALUE:()=>P,POPUP_POSITION_PROPERTY:()=>E,POPUP_STICKER_IM_CONTAINER:()=>c,PopUpLayerTypes:()=>A,PopUpPositionTypes:()=>S,SCREEN_MODIFICATOR:()=>m,SPEED_ON_DESTROY:()=>L});var o=n(157951),r=n(351089);const i="common_container",s="body",a="data-popup-sticker-container-id",l=(0,r.dataAttrKeyToDatasetKey)(a),c="popup-sticker-im-container",p="data-popup-sticker-full-screen-container",d="data-popup-sticker-deductible",u="data-popup-sticker-deductible-full-screen",y="data-popup-sticker-use-common",E="data-popup-sticker-position",P="fixed",m="screen",h={speed:1,loop:!0,autoplay:!1,cache:!1,lazyLoading:!0,direction:o.LottiePlayerDirection.FORWARD,strictCache:!0},L=3,A={Gradient:"gradient",FullScreen:"animation_fullscreen",Fixed:"animation_fixed"},_={Background:"background"},S={FullScreen:"fullscreen",Fixed:"fixed",TopFullScreen:"topFullScreen"},T=1,f=1,R="center",O="middle",v=384,C=64,I="Popup",g={ChangeModificator:"changeModificator",DontShow:"dontShow"}},459126:(e,t,n)=>{n.d(t,{AnimationState:()=>d});var o=n(434518),r=n(763812),i=n(584053);const s="preparing",a="loaded",l="playing",c="finished";var p=(0,r._)("_status");class d extends i.Emitter{get status(){return(0,o._)(this,p)[p]}constructor(){super(),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,o._)(this,p)[p]=s,this.markStateAsLoaded=()=>{(0,o._)(this,p)[p]=a,this.emit("onLoaded")},this.markStateAsPlaying=()=>{(0,o._)(this,p)[p]=l,this.emit("onPlaying")},this.markStateAsFinished=()=>{(0,o._)(this,p)[p]=c,this.emit("onFinished")}}}},129116:(e,t,n)=>{n.d(t,{checkPositionConflict:()=>s});var o=n(970704),r=n(175444),i=n(761894);const s=(e,{bottom:t,right:n,top:s,left:a},l)=>{const c={...l};for(const p of e){if(p.popUpPositions&&!p.popUpPositions.includes((0,r.getPopUpPositionType)(l)))continue;const e=document.querySelector(p.blockSelector);if(!e)continue;const d=e.getBoundingClientRect();if(a<=d.right&&n>=d.left&&s<=d.bottom&&t>=d.top)return p.action===i.ConflictActionsTypes.DontShow?null:(0,o.changeLayerPosition)(c)}return c}},28861:(e,t,n)=>{n.d(t,{createDestroyListeners:()=>o,setDestroyListeners:()=>r});const o=e=>{const t=e=>{document.removeEventListener("wheel",e),document.removeEventListener("touchmove",e),window.removeEventListener("resize",e)},n=()=>{t(n),e()};return{addDestroyListener:()=>{document.addEventListener("wheel",n,{once:!0}),document.addEventListener("touchmove",n,{once:!0}),window.addEventListener("resize",n,{once:!0})},removeDestroyListener:t.bind(void 0,n),handleDestroy:n}},r=(e,t)=>({...e,onEndPlay:()=>{t.removeDestroyListener(),e.onEndPlay?.()},onEndPrepare:n=>{n&&t.addDestroyListener(),e.onEndPrepare?.(n)},onAnimationClick:n=>{t.handleDestroy(),e.onAnimationClick?.(n)}})},686933:(e,t,n)=>{n.d(t,{getAnimationAreaStyle:()=>i});var o=n(761894),r=n(970704);const i=({width:e,height:t},n,i)=>{const s={...i},{position_y:a,position_x:l}=(0,r.getAnimationLayerPosition)(n),c=l.replace(o.SCREEN_MODIFICATOR,"").trim(),p=a.replace(o.SCREEN_MODIFICATOR,"").trim();return s.position="absolute","center"===c?(s.left=.5*e,s.transform="translateX(-50%)"):s.left="left"===c?0:e-parseInt(s.width),"middle"===p?(s.top=.5*t,s.transform="translateY(-50%)"):s.top="top"===p?0:t-parseInt(s.height),"middle"===p&&"center"===c&&(s.transform="translate(-50%, -50%)"),s}},16880:(e,t,n)=>{n.d(t,{getBasePropsForPlaybackAreas:()=>d});var o=n(459126),r=n(175444),i=n(679500),s=n(709467),a=n(686933),l=n(129116),c=n(970704);function p(e,t,n,d){if((0,c.isGradientLayer)(e)){if(!d)return null;const t={...d.popUpLayerStyle,top:"unset",left:"unset",transform:"unset"};return{layer:e,style:d.style,animationState:d.animationState,popUpLayerStyle:(0,s.getGradientAreaStyle)(e,t)}}const u=(0,r.getPopUpPositionType)(e),{playBackAreaStyle:y,topByViewport:E}=(0,i.getPlayBackAreaStyle)(u,t);if((0,c.isBackgroundLayer)(e))return{layer:e,style:y,popUpLayerStyle:e.style};const P=new o.AnimationState;if((0,c.isBackgroundAnimationLayout)(e))return null;const m=parseInt(y.width),h=parseInt(y.height);let L=Math.min(m,h);const A=(0,c.getAnimationLayerScaleRatio)(e);if((0,c.isCanScale)(L)&&(L*=A),(0,c.isFullScreenLayer)(e)){const e=.5*Math.min(document.documentElement.clientHeight,document.documentElement.clientWidth);L>e&&(L=e)}if(!(0,c.isCanPlay)(L))return null;const _={height:L,width:L},S=(0,a.getAnimationAreaStyle)({width:m,height:h},e,_),T=E+parseInt(S.top),f=E+parseInt(S.left),R=T+L,O=f+L,v=(0,l.checkPositionConflict)(n,{top:T,left:f,bottom:R,right:O},e);return v?(0,c.checkPositionIsEqual)(e,v)?{animationState:P,layer:e,popUpLayerStyle:S,style:y}:p(v,t,[],null):null}const d=({layers:e,popUpElements:t,conflictBlocks:n})=>{const o=[...e].reverse(),r=[];let i=null;for(const e of o){const o=p(e,t,n,i);(0,c.isMainAnimationLayout)(e)&&(i=o),(0,c.isGradientLayer)(e)&&(i=null),o&&r.push(o)}return r.reverse(),r}},693217:(e,t,n)=>{n.d(t,{findFixedElement:()=>a,getDataAttrs:()=>r,getDeductibleDataAttrs:()=>s,getPopupElementsFromFixedElement:()=>c,getStringDataAttrs:()=>i});var o=n(761894);const r=e=>{const{popupStickerUseCommon:t="false",popupStickerContainerId:n,popupStickerFullScreenContainer:r,popupStickerPosition:i=o.POPUP_POSITION_DEFAULT_VALUE}=e,s={[o.DEFAULT_POPUP_CONTAINER_DATA_PROPERTY]:t,[o.POPUP_POSITION_PROPERTY]:i,[o.CONTAINER_ID_DATA_PROPERTY]:n};return r&&(s[o.FULL_SCREEN_CONTAINER_DATA_PROPERTY]=r),s},i=e=>{let t="";const n=r(e);return Object.entries(n).forEach((([e,n])=>{t+=`${e}='${n}' `})),t.trim()},s=e=>{const{popupStickerDeductible:t,popupStickerDeductibleFullScreen:n}=e,r={};return t&&(r[o.DEDUCTIBLE_DATA_PROPERTY]=t),n&&(r[o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY]=n),r},a=e=>e.closest(`[${o.CONTAINER_ID_DATA_PROPERTY}]`)||document.body;function l(e,t,n,r,i,s=null){let a=[...document.querySelectorAll(`[${t}=${r}]`)];switch(i&&(a=[...a,...document.querySelectorAll(`[${t}=${o.CONTAINER_ID_DATA_DEFAULT_VALUE}]`)]),a.push(n),e){case"lower":case"parent":a=a.sort(((e,t)=>e.getBoundingClientRect().top-t.getBoundingClientRect().top));break;case"upper":a=a.sort(((e,t)=>e.getBoundingClientRect().bottom-t.getBoundingClientRect().bottom))}const l=a.findIndex((e=>e===n));let c;switch(e){case"upper":case"parent":c=a[l-1]||null;break;case"lower":c=a[l+1]||null;break;default:c=a[0]||null}return c||s}const c=(e,t)=>{const{popupStickerContainerId:n,popupStickerPosition:r,popupStickerUseCommon:i}=(e=>{const{popupStickerUseCommon:t="false",popupStickerPosition:n=o.POPUP_POSITION_DEFAULT_VALUE,popupStickerContainerId:r=o.CONTAINER_ID_DATA_DEFAULT_VALUE}=e.dataset;return{popupStickerContainerId:r,popupStickerUseCommon:t,popupStickerPosition:n}})(e);let s="true"===i;return{fixedElement:e,headerElement:l("upper",o.DEDUCTIBLE_DATA_PROPERTY,t,n,s),footerElement:l("lower",o.DEDUCTIBLE_DATA_PROPERTY,t,n,s),fullScreenElement:l("parent",o.FULL_SCREEN_CONTAINER_DATA_PROPERTY,t,n,s,document.body),fullScreenHeaderElement:l("upper",o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,n,s),fullScreenFooterElement:l("lower",o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,n,s),position:r}}},709467:(e,t,n)=>{n.d(t,{getGradientAreaStyle:()=>a});var o=n(761894);const r={bottom:"0deg",left:"90deg",top:"180deg",right:"270deg"},i="255, 255, 255",s=`radial-gradient(50.13% 50.13% at 50.13% 50.13%, rgba(${i}, 0.4) 0%, rgba(${i}, 0) 100%)`,a=({position:e},t)=>{const n={position:"absolute"},i=e.replace(`${o.SCREEN_MODIFICATOR} `,"");return"middle"===i?(n.top="50%",n.left="50%",n.transform="translate(-50%, -50%)",n.background=s,{...t,...n}):(["top","bottom"].includes(i)?n.width="100%":n.height="100%",n[i]=0,n["--gradient-deg"]=r[i]||r.top,{...t,...n})}},679500:(e,t,n)=>{n.d(t,{getPlayBackAreaStyle:()=>r});var o=n(761894);function r(e,{fullScreenHeaderElement:t,fullScreenFooterElement:n,fullScreenElement:r,fixedElement:i,footerElement:s,headerElement:a,position:l}){const c=e===o.PopUpPositionTypes.FullScreen,{top:p,left:d,bottom:u}=r.getBoundingClientRect(),y=c?r:i,{top:E,bottom:P,left:m,width:h}=y.getBoundingClientRect(),{bottom:L}=a?.getBoundingClientRect()||{bottom:-1/0},{bottom:A}=t?.getBoundingClientRect()||{bottom:-1/0},_=Math.max(L,E)<0,S=e===o.PopUpPositionTypes.TopFullScreen||_,T=!c&&!S,f=T?L:A,R=c?n:s,O=R?.getClientRects().length,{top:v}=R&&O?R.getBoundingClientRect():{top:1/0};let C=0;"absolute"===l&&(C=-p);const I=[];f>0&&I.push(C+f),T&&E>=0&&I.push(C+E),p<0&&I.push(C);const g=Math.max(...I,0),k=r===document.body?document.documentElement.clientHeight:function(e){return Math.min(e,document.documentElement.clientHeight)}(u),D=[C+k,y===document.body?document.documentElement.clientHeight:C+P,C+v],F=Math.min(...D)-g,b=function(e){return Math.min(e,document.documentElement.clientWidth)}(h),U=m-d,N={position:l};N.top=`${g}px`,N.left=`${U}px`,N.width=`${b}px`,N.height=`${F}px`;return{playBackAreaStyle:N,topByViewport:g-C}}},175444:(e,t,n)=>{n.d(t,{getPopUpPositionType:()=>i});var o=n(970704),r=n(761894);function i(e){return(0,o.isFullScreenLayer)(e)?r.PopUpPositionTypes.FullScreen:(0,o.isTopFullScreenLayer)(e)?r.PopUpPositionTypes.TopFullScreen:r.PopUpPositionTypes.Fixed}},970704:(e,t,n)=>{n.d(t,{changeLayerPosition:()=>P,checkPositionIsEqual:()=>m,getAnimationLayerLoopsLimit:()=>i,getAnimationLayerPosition:()=>r,getAnimationLayerScaleRatio:()=>s,isAnimationLayer:()=>d,isBackgroundAnimationLayout:()=>c,isBackgroundLayer:()=>l,isCanPlay:()=>L,isCanScale:()=>h,isFullOrPartiallyFullScreenLayer:()=>E,isFullScreenLayer:()=>y,isGradientLayer:()=>a,isMainAnimationLayout:()=>p,isTopFullScreenLayer:()=>u});var o=n(761894);const r=e=>{const{position_x:t,position_y:n}=e;return{position_x:t||o.DEFAULT_POSITION_X,position_y:n||o.DEFAULT_POSITION_Y}},i=e=>{const{loops_limit:t=o.DEFAULT_LOOP_LIMIT}=e;return t},s=e=>{const{scale_ratio:t=o.DEFAULT_SCALE_RATIO}=e;return t},a=e=>e.type===o.PopUpLayerTypes.Gradient,l=e=>e.type===o.CustomPopUpLayerTypes.Background,c=e=>e.type===o.PopUpLayerTypes.FullScreen,p=e=>e.type===o.PopUpLayerTypes.Fixed,d=e=>c(e)||p(e),u=e=>{if(!p(e))return!1;const{position_x:t,position_y:n}=r(e);return!t.includes(o.SCREEN_MODIFICATOR)&&n===`${o.SCREEN_MODIFICATOR} top`},y=e=>{if(l(e)||c(e))return!0;if(a(e))return e.position.includes(o.SCREEN_MODIFICATOR);if(p(e)){const{position_x:t,position_y:n}=r(e);return t.includes(o.SCREEN_MODIFICATOR)&&n.includes(o.SCREEN_MODIFICATOR)}return!1},E=e=>y(e)||u(e),P=e=>{const{position_x:t,position_y:n}=r(e);return E(e)?{...e,position_x:t.replace(`${o.SCREEN_MODIFICATOR} `,""),position_y:n.replace(`${o.SCREEN_MODIFICATOR} `,"")}:{...e,position_x:`${o.SCREEN_MODIFICATOR} ${t}`,position_y:`${o.SCREEN_MODIFICATOR} ${n}`}},m=(e,t)=>d(e)&&d(t)?t.position_y===e.position_y&&e.position_x===t.position_x:!(!a(e)||!a(t))&&t.position===e.position,h=e=>e>=o.MIN_SIZE_FOR_SCALE,L=e=>e>=o.MIN_SIZE_FOR_PLAY},429106:(e,t,n)=>{n.d(t,{PopupAnimationObserver:()=>r});var o=n(8520);class r{createScrollEndHandler(){return(0,o.debounce)((()=>{this.isScrolling=!1,this.observer&&this.isInView&&this.handleObserve()}),this.SCROLL_LISTENER_DELAY)}createObserveEndHandler(){return(0,o.debounce)((e=>{this.isInView=e,this.isInView&&!this.isScrolling&&this.handleObserve()}),this.OBSERVE_LISTENER_DELAY)}addScrollListeners(){document.addEventListener("wheel",this.onScroll,{passive:!0}),document.addEventListener("touchmove",this.onScroll,{passive:!0})}clearScrollListeners(){document.removeEventListener("wheel",this.onScroll),document.removeEventListener("touchmove",this.onScroll)}observe(e,t,n,o){this.callback=t,this.observer?(this.clearObserver(),o!==this.targetId&&this.disconnectCallback?.()):this.addScrollListeners(),this.targetId=o,this.disconnectCallback=n,this.observer=new IntersectionObserver((e=>{const t=e[e.length-1];t&&this.onObserveEnd(t.isIntersecting)}),{rootMargin:"0px",threshold:1}),this.observer.observe(e)}clearObserver(){this.observer?.disconnect(),this.observer=void 0}handleObserve(){this.clearScrollListeners(),this.clearObserver(),this.callback?.(),this.callback=void 0,this.disconnectCallback=void 0}constructor(){this.isScrolling=!1,this.isInView=!1,this.SCROLL_LISTENER_DELAY=1e3,this.OBSERVE_LISTENER_DELAY=500,this.onScrollEnd=this.createScrollEndHandler(),this.onScroll=()=>{this.isScrolling=!0,this.onScrollEnd()},this.onObserveEnd=this.createObserveEndHandler()}}},612517:(e,t,n)=>{n.d(t,{PopupAnimationObserver:()=>p.PopupAnimationObserver,addConflictBlocksNative:()=>y,destroyByRemoveEventNative:()=>P,destroyBySpeedIncrementEventNative:()=>E,handlePlayPopUpNative:()=>u});var o=n(474848),r=n(205338),i=n(558137),s=n(716253),a=n(609969),l=n(312459),c=n(761894),p=n(429106);const d=(0,i.makeSharedState)("sticker-popup",(()=>new l.PopupStickerService),{version:2})();function u({stickerElement:e,layers:t,onEndPlay:n,containersIdsToMountIn:i,zIndexMountNode:l,...p}){const u=document.createElement("div");let y;d.prepare({stickerElement:e,layers:t,mountNode:()=>{const t=e.closest(`[${c.CONTAINER_ID_DATA_PROPERTY}]`),n=t??document.body,{popupFullScreenSelector:p=c.FULL_SCREEN_DATA_DEFAULT_VALUE}=n.dataset,E=t?.dataset[c.CONTAINER_ID_DATASET_PROPERTY]&&i?.[t.dataset[c.CONTAINER_ID_DATASET_PROPERTY]],P=E?t:document.querySelector(p)??document.body;E&&(u.style.zIndex=String(l??2),u.style.position="relative"),P.prepend(u),y=(0,r.createRoot)(u),y.render((0,o.jsx)(a.PopupProvider,{popupStore:d,children:(0,o.jsx)(s.PopUpPortal,{portalElement:u})}))},onEndPlay:()=>{n?.(),y?.unmount(),u.remove()},...p})}function y(e){d.conflictBlocks.addConflictBlock(e)}function E(){d.destroyBySpeedIncrement()}function P(){d.destroyByRemove()}},3130:(e,t,n)=>{n.d(t,{LottiePlayer:()=>i});var o=n(327813),r=n(761894);class i{constructor(){this.options={...r.DEFAULT_PLAYER_OPTIONS},this.setOptions=e=>{this.options=e},this.setOption=({key:e,value:t})=>{typeof this.options[e]==typeof t&&(this.options={...this.options,[e]:t})},this.reset=()=>{this.options={...r.DEFAULT_PLAYER_OPTIONS}},(0,o.makeAutoObservable)(this)}}},312459:(e,t,n)=>{n.d(t,{PopupStickerService:()=>d});var o=n(327813),r=n(3130),i=n(493940),s=n(28861),a=n(16880),l=n(693217),c=n(761894),p=n(377803);class d{constructor(){this.isPlaying=!1,this.isPreparing=!1,this.playBackAreasProps=[],this.onAnimationClick=null,this.onEndPlay=null,this.onEndPrepare=null,this.errorHandlers={},this.conflictBlocks=new i.PositionConflict,this.lottiePlayer=new r.LottiePlayer,this.setLottiePlayerOptions=e=>{this.isPlaying&&this.lottiePlayer.setOptions(e)},this.setLottiePlayerOption=e=>{this.isPlaying&&this.lottiePlayer.setOption(e)},this.preparePreview=e=>{const t=e.layers.slice();t.unshift({type:c.CustomPopUpLayerTypes.Background,style:{opacity:"0.9",background:p.default.colorBackgroundModal.normal.value}}),this.prepare({...e,layers:t})},this.prepareWithDestroyEvent=e=>{const t=(0,s.createDestroyListeners)(this.destroyBySpeedIncrement.bind(this));this.prepare((0,s.setDestroyListeners)(e,t))},this.prepare=({layers:e,stickerElement:t,onEndPrepare:n=null,onEndPlay:o=null,onAnimationClick:r=null,errorHandlers:i,mountNode:s})=>{if(this.isPlaying||this.isPreparing)throw n?.(!1),new Error("Pop-up stickers are already playing");this.isPreparing=!0;const c=(0,l.findFixedElement)(t),p=(0,l.getPopupElementsFromFixedElement)(c,t),d=(0,a.getBasePropsForPlaybackAreas)({layers:e,popUpElements:p,conflictBlocks:this.conflictBlocks.blocks}),u=Boolean(d.length),y=()=>{this.reset(),o?.()};this.onEndPrepare=n,this.onEndPlay=y,this.onAnimationClick=r,u&&s?.(),this.playBackAreasProps=d,i&&(this.errorHandlers=i),u||(n?.(!1),y())},this.destroyBySpeedIncrement=()=>{this.setLottiePlayerOption({key:"speed",value:c.SPEED_ON_DESTROY})},this.destroyByRemove=()=>{this.onEndPlay?this.onEndPlay():this.reset()},this.startPlay=()=>{this.isPlaying=!0,this.isPreparing=!1,this.onEndPrepare?.(!0)},this.reset=()=>{this.isPlaying=!1,this.isPreparing=!1,this.playBackAreasProps=[],this.onEndPlay=null,this.onAnimationClick=null,this.onEndPrepare=null,this.errorHandlers={},this.lottiePlayer.reset()},(0,o.makeAutoObservable)(this)}}},493940:(e,t,n)=>{n.d(t,{PositionConflict:()=>r});var o=n(327813);class r{constructor(){this.blocks=[],this.addConflictBlock=e=>{this.blocks.push(e)},this.removeConflictBlockBySelector=e=>{this.blocks.filter((t=>t.blockSelector===e))},(0,o.makeAutoObservable)(this)}}},351089:(e,t,n)=>{n.d(t,{dataAttrKeyToDatasetKey:()=>o});const o=e=>e.slice(5).split("-").map(((e,t)=>0!==t?e.charAt(0).toUpperCase()+e.slice(1):e)).join("")},274802:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"LottiePlayer__wrapper--TRe0Y",wrapperClickable:"LottiePlayer__wrapperClickable--us5Hc"}},507115:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"BackgroundLayer__wrapper--ZKEnV"}},554371:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"GradientLayer__wrapper--2QjDc"}},686213:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"PlayBackArea__wrapper--QT0CO",area:"PlayBackArea__area--GdpFO"}}}]);try{stManager?.done("dist/web/chunks/9361e34a.8ec599f3.js")}catch(e){}