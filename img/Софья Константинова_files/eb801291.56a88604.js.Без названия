"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[24593],{780345:(e,t,s)=>{s.d(t,{GroupsGroupFullMemberStatusEnumNames:()=>i});const i={NOT_A_MEMBER:0,MEMBER:1,NOT_SURE:2,DECLINED:3,HAS_SENT_A_REQUEST:4,INVITED:5}},454236:(e,t,s)=>{s.d(t,{GroupsGroupIsClosedEnumNames:()=>i});const i={OPEN:0,CLOSED:1,PRIVATE:2}},26655:(e,t,s)=>{s.d(t,{ClipPlayerWidget:()=>C});var i=s(474848),o=s(296540),r=s(822062),a=s(988418),h=s(783856),d=s(723723),n=s(194528),l=s(285056),c=s(344356),u=s(454154),m=s(456921),g=s(132028),p=s(26027),v=s(98967),b=s(149333),M=s(686106),k=s(491761),S=s(18620);const y=(0,m.observer)((function(){const e=(0,S.useClipPlayerWebModel)(),{title:t,video:s,cover:m,mode:g="contain",width:y,ratio:C,playing:_=!1,loop:A=!1,onVideoCurQualityChanged:f,onDurationChanged:P,onStalledChanged:I,onPositionChanged:w,onPlayingChanged:G,onStarted:F,onLooped:E,onEnded:R,onVideoVolumeChanged:T,isControls:B,isDeleted:V,isRestricted:j,hrefMore:x,onClick:O,togglePlay:L,onMuteChanged:N,module:U="clips",videoRawId:W,restrictionData:D,borderRadius:H}=e.props.current,{activeVolume:q,videoIsEnded:z,videoIsMuted:Q,currentTime:J,setVideoIsEnded:K,muteButtonClick:X,volumeChange:Y,setCurrentTime:Z}=e.clipPlayer,{setRemovedRestriction:$,getRemovedRestriction:ee,restrictionEnabled:te}=e.restriction,se=(0,b.useLangs)();(0,o.useEffect)((()=>{N?.(Q)}),[Q]);const ie=(0,o.useCallback)((e=>{K(e),e&&_&&L()}),[z]),oe=()=>{W&&($(W),!_&&L())},re=(0,o.useCallback)((e=>{w?.(e),Z(e)}),[w]);return te&&W&&D?.blur&&!ee(W)?(0,i.jsx)(r.ClipCard,{width:y,ratio:C,mode:g,cover:m,blurred:!0,borderRadius:H,children:(0,i.jsx)(a.ClipControlsLayout,{onClick:()=>O?.(J),noControls:!0,centerComponent:W&&D?.blur&&!ee(W)&&(0,i.jsx)(k.ClipPlayerRestrictionForBlurPlaceholder,{title:D.title,text:D?.text,buttonText:D?.button?.title,onClick:oe})})}):(0,i.jsxs)(r.ClipCard,{width:y,ratio:C,mode:g,cover:m,borderRadius:H,children:[(0,i.jsx)(h.Overlay,{centered:!0,children:s&&(0,i.jsx)(M.ClipsPlayer,{loop:A,muted:Q,volume:q,onVideoCurQualityChanged:f,onLooped:E,onStarted:F,onPlayingChanged:G,onPositionChanged:re,onStalledChanged:I,onVideoEndedChanged:ie,onDurationChanged:P,onEnded:R,onVideoVolumeChanged:T,playing:_,video:s,mode:g,module:U,platform:"web"})}),(0,i.jsx)(a.ClipControlsLayout,{onClick:()=>O?.(J),noControls:!B||z,title:t,playing:_,onMuteButtonClick:X,onVolumeChange:Y,volume:Q?0:q,togglePlay:L,hasGradient:z,unavailable:V||j,centerComponent:(V||j||z)&&(0,i.jsxs)(i.Fragment,{children:[V&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Icon56DeleteOutline,{className:(0,d.getColorClass)("color_icon_secondary")}),(0,i.jsx)(n.Spacing,{size:8}),(0,i.jsx)(l.Title,{level:"3",weight:"3",className:(0,d.getColorClass)("color_text_secondary"),children:(0,i.jsx)(c.Interpolate,{children:se.getLang("video_feed_player_clip_deleted")})})]}),j&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Icon56LockOutline,{className:(0,d.getColorClass)("color_icon_secondary")}),(0,i.jsx)(n.Spacing,{size:8}),(0,i.jsx)(l.Title,{level:"3",weight:"3",className:(0,d.getColorClass)("color_text_secondary"),children:(0,i.jsx)(c.Interpolate,{children:se.getLang("video_clip_restriction_user_access")})})]}),z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Button,{mode:"secondary",appearance:"overlay",size:"l",href:x,children:se.getLang("video_feed_player_clip_more")}),(0,i.jsx)(n.Spacing,{size:20}),(0,i.jsx)(u.Button,{mode:"link",appearance:"overlay",size:"l",onClick:()=>!_&&L(),children:se.getLang("video_feed_player_clip_repeat")})]})]})})]})})),C=(0,g.createWidget)(S.ClipPlayerWebModelProvider,y)},350238:(e,t,s)=>{s.d(t,{ClipPlayerRestrictionForBlurPlaceholder:()=>l});var i=s(474848),o=s(753457),r=s(720836),a=s(723723),h=s(285056),d=s(454154),n=s(983754);const l=({title:e,text:t,buttonText:s,onClick:l})=>(0,i.jsx)(o.AppearanceProvider,{value:"dark",children:(0,i.jsx)(r.Placeholder,{icon:(0,i.jsx)(n.Icon56HideOutline,{className:(0,a.getColorClass)("color_icon_contrast")}),header:(0,i.jsx)(h.Title,{level:"2",weight:"2",className:(0,a.getColorClass)("color_text_contrast"),children:e}),action:s?(0,i.jsx)(d.Button,{size:"m",onClick:l,mode:"outline",appearance:"overlay","data-testid":"clips-carousel-placeholder-blur-button",children:s}):void 0,children:t&&e!==t&&(0,i.jsx)(o.Text,{className:(0,a.getColorClass)("color_text_contrast"),children:t})})})},580994:(e,t,s)=>{s.d(t,{ClipPlayerRestrictionForBlurPlaceholder:()=>i.ClipPlayerRestrictionForBlurPlaceholder});var i=s(350238)},491761:(e,t,s)=>{s.d(t,{ClipPlayerRestrictionForBlurPlaceholder:()=>i.ClipPlayerRestrictionForBlurPlaceholder});var i=s(580994)},745572:(e,t,s)=>{s.d(t,{ClipPlayerRestrictionForBlurPlaceholder:()=>o.ClipPlayerRestrictionForBlurPlaceholder,ClipPlayerWidget:()=>i.ClipPlayerWidget});var i=s(26655),o=s(491761)},18620:(e,t,s)=>{s.d(t,{ClipPlayerWebModelProvider:()=>c,useClipPlayerWebModel:()=>l});var i=s(331635),o=s(327813),r=s(132028),a=s(24516),h=s(686106),d=s(270383);class n{[r.update](){this.clipPlayer.setVideoMuted(Boolean(this.props.current.muted))}constructor(e,t){this.props=e,this.userEnv=t,this.clipPlayer=new h.ClipPlayerViewModel(this.props,this.userEnv),this.restriction=new d.ClipRestrictionModel(this.userEnv),(0,o.makeAutoObservable)(this)}}n=(0,i.__decorate)([r.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.Props?Object:r.Props,void 0===a.UserEnv?Object:a.UserEnv])],n);const{useModel:l,Provider:c}=(0,r.createProvider)(n)},446314:(e,t,s)=>{s.d(t,{ClipPlayerRestrictionForBlurPlaceholder:()=>i.ClipPlayerRestrictionForBlurPlaceholder,ClipPlayerWidget:()=>i.ClipPlayerWidget});var i=s(745572)},130270:(e,t,s)=>{s.d(t,{AccountInfoService:()=>d});var i=s(331635),o=s(327813),r=s(21632),a=s(955060),h=s(132028);class d{get isLoading(){return this._isLoading}async request(e){return this._isLoading=!0,this.abortController=new AbortController,this.accountApi.getInfo(e,{signal:this.abortController?.signal})}async fetch(e={}){const t=this.fieldsToString(e.fields),s={fields:t};this.reset();try{const e=await this.request(s);return this.settingsMap.set(t,e),e}catch(e){const t=new Error("Fail to fetch account settings",{cause:e});this.errorLogger.log(t)}finally{this._isLoading=!1,this.requestMap.delete(t)}}async ensure(e={}){const t=this.fieldsToString(e.fields),s=this.requestMap.get(t);if(s)return s;const i=this.settingsMap.get(t);if(i)return i;const o=this.fetch(e);return this.requestMap.set(t,o),o}fieldsToString(e=[]){return e.sort().join(",")}reset(){this.settingsMap.clear(),this.requestMap.clear(),this._isLoading=!1,this.abortController?.abort()}constructor(e,t){this.accountApi=e,this.errorLogger=t,this.abortController=null,this._isLoading=!1,this.settingsMap=new Map,this.requestMap=new Map,(0,o.makeAutoObservable)(this)}}d=(0,i.__decorate)([h.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.AccountApi?Object:r.AccountApi,void 0===a.ErrorLogger?Object:a.ErrorLogger])],d)},823274:(e,t,s)=>{s.d(t,{GroupsBaseFieldService:()=>o});var i=s(327813);class o{getIsLoading(e){return!!this.loadings.get(e)}setValue(e,t){this.data.set(e,t)}getValue(e){return this.data.get(e)}async edit(e,t){if(this.loadings.get(e))return this.loadings.get(e);try{this.loadings.set(e,t()),await this.loadings.get(e)}catch(e){this.errorBoundary(e)}finally{(0,i.runInAction)((()=>{this.loadings.set(e,null)}))}}constructor(e=(e=>console.error(e))){this.data=new Map,this.loadings=new Map,this.errorBoundary=e,(0,i.makeAutoObservable)(this)}}},504715:(e,t,s)=>{s.d(t,{GroupsFavoriteService:()=>d});var i=s(331635),o=s(327813),r=s(972573),a=s(132028),h=s(823274);class d{getIsFavorite(e){return this.baseFieldService.getValue(e)}setIsFavorite(e,t){return this.baseFieldService.setValue(e,t)}add(e){return this.baseFieldService.edit(e,(async()=>{await this.faveApi.addPage({group_id:e}),this.setIsFavorite(e,!0)}))}remove(e){return this.baseFieldService.edit(e,(async()=>{await this.faveApi.removePage({group_id:e}),this.setIsFavorite(e,!1)}))}toggle(e){const t=this.getIsFavorite(e);if(void 0!==t)return t?this.remove(e):this.add(e)}getIsLoading(e){return this.baseFieldService.getIsLoading(e)}constructor(e){this.faveApi=e,this.baseFieldService=new h.GroupsBaseFieldService,(0,o.makeAutoObservable)(this)}}d=(0,i.__decorate)([a.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.FaveApi?Object:r.FaveApi])],d)},276289:(e,t,s)=>{s.d(t,{GroupsSubscribeService:()=>u});var i=s(331635),o=s(571355),r=s(962005),a=s(261491),h=s(454236),d=s(780345),n=s(132028),l=s(823274),c=s(327813);class u{getIsMember(e){return!!this.memberFieldService.getValue(e)}async join(e){const t=e.group_id,s=this.groupsAccessMap.get(t);if(s!==h.GroupsGroupIsClosedEnumNames.PRIVATE)return this.memberFieldService.edit(t,(async()=>{await this.api.join(e),this.leftGroupsData.set(t,!1),this.myTracker.sendTimespentEvent(o.MyTrackerActivityId.CommunitySubscribe),s!==h.GroupsGroupIsClosedEnumNames.CLOSED?this.memberFieldService.setValue(t,!0):this.groupsMemberStatusMap.set(t,d.GroupsGroupFullMemberStatusEnumNames.HAS_SENT_A_REQUEST)}));console.error("Trying to subscribe to a private group")}async leave(e){const t=e.group_id;return this.memberFieldService.edit(t,(async()=>{await this.api.leave(e),this.memberFieldService.setValue(t,!1),this.leftGroupsData.set(t,!0),this.getMemberStatus(t)===d.GroupsGroupFullMemberStatusEnumNames.HAS_SENT_A_REQUEST&&this.groupsMemberStatusMap.set(t,d.GroupsGroupFullMemberStatusEnumNames.NOT_A_MEMBER)}))}async toggle(e){const t=this.getIsMember(e),s=this.groupsAccessMap.get(e);if(void 0===t)return;const i={group_id:e};return s&&!t&&this.getMemberStatus(e)===d.GroupsGroupFullMemberStatusEnumNames.HAS_SENT_A_REQUEST||t?this.leave(i):this.join(i)}getIsLeftGroup(e){return!!this.leftGroupsData.get(e)}getIsJoinedGroup(e){return!1===this.leftGroupsData.get(e)}setMemberInfo(e,{isMember:t,isClosed:s,memberStatus:i}){this.memberFieldService.setValue(e,t),void 0!==s&&this.groupsAccessMap.set(e,s),void 0!==i&&this.groupsMemberStatusMap.set(e,i)}getIsLoading(e){return this.memberFieldService.getIsLoading(e)}getMemberStatus(e){return this.groupsMemberStatusMap.get(e)}constructor(e,t){this.api=e,this.myTracker=t,this.memberFieldService=new l.GroupsBaseFieldService,this.leftGroupsData=new Map,this.groupsMemberStatusMap=new Map,this.groupsAccessMap=new Map,(0,c.makeAutoObservable)(this)}}u=(0,i.__decorate)([n.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.GroupsApi?Object:r.GroupsApi,void 0===a.MyTrackerLegacy?Object:a.MyTrackerLegacy])],u)},734773:(e,t,s)=>{s.d(t,{GroupsWallSubscribeService:()=>n});var i=s(331635),o=s(327813),r=s(229745),a=s(132028),h=s(468073),d=s(823274);class n{getIsSubscribed(e){return this.baseFieldService.getValue(e)}setIsSubscribed(e,t){return this.baseFieldService.setValue(e,t)}async subscribe(e){return this.baseFieldService.edit(e,(async()=>{await this.wallApi.subscribe({owner_id:h.Ranges.convertGroupIdToOwnerId(e)}),this.setIsSubscribed(e,!0)}))}async unsubscribe(e){return this.baseFieldService.edit(e,(async()=>{await this.wallApi.unsubscribe({owner_id:h.Ranges.convertGroupIdToOwnerId(e)}),this.setIsSubscribed(e,!1)}))}toggle(e){const t=this.getIsSubscribed(e);if(void 0!==t)return t?this.unsubscribe(e):this.subscribe(e)}getIsLoading(e){return this.baseFieldService.getIsLoading(e)}constructor(e){this.wallApi=e,this.baseFieldService=new d.GroupsBaseFieldService,(0,o.makeAutoObservable)(this)}}n=(0,i.__decorate)([a.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.WallApi?Object:r.WallApi])],n)},903723:(e,t,s)=>{s.d(t,{GroupsProvider:()=>u});var i=s(331635),o=s(327813),r=s(962005),a=s(132028),h=s(468073),d=s(276289),n=s(504715),l=s(734773),c=s(46605);class u{getGroup(e){return this.data.groupsMap.get("number"==typeof e?e:this.screenNameToIdMap[e])}createGroupFromApi({apiGroup:e,fields:t}){const{subscribeService:s,favoriteService:i,wallSubscribeService:r,storiesService:a}=this,{is_member:d,id:n,is_favorite:l,is_subscribed:c,has_unseen_stories:u,member_status:m,...g}=e;this.subscribeService.setMemberInfo(e.id,{isMember:!!d,memberStatus:m,isClosed:g.is_closed}),void 0!==l&&this.favoriteService.setIsFavorite(e.id,Boolean(l)),void 0!==c&&this.wallSubscribeService.setIsSubscribed(e.id,Boolean(c)),void 0!==u&&a.setHasUnseenStories(h.Ranges.convertGroupIdToOwnerId(n),u),"string"==typeof e.screen_name&&(this.screenNameToIdMap[e.screen_name]=n);const p=(0,o.makeAutoObservable)(Object.assign({id:n,fields:t,get is_member(){return s.getIsMember(this.id)},get is_favorite(){return i.getIsFavorite(this.id)},get is_subscribed(){return r.getIsSubscribed(this.id)},get has_unseen_stories(){return a.getHasUnseenStories(h.Ranges.convertGroupIdToOwnerId(this.id))},get member_status(){return s.getMemberStatus(this.id)}},g));return this.data.groupsMap.set(p.id,p),p}async createGroup(e){const t=await this.groupsApi.create(e);return this.createGroupFromApi({apiGroup:t,fields:""})}async fetchGroupsByIds(e,t){const{groupIds:s,fields:i=[],...o}=e,r=this.fetchGroupsRequiredFields.concat(i).join(",");return((await this.groupsApi.getById({...o,group_ids:s.join(","),fields:r},t)).groups||[]).map((e=>this.createGroupFromApi({apiGroup:e,fields:r})))}async fetchGroupsExtended(e,{controller:t}={}){const s=await this.groupsApi.get({...e,extended:1},{signal:t?.signal}),i=s.items.map((t=>this.createGroupFromApi({apiGroup:t,fields:e.fields??""})));return{...s,items:i}}async groupEdit(e,{controller:t}={}){const s=e.group_id,i=this.getGroup(s);if(!i)return null;await this.groupsApi.edit(e,{signal:t?.signal});const[o]=await this.fetchGroupsByIds({groupIds:[s],fields:i.fields.split(",")});return o}constructor(e,t,s,i,r){this.groupsApi=e,this.subscribeService=t,this.favoriteService=s,this.wallSubscribeService=i,this.storiesService=r,this.fetchGroupsRequiredFields=["is_member","member_status","is_closed"],this.screenNameToIdMap={},this.data={groupsMap:new Map},(0,o.makeAutoObservable)(this)}}u=(0,i.__decorate)([a.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.GroupsApi?Object:r.GroupsApi,void 0===d.GroupsSubscribeService?Object:d.GroupsSubscribeService,void 0===n.GroupsFavoriteService?Object:n.GroupsFavoriteService,void 0===l.GroupsWallSubscribeService?Object:l.GroupsWallSubscribeService,void 0===c.GroupsStoriesService?Object:c.GroupsStoriesService])],u)},46605:(e,t,s)=>{s.d(t,{GroupsStoriesService:()=>d});var i=s(331635),o=s(132028),r=s(327813),a=s(988010),h=s(746310);class d{seenAllStories(e){this.hasUnseenStories.set(e,!1)}dispose(){this.unsubscribeToAllStoriesSeen()}setHasUnseenStories(e,t){this.hasUnseenStories.set(e,t)}getHasUnseenStories(e){return this.hasUnseenStories.get(e)}async restore(e){const{items:t}=await this.storiesApi.get({owner_id:Math.abs(e)});this.hasUnseenStories.set(e,t.some((e=>Boolean(e.has_unseen))))}constructor(e,t){this.externalEvents=e,this.storiesApi=t,this.hasUnseenStories=new Map,this.unsubscribeToAllStoriesSeen=this.externalEvents.subscribeToAllStoriesSeen((e=>this.seenAllStories(e))),(0,r.makeAutoObservable)(this)}}d=(0,i.__decorate)([o.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===a.ExternalEvents?Object:a.ExternalEvents,void 0===h.StoriesApi?Object:h.StoriesApi])],d)},261491:(e,t,s)=>{s.d(t,{MyTrackerLegacy:()=>a});var i=s(331635),o=s(951652),r=s(132028);class a{tmrPushRawEvent(e){"undefined"!=typeof window&&this.authService.userId&&!window.__dev&&(window._tmr=window._tmr||[],window._tmr.push(e))}constructor(e){this.authService=e,this.counterId="2579437",this.sendTimespentEvent=e=>this.tmrPushRawEvent({id:this.counterId,type:"incrementEventTimespent",activity:e,userId:this.authService.userId})}}a=(0,i.__decorate)([r.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.AuthService?Object:o.AuthService])],a)},21632:(e,t,s)=>{s.d(t,{AccountApi:()=>a});var i=s(331635),o=s(641569),r=s(132028);class a extends o.ApiNamespace{get namespace(){return"account"}constructor(...e){super(...e),this.getInfo=this.makeMethod("getInfo"),this.setInfo=this.makeMethod("setInfo"),this.getProfileInfo=this.makeMethod("getProfileInfo"),this.getProfileShortInfo=this.makeMethod("getProfileShortInfo"),this.getPrivacySettings=this.makeMethod("getPrivacySettings"),this.setPrivacy=this.makeMethod("setPrivacy"),this.saveInfo=this.makeMethod("saveProfileInfo"),this.deactivate=this.makeMethod("deactivate"),this.getBalance=this.makeMethod("getBalance"),this.hideHelpHint=this.makeMethod("hideHelpHint"),this.getHelpHints=this.makeMethod("getHelpHints"),this.getBanned=this.makeMethod("getBanned"),this.ban=this.makeMethod("ban"),this.unban=this.makeMethod("unban"),this.getSilentModeStatus=this.makeMethod("getSilentModeStatus"),this.startSilentMode=this.makeMethod("startSilentMode"),this.stopSilentMode=this.makeMethod("stopSilentMode")}}a=(0,i.__decorate)([r.scope.global()],a)},52016:(e,t,s)=>{s.d(t,{CatalogApi:()=>a});var i=s(331635),o=s(641569),r=s(132028);class a extends o.ApiNamespace{get namespace(){return"catalog"}constructor(...e){super(...e),this.getAudio=this.makeMethod("getAudio"),this.getGroups=this.makeMethod("getGroups",!0),this.getSearchGroups=this.makeMethod("getSearchGroups"),this.getVideo=this.makeMethod("getVideo"),this.getSection=this.makeMethod("getSection"),this.getGroupsCollection=this.makeMethod("getGroupsCollection"),this.getBlockItems=this.makeMethod("getBlockItems"),this.getClassifieds=this.makeMethod("getClassifieds"),this.getAudioClips=this.makeMethod("getAudioClips"),this.getAudioClipsSearch=this.makeMethod("getAudioClipsSearch"),this.replaceBlocks=this.makeMethod("replaceBlocks"),this.getShortVideoSearch=this.makeMethod("getShortVideoSearch"),this.getVideoShowcase=this.makeMethod("getVideoShowcase"),this.getVideoSearchSubscriptions=this.makeMethod("getVideoSearchSubscriptions"),this.getVideoSearchWeb2=this.makeMethod("getVideoSearchWeb2"),this.getVideoSearch=this.makeMethod("getVideoSearch"),this.getSearchGames=this.makeMethod("getSearchGames"),this.getSearchMarket=this.makeMethod("getSearchMarket"),this.getPeopleSearch=this.makeMethod("getPeopleSearch"),this.getOwnerVideosSearch=this.makeMethod("getOwnerVideosSearch"),this.getSearchMiniApps=this.makeMethod("getSearchMiniApps"),this.hideBlock=this.makeMethod("hideBlock")}}a=(0,i.__decorate)([r.scope.global()],a)},208214:(e,t,s)=>{s.d(t,{FriendsApi:()=>a});var i=s(331635),o=s(132028),r=s(641569);class a extends r.ApiNamespace{get namespace(){return"friends"}constructor(...e){super(...e),this.get=this.makeMethod("get"),this.getIds=this.makeMethod("get"),this.getUsers=(e,t)=>this.makeMethod("get")(e.fields?e:{...e,fields:"first_name"},t),this.search=this.makeMethod("search"),this.getLists=this.makeMethod("getLists"),this.add=this.makeMethod("add"),this.delete=this.makeMethod("delete")}}a=(0,i.__decorate)([o.scope.global()],a)},962005:(e,t,s)=>{s.d(t,{GroupsApi:()=>a});var i=s(331635),o=s(641569),r=s(132028);class a extends o.ApiNamespace{get namespace(){return"groups"}constructor(...e){super(...e),this.getById=this.makeMethod("getById",!0),this.getSettings=this.makeMethod("getSettings"),this.getMembers=this.makeMethod("getMembers"),this.getEditSettings=this.makeMethod("getEditSettings"),this.join=this.makeMethod("join"),this.leave=this.makeMethod("leave"),this.changeSubscriptionsVisibility=this.makeMethod("changeSubscriptionsVisibility"),this.get=this.makeMethod("get"),this.edit=this.makeMethod("edit"),this.getWebCatalogMenu=this.makeMethod("getWebCatalogMenu",!0),this.removeRecents=this.makeMethod("removeRecents"),this.getRecommendedTipsList=this.makeMethod("getRecommendedTipsList"),this.getSuggestions=this.makeMethod("getSuggestions"),this.getGroupSettingsMenu=this.makeMethod("getGroupSettingsMenu"),this.getCategories=this.makeMethod("getCategories"),this.addAddress=this.makeMethod("addAddress"),this.create=this.makeMethod("create"),this.editAddress=this.makeMethod("editAddress"),this.invite=this.makeMethod("invite"),this.removeUser=this.makeMethod("removeUser"),this.setOnboardingState=this.makeMethod("setOnboardingState"),this.validateCreation=this.makeMethod("validateCreation"),this.getMonetizationRules=this.makeMethod("getMonetizationRules"),this.registerAdblogger=this.makeMethod("registerAdblogger"),this.sendGptRequest=this.makeMethod("sendGptRequest"),this.getGptResult=this.makeMethod("getGptResult"),this.addChat=this.makeMethod("addChat"),this.getAddresses=this.makeMethod("getAddresses"),this.getGroupSettings=this.makeMethod("getGroupSettings"),this.getBidOrganizationList=this.makeMethod("getBidOrganizationList"),this.setBidLink=this.makeMethod("setBidLink"),this.getBusinessProfile=this.makeMethod("getBusinessProfile"),this.setGroupSettings=this.makeMethod("setGroupSettings")}}a=(0,i.__decorate)([r.scope.global()],a)},591301:(e,t,s)=>{s.d(t,{LikesApi:()=>a});var i=s(331635),o=s(132028),r=s(641569);class a extends r.ApiNamespace{get namespace(){return"likes"}constructor(...e){super(...e),this.add=this.makeMethod("add"),this.delete=this.makeMethod("delete"),this.getList=this.makeMethod("getList")}}a=(0,i.__decorate)([o.scope.global()],a)},746310:(e,t,s)=>{s.d(t,{StoriesApi:()=>a});var i=s(331635),o=s(641569),r=s(132028);class a extends o.ApiNamespace{get namespace(){return"stories"}constructor(...e){super(...e),this.getWithPrefetch=this.makeMethod("get",!0),this.get=this.makeMethod("get"),this.getById=this.makeMethod("getById"),this.search=this.makeMethod("search"),this.getDiscover=this.makeMethod("getDiscover"),this.getPhotoUploadServer=this.makeMethod("getPhotoUploadServer"),this.getVideoUploadServer=this.makeMethod("getVideoUploadServer"),this.getBackgrounds=this.makeMethod("getBackgrounds"),this.getWebConfig=this.makeMethod("getWebConfig"),this.save=this.makeMethod("save"),this.delete=this.makeMethod("delete")}}a=(0,i.__decorate)([r.scope.global()],a)},488709:(e,t,s)=>{s.d(t,{UsersApi:()=>a});var i=s(331635),o=s(641569),r=s(132028);class a extends o.ApiNamespace{get namespace(){return"users"}constructor(...e){super(...e),this.getWithPrefetch=this.makeMethod("get",!0),this.get=this.makeMethod("get"),this.getFollowers=this.makeMethod("getFollowers"),this.search=this.makeMethod("search")}}a=(0,i.__decorate)([r.scope.global()],a)},882044:(e,t,s)=>{s.d(t,{VideoApi:()=>a});var i=s(331635),o=s(132028),r=s(641569);class a extends r.ApiNamespace{get namespace(){return"video"}constructor(...e){super(...e),this.get=this.makeMethod("get"),this.search=this.makeMethod("search"),this.edit=this.makeMethod("edit"),this.save=this.makeMethod("save"),this.delete=this.makeMethod("delete"),this.add=this.makeMethod("add"),this.getAlbums=this.makeMethod("getAlbums"),this.getAlbumById=this.makeMethod("getAlbumById"),this.getAlbumsByVideo=this.makeMethod("getAlbumsByVideo"),this.addToAlbum=this.makeMethod("addToAlbum"),this.addAlbum=this.makeMethod("addAlbum"),this.editAlbum=this.makeMethod("editAlbum"),this.deleteAlbum=this.makeMethod("deleteAlbum"),this.removeFromAlbum=this.makeMethod("removeFromAlbum"),this.getGroupsForUploading=this.makeMethod("getGroupsForUploading"),this.encodeProgress=this.makeMethod("encodeProgress"),this.getPrivacyDictionary=this.makeMethod("getPrivacyDictionary"),this.reportComment=this.makeMethod("reportComment"),this.getPlaylistUpdateInfo=this.makeMethod("getPlaylistUpdateInfo"),this.getPlaylistThumbUploadUrl=this.makeMethod("getPlaylistThumbUploadUrl"),this.savePlaylistThumb=this.makeMethod("savePlaylistThumb"),this.savePlaylistAdditionalThumb=this.makeMethod("savePlaylistAdditionalThumb"),this.getGroupSettings=this.makeMethod("getGroupSettings"),this.reorderAlbums=this.makeMethod("reorderAlbums"),this.restore=this.makeMethod("restore"),this.stopStreaming=this.makeMethod("stopStreaming"),this.getComments=this.makeMethod("getComments"),this.agreeDisclaimer=this.makeMethod("agreeDisclaimer"),this.saveGroupSettings=this.makeMethod("saveGroupSettings"),this.deleteComment=this.makeMethod("deleteComment"),this.restoreComment=this.makeMethod("restoreComment"),this.editComment=this.makeMethod("editComment"),this.createComment=this.makeMethod("createComment"),this.getStatsToken=this.makeMethod("getStatsToken",!0),this.getPlayerConfig=this.makeMethod("getPlayerConfig"),this.saveUploadedThumb=this.makeMethod("saveUploadedThumb"),this.subscribeChooseRelevantAuthors=this.makeMethod("subscribeChooseRelevantAuthors"),this.subscribeGetRelevantAuthors=this.makeMethod("subscribeGetRelevantAuthors"),this.getThumbUploadUrl=this.makeMethod("getThumbUploadUrl"),this.viewSegments=this.makeMethod("viewSegments"),this.subscribeToAlbum=this.makeMethod("subscribeToAlbum"),this.unsubscribeFromAlbum=this.makeMethod("unsubscribeFromAlbum"),this.moderAction=this.makeMethod("moderAction"),this.updateMovieInfo=this.makeMethod("updateMovieInfo"),this.getMovieInfo=this.makeMethod("getMovieInfo"),this.getMovieInfoDropdownData=this.makeMethod("getMovieInfoDropdownData")}}a=(0,i.__decorate)([o.scope.global()],a)},229745:(e,t,s)=>{s.d(t,{WallApi:()=>a});var i=s(331635),o=s(641569),r=s(132028);class a extends o.ApiNamespace{get namespace(){return"wall"}constructor(...e){super(...e),this.get=this.makeMethod("get"),this.getPostById=this.makeMethod("getById"),this.acceptCoOwnership=this.makeMethod("acceptCoOwnership"),this.rejectCoOwnership=this.makeMethod("rejectCoOwnership"),this.parseAttachedLink=this.makeMethod("parseAttachedLink"),this.post=this.makeMethod("post"),this.subscribe=this.makeMethod("subscribe"),this.unsubscribe=this.makeMethod("unsubscribe"),this.getSubscriptions=this.makeMethod("getSubscriptions"),this.edit=this.makeMethod("edit"),this.getPostingSettings=this.makeMethod("getPostingSettings"),this.getCommentsExtended=this.makeMethod("getComments"),this.getCommentExtended=this.makeMethod("getComment"),this.reportPost=this.makeMethod("reportPost"),this.pin=this.makeMethod("pin"),this.unpin=this.makeMethod("unpin"),this.closeComments=this.makeMethod("closeComments"),this.openComments=this.makeMethod("openComments"),this.archive=this.makeMethod("archive"),this.reveal=this.makeMethod("reveal"),this.delete=this.makeMethod("delete"),this.restore=this.makeMethod("restore"),this.deleteComment=this.makeMethod("deleteComment"),this.restoreComment=this.makeMethod("restoreComment"),this.createComment=this.makeMethod("createComment"),this.editComment=this.makeMethod("editComment"),this.getCommentOrder=this.makeMethod("getCommentOrder")}}a=(0,i.__decorate)([r.scope.global()],a)},33013:(e,t,s)=>{s.d(t,{getVideoThumb:()=>o});var i=s(8520);function o(e,t,s){const o=e.filter((e=>!e.with_padding)),r=s&&(0,i.isRetina)()?2:1,a=((0,i.isNumber)(t)?t:t.width||0)*r,h=((0,i.isNumber)(t)?0:t.height||0)*r;return(0,i.getPhotoSize)(o.length?o:e,a,h)?.url}},808315:(e,t,s)=>{function i(e){let t="";return e>=3600&&(t+=Math.floor(e/3600)+"h",e%=3600),e>=60&&(t+=Math.floor(e/60)+"m",e%=60),e>0&&(t+=Math.floor(e)+"s"),t}s.d(t,{timecodeToString:()=>i})},299841:(e,t,s)=>{s.d(t,{PrimaryAttachmentClipWrapper:()=>c});var i=s(474848),o=s(456921),r=s(132028),a=s(945364),h=s(783856),d=s(284241),n=s(951576);const l=(0,o.observer)((function(){const{getPlayer:e,props:{current:{ratio:t}}}=(0,d.useClipPlayerModel)(),[s,o]=(0,a.useStyleValue)("--primary-attachment-ratio");(0,n.useMute)();const r=(0,n.useClipIntersection)();return t?(0,i.jsx)("div",{ref:r,children:e(t)}):(0,i.jsx)(h.Overlay,{getRootRef:s,children:(0,i.jsx)("div",{ref:r,children:e(o)})})})),c=(0,r.createWidget)(d.ClipPlayerProvider,l)},951576:(e,t,s)=>{s.d(t,{useClipIntersection:()=>i.useClipIntersection,useMute:()=>o.useMute});var i=s(342880),o=s(956690)},342880:(e,t,s)=>{s.d(t,{useClipIntersection:()=>h});var i=s(276426),o=s(8520),r=s(296540),a=s(284241);function h(){const e=(0,r.useRef)(null),t=(0,i.useNumericVariableValue)(document.body,"--header-height"),{autoplay:s,play:h,pause:d}=(0,a.useClipPlayerModel)();return(0,r.useEffect)((()=>{const i=(0,o.debounce)((()=>{if(!e.current)return;const i=e.current.getBoundingClientRect(),o=i.height/3,r=i.top+o,a=i.bottom-o;r>=t&&a<=window.innerHeight?s&&h():d()}),30);return document.addEventListener("scroll",i,{passive:!0}),s&&i(),()=>document.removeEventListener("scroll",i)}),[s]),e}},956690:(e,t,s)=>{s.d(t,{useMute:()=>r});var i=s(296540),o=s(284241);const r=()=>{const{playing:e,toggleMute:t}=(0,o.useClipPlayerModel)();(0,i.useEffect)((()=>{const s=e=>{"KeyM"===e.code&&t()};return e&&document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}}),[e,t])}},450627:(e,t,s)=>{s.d(t,{PrimaryAttachmentClipWrapper:()=>i.PrimaryAttachmentClipWrapper});var i=s(299841)},693730:(e,t,s)=>{s.d(t,{ClipPlayer:()=>c});var i=s(331635),o=s(327813),r=s(132028),a=s(768035),h=s(632520),d=s(130270),n=s(33013),l=s(756314);class c{async[r.init](){this.postAuthorId=(0,a.parseRawId)(this.props.current.postId).ownerId,this.getAutoplaySettings(),this.fetchVideo()}async[r.destroy](){this.switchConnection.emit("stop"),this.accountInfoService.reset()}get videoData(){if(this.video)return{id:this.video.data.id,ownerId:this.video.data.owner_id,files:this.video.data.files,ovId:this.video.data.ov_id,trackCode:this.video.data.track_code}}get mode(){if(!this.video)return"cover";const{width:e=0,height:t=0}=this.video.data;return t/e<1?"contain":"cover"}async getAutoplaySettings(){const e=await this.accountInfoService.ensure({fields:["video_autoplay"]}),t=e?.settings?.find((e=>"video_autoplay"===e.name));this.autoplaySetting=Boolean(t?.value)}async fetchVideo(){this.isLoading=!0;try{await this.shortVideoVideosProvider.fetch({videos:this.props.current.videoRawId},{})}catch(e){(0,o.runInAction)((()=>{this.error=e}))}finally{this.isLoading=!1}}get video(){return this.shortVideoVideosProvider.get(this.props.current.videoRawId)}get cover(){return this.video?.data.image&&(0,n.getVideoThumb)(this.video.data.image,this.props.current.coverWidth)}get isRestricted(){return Boolean(this.video?.data.content_restricted)}get isRestrictedWithBlur(){return Boolean(this.video?.data.restriction?.blur)}get restrictionData(){return this.video?.data?.restriction}get onClick(){if(!this.isRestricted)return this.props.current.onClick}get autoplay(){return this.autoplaySetting&&!this.isRestricted&&!this.isRestrictedWithBlur&&this.autoplayClip}constructor(e,t,s){this.shortVideoVideosProvider=e,this.accountInfoService=t,this.props=s,this.autoplaySetting=!1,this.autoplayClip=!0,this.isLoading=!1,this.error=void 0,this.postAuthorId=0,this.playing=!1,this.muted=!0,this.getPlayer=e=>this.props.current.getPlayer({video:this.videoData,isRestricted:this.isRestricted,cover:this.cover,onClick:this.onClick,muted:this.muted,onMuteChanged:this.onMuteChanged,playing:this.playing,togglePlay:this.togglePlay,ratio:e,mode:this.mode,isControls:!this.isRestricted,loop:!0,volume:1,restrictionData:this.restrictionData,videoRawId:this.props.current.videoRawId}),this.play=()=>{this.playing||(this.playing=!0,this.switchConnection.emit("play",this.muted))},this.pause=()=>{this.playing&&(this.playing=!1,this.switchConnection.emit("pause"))},this.togglePlay=()=>{this.playing?(this.pause(),this.autoplayClip=!1):this.play()},this.onMuteChanged=e=>{this.muted=e,this.switchConnection.emit(e?"mute":"unmute"),e||(this.autoplayClip=!1)},this.toggleMute=()=>{this.onMuteChanged(!this.muted)},(0,o.makeAutoObservable)(this),this.switchConnection=l.MediaPlayersSwitch.ensure(r.rootContainer).connect({resume:this.play,pause:this.pause,stop:this.pause})}}c=(0,i.__decorate)([r.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===h.ShortVideoVideosProvider?Object:h.ShortVideoVideosProvider,void 0===d.AccountInfoService?Object:d.AccountInfoService,void 0===r.Props?Object:r.Props])],c)},284241:(e,t,s)=>{s.d(t,{ClipPlayerProvider:()=>r,useClipPlayerModel:()=>a});var i=s(132028),o=s(693730);const{Provider:r,useModel:a}=(0,i.createProvider)(o.ClipPlayer)},112082:(e,t,s)=>{s.d(t,{PrimaryAttachmentClipWrapper:()=>i.PrimaryAttachmentClipWrapper});var i=s(450627)}}]);try{stManager?.done("dist/web/chunks/eb801291.56a88604.js")}catch(e){}